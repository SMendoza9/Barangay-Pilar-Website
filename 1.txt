<!DOCTYPE html> asdasda
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barangay Pilar Village Services Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --blue-dark: #003380;
            --blue-medium: #0047AB;
            --blue-light: #0756CE;
            --red: #CE1126;
            --yellow: #FCD116;
            --green: #28a745;
            --orange: #fd7e14;
            --purple: #6f42c1;
            --gray-light: #f5f5f5;
            --gray-medium: #e0e0e0;
            --gray-dark: #333333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--gray-light);
            color: var(--gray-dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }

        @media (max-width: 1400px) {
            .container {
                max-width: 1200px;
            }
        }
        
        @media (max-width: 1200px) {
            .container {
                max-width: 1000px;
            }
        }
        
        @media (max-width: 992px) {
            .container {
                max-width: 800px;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                max-width: 95%;
                padding: 15px;
            }
        }

        header {
            background: linear-gradient(to right, var(--blue-dark), var(--blue-medium));
            color: white;
            padding: 20px 0;
            text-align: center;
            border-bottom: 5px solid var(--yellow);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }

        .logo {
            font-size: 2.5rem;
            margin-right: 15px;
            color: var(--yellow);
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .tagline {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Common screen styles */
        .screen {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-top: 30px;
        }

        h2 {
            color: var(--blue-dark);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--yellow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h3 {
            color: var(--blue-medium);
            margin: 20px 0 15px 0;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-btn i {
            font-size: 1.2rem;
        }

        .primary-btn {
            background-color: var(--blue-medium);
            color: white;
        }

        .primary-btn:hover {
            background-color: var(--blue-dark);
            transform: translateY(-2px);
        }

        .secondary-btn {
            background-color: var(--gray-medium);
            color: var(--gray-dark);
        }

        .secondary-btn:hover {
            background-color: #d0d0d0;
        }

        .danger-btn {
            background-color: var(--red);
            color: white;
        }

        .danger-btn:hover {
            background-color: #b31022;
        }

        .success-btn {
            background-color: var(--green);
            color: white;
        }

        .success-btn:hover {
            background-color: #218838;
        }

        .hidden {
            display: none !important;
        }

        /* Applicant Form Specific Styles */
        .applicant-form {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-top: 30px;
        }

        .thank-you-screen {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-top: 30px;
            text-align: center;
        }

        .capital-notice {
            background-color: #fff8e1;
            border-left: 5px solid var(--yellow);
            padding: 15px;
            margin-bottom: 25px;
            text-align: center;
            font-weight: bold;
            color: #333;
        }

        .capital-notice i {
            color: var(--red);
            margin-right: 10px;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .form-row .form-group {
            flex: 1;
            min-width: 250px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--blue-dark);
        }

        .required::after {
            content: " *";
            color: var(--red);
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--gray-medium);
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s;
            background-color: white;
        }

        /* Add uppercase styling to text inputs */
        input[type="text"], input[type="tel"], textarea {
            text-transform: uppercase;
        }

        input::placeholder, textarea::placeholder {
            color: #888;
            font-style: italic;
        }

        select {
            color: #333;
        }

        select option:first-child {
            color: #888;
            font-style: italic;
        }

        input:focus, select:focus, textarea:focus {
            border-color: var(--blue-light);
            outline: none;
            box-shadow: 0 0 0 3px rgba(7, 86, 206, 0.2);
        }

        /* Style for invalid input (when lowercase is detected) */
        .invalid-input {
            border-color: var(--red) !important;
            background-color: #fff0f0;
        }

        .error-message {
            color: var(--red);
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
        }

        .length-stay-container {
            display: flex;
            gap: 10px;
        }

        .length-stay-container input {
            flex: 3;
        }

        .length-stay-container select {
            flex: 1;
            min-width: 120px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }

        .checkbox-group label {
            margin-bottom: 0;
        }

        .additional-form {
            background-color: #f0f8ff;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid var(--blue-medium);
        }

        .additional-form h3 {
            color: var(--blue-dark);
            margin-bottom: 15px;
            text-align: center;
        }

        .school-checkbox {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #ccc;
        }

        .school-checkbox:last-child {
            border-bottom: none;
        }

        .submit-btn {
            background-color: var(--blue-medium);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
            width: 100%;
            max-width: 300px;
            text-decoration: none;
            display: inline-block;
        }

        .submit-btn:hover {
            background-color: var(--blue-dark);
            transform: scale(1.05);
        }

        .back-btn {
            background-color: var(--gray-medium);
            color: var(--gray-dark);
            margin-right: 15px;
        }

        .back-btn:hover {
            background-color: #b0b0b0;
        }

        .thank-you-screen h2 {
            color: var(--blue-dark);
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .thank-you-screen h3 {
            color: var(--blue-medium);
            font-size: 1.4rem;
            margin-bottom: 30px;
            font-weight: normal;
        }

        .thank-you-icon {
            font-size: 4rem;
            color: var(--blue-light);
            margin: 30px 0;
        }

        /* FIXED: Button container alignment for thank you screen */
        .thank-you-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        /* Image Upload Styles */
        .image-upload-container {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            border: 2px dashed var(--blue-medium);
            border-radius: 10px;
            background-color: #f9f9f9;
        }

        .image-preview {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border: 3px solid var(--blue-light);
            margin: 15px auto;
            display: none;
        }

        .upload-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .upload-btn, .change-btn {
            background-color: var(--blue-medium);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            display: inline-block;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .change-btn {
            background-color: var(--green);
        }

        .upload-btn:hover {
            background-color: var(--blue-dark);
        }

        .change-btn:hover {
            background-color: #218838;
        }

        /* Table Styles */
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th {
            background-color: var(--blue-dark);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--gray-medium);
        }

        tr:hover {
            background-color: rgba(7, 86, 206, 0.05);
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
        }

        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-approved {
            background-color: #d4edda;
            color: #155724;
        }

        .status-rejected {
            background-color: #f8d7da;
            color: #721c24;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .view-btn {
            background-color: var(--blue-light);
            color: white;
        }

        .approve-btn {
            background-color: var(--green);
            color: white;
        }

        .reject-btn {
            background-color: var(--red);
            color: white;
        }

        /* Dashboard Stats */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-top: 4px solid var(--blue-medium);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2.5rem;
            color: var(--blue-medium);
            margin-bottom: 15px;
        }

        .stat-card h3 {
            font-size: 2.2rem;
            color: var(--blue-dark);
            margin: 10px 0;
        }

        .stat-card p {
            color: var(--gray-dark);
            font-size: 0.95rem;
        }

        /* Charts */
        .chart-container {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }

        .chart-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        /* Certificate Preview */
        .certificate-preview {
            background-color: white;
            border: 2px solid var(--gray-medium);
            border-radius: 8px;
            padding: 40px;
            margin-top: 20px;
            min-height: 400px;
            position: relative;
            background-image: url('data:image/svg+xml;utf8,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><path d="M0,0 L100,0 L100,100 L0,100 Z" fill="none" stroke="%23FCD116" stroke-width="2" stroke-dasharray="5,5"/></svg>');
            background-size: 100px 100px;
        }

        .certificate-header {
            text-align: center;
            border-bottom: 3px double var(--blue-dark);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .certificate-header h2 {
            color: var(--blue-dark);
            font-size: 2.2rem;
            border: none;
            margin: 0;
            padding: 0;
        }

        .certificate-body {
            padding: 30px;
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .certificate-footer {
            position: absolute;
            bottom: 40px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
            padding-top: 30px;
            border-top: 1px solid var(--gray-medium);
        }

        .signature-box {
            text-align: center;
        }

        .signature-line {
            width: 200px;
            border-top: 1px solid var(--gray-dark);
            margin: 40px auto 10px;
        }

        /* Filter Controls */
        .filter-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            background-color: var(--gray-light);
            padding: 20px;
            border-radius: 8px;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .filter-btn {
            align-self: flex-end;
            padding: 10px 20px;
        }

        /* Form View Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            margin: 0;
            border: none;
            padding: 0;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-dark);
        }

        /* Footer */
        footer {
            background-color: var(--blue-dark);
            color: white;
            padding: 30px 0;
            margin-top: 40px;
            text-align: center;
        }

        .footer-content {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .footer-section {
            flex: 1;
            min-width: 300px;
            margin: 15px 0;
        }

        .footer-section h3 {
            color: var(--yellow);
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .footer-section p {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .footer-section i {
            margin-right: 10px;
            color: var(--yellow);
            min-width: 20px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .screen, .applicant-form, .thank-you-screen {
                padding: 20px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .nav-buttons {
                flex-direction: column;
            }
            
            .nav-btn {
                width: 100%;
                justify-content: center;
            }
            
            .chart-row {
                grid-template-columns: 1fr;
            }
            
            .certificate-footer {
                flex-direction: column;
                gap: 30px;
                position: static;
                margin-top: 40px;
            }
            
            .footer-content {
                flex-direction: column;
                text-align: center;
            }
            
            .thank-you-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .upload-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .upload-btn, .change-btn {
                width: 100%;
                max-width: 200px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.7rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo-container">
                <i class="fas fa-landmark logo"></i>
                <div>
                    <h1>Barangay Pilar Village Services Portal</h1>
                    <p class="tagline">Serving The Community With Integrity And Excellence</p>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Access Selection Screen -->
        <div id="accessScreen" class="screen">
            <h2>Welcome to the Barangay Pilar Village Services Portal</h2>
            <p>Please select your access type:</p>
            
            <div class="nav-buttons">
                <button class="nav-btn primary-btn" id="applicantBtn">
                    <i class="fas fa-user-edit"></i>
                    Open as Applicant
                </button>
                
                <button class="nav-btn primary-btn" id="memberBtn">
                    <i class="fas fa-user-lock"></i>
                    Open as Barangay Member
                </button>
            </div>
        </div>

        <!-- Login Screen for Barangay Members -->
        <div id="loginScreen" class="screen hidden">
            <h2>Barangay Member Login</h2>
            <p>Enter your credentials to access the barangay management system</p>
            
            <div id="loginError" class="error-message" style="background-color: #f8d7da; color: #721c24; padding: 12px; border-radius: 6px; margin-bottom: 20px; display: none;">
                <i class="fas fa-exclamation-circle"></i> Invalid username or password. Please try again.
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="username" class="required">Username</label>
                    <input type="text" id="username" placeholder="Enter your username" required>
                </div>
                
                <div class="form-group">
                    <label for="password" class="required">Password</label>
                    <input type="password" id="password" placeholder="Enter your password" required>
                </div>
                
                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="rememberMe">
                        <label for="rememberMe">Remember me</label>
                    </div>
                </div>
                
                <div class="nav-buttons">
                    <button type="button" class="nav-btn secondary-btn" id="backToAccessFromLogin">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <button type="submit" class="nav-btn primary-btn">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </div>
                
                <div style="margin-top: 20px; text-align: center; font-size: 0.9rem; color: var(--gray-dark);">
                    <p>Demo Credentials:</p>
                    <p><strong>Username:</strong> admin | <strong>Password:</strong> barangay2023</p>
                    <p><strong>Username:</strong> staff | <strong>Password:</strong> pilarvillage</p>
                </div>
            </form>
        </div>

        <!-- Application Form Screen -->
        <div id="applicantForm" class="applicant-form hidden">
            <h2>
                Application Form
                <button class="nav-btn secondary-btn" id="backToAccessFromApplicant">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </button>
            </h2>
            
            <div class="capital-notice">
                <i class="fas fa-exclamation-triangle"></i>
                USE CAPITAL LETTERS WHEN FILLING OUT THIS FORM
            </div>

            <form id="applicationForm">
                <!-- Image Upload Section -->
                <div class="image-upload-container">
                    <h3>Request of Formal Image of Applicant</h3>
                    <p><strong>Required: PNG or JPG format</strong></p>
                    <p><em>Applicant's face must be clearly visible</em></p>
                    
                    <img id="imagePreview" class="image-preview" alt="Applicant Photo Preview">
                    
                    <div>
                        <input type="file" id="imageUpload" accept=".png,.jpg,.jpeg" style="display: none;">
                        <div class="upload-buttons">
                            <!-- Initially show only upload button -->
                            <button type="button" class="upload-btn" id="uploadTrigger">
                                <i class="fas fa-camera"></i> Upload Photo
                            </button>
                            <!-- Change button is hidden initially -->
                            <button type="button" class="change-btn hidden" id="changePhotoBtn">
                                <i class="fas fa-sync-alt"></i> Change Photo
                            </button>
                        </div>
                    </div>
                    <p id="fileName" style="margin-top: 10px; color: var(--blue-dark);"></p>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="lastName" class="required">Last Name</label>
                        <input type="text" id="lastName" placeholder="Enter last name" required>
                        <div class="error-message" id="lastNameError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="firstName" class="required">First Name</label>
                        <input type="text" id="firstName" placeholder="Enter first name" required>
                        <div class="error-message" id="firstNameError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="middleName">Middle Name</label>
                        <input type="text" id="middleName" placeholder="Enter middle name">
                        <div class="error-message" id="middleNameError">Please use CAPITAL LETTERS only</div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="blockLot" class="required">Block and Lot</label>
                        <input type="text" id="blockLot" placeholder="e.g., BLOCK 5, LOT 12" required>
                        <div class="error-message" id="blockLotError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="street" class="required">Street</label>
                        <input type="text" id="street" placeholder="Enter street name" required>
                        <div class="error-message" id="streetError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="subdivision" class="required">Subdivision</label>
                        <select id="subdivision" required>
                            <option value="" disabled selected>Select Subdivision</option>
                            <option value="CYPRESS MANGGAHAN">CYPRESS MANGGAHAN</option>
                            <option value="CAMELLA HOMES CLASSIC">CAMELLA HOMES CLASSIC</option>
                            <option value="CLASSIC HOMES">CLASSIC HOMES</option>
                            <option value="CUEVAS COMPOUND">CUEVAS COMPOUND</option>
                            <option value="DAISY COMPOUND">DAISY COMPOUND</option>
                            <option value="GARDEN COMPOUND">GARDEN COMPOUND</option>
                            <option value="GLORIA COMPOUND">GLORIA COMPOUND</option>
                            <option value="MALIGAYA COMPOUND">MALIGAYA COMPOUND</option>
                            <option value="PAG-ASA COMPOUND">PAG-ASA COMPOUND</option>
                            <option value="SAMPAGUITA COMPOUND">SAMPAGUITA COMPOUND</option>
                            <option value="BF PILAR SOUTHVILLE">BF PILAR SOUTHVILLE</option>
                            <option value="TERESA COMPOUND">TERESA COMPOUND</option>
                            <option value="PILAR VILLAGE">PILAR VILLAGE</option>
                            <option value="TERESA PARK">TERESA PARK</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="provincialAddress" class="required">Provincial Address</label>
                    <textarea id="provincialAddress" rows="3" placeholder="Enter complete provincial address" required></textarea>
                    <div class="error-message" id="provincialAddressError">Please use CAPITAL LETTERS only</div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="contactNumber" class="required">Contact Number</label>
                        <input type="tel" id="contactNumber" placeholder="e.g., 09171234567" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="age" class="required">Age</label>
                        <input type="number" id="age" min="1" max="120" placeholder="Enter Age" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="lengthStay" class="required">Length of Stay (Minimum: 6 Months)</label>
                        <div class="length-stay-container">
                            <input type="number" id="lengthStay" min="1" placeholder="Enter Number" required>
                            <select id="stayUnit">
                                <option value="months">Months</option>
                                <option value="years">Years</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="birthday" class="required">Birthday</label>
                        <input type="date" id="birthday" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="birthPlace" class="required">Place of Birth</label>
                        <input type="text" id="birthPlace" placeholder="CITY, PROVINCE" required>
                        <div class="error-message" id="birthPlaceError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="nationality" class="required">Nationality</label>
                        <select id="nationality" required>
                            <option value="" disabled selected>Select Nationality</option>
                            <!-- Nationalities will be populated by JavaScript -->
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="sex" class="required">Sex</label>
                        <select id="sex" required>
                            <option value="" disabled selected>Select Sex</option>
                            <option value="MALE">MALE</option>
                            <option value="FEMALE">FEMALE</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="civilStatus" class="required">Civil Status</label>
                        <select id="civilStatus" required>
                            <option value="" disabled selected>Select Civil Status</option>
                            <option value="SINGLE">SINGLE</option>
                            <option value="MARRIED">MARRIED</option>
                            <option value="WIDOWED">WIDOWED</option>
                            <option value="LEGALLY SEPARATED">LEGALLY SEPARATED</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="purpose" class="required">Purpose of Application</label>
                    <select id="purpose" required>
                        <option value="" disabled selected>Select Purpose</option>
                        <option value="BANK REQUIREMENT">BANK REQUIREMENT</option>
                        <option value="BUSINESS PERMIT APPLICATION">BUSINESS PERMIT APPLICATION</option>
                        <option value="CERTIFICATE OF RESIDENCY">CERTIFICATE OF RESIDENCY</option>
                        <option value="CHANGE ADDRESS">CHANGE ADDRESS</option>
                        <option value="COHABITATION">COHABITATION</option>
                        <option value="CUTTING TREES">CUTTING TREES</option>
                        <option value="DRIVER LICENSE APPLICATION">DRIVER LICENSE APPLICATION</option>
                        <option value="EDUCATIONAL ASSISTANCE">EDUCATIONAL ASSISTANCE</option>
                        <option value="FIRE VICTIM">FIRE VICTIM</option>
                        <option value="FIRST TIME JOB SEEKER">FIRST TIME JOB SEEKER</option>
                        <option value="GOOD MORAL">GOOD MORAL</option>
                        <option value="GREENCARD APPLICATION/RENEWAL">GREENCARD APPLICATION/RENEWAL</option>
                        <option value="GSIS REQUIREMENT">GSIS REQUIREMENT</option>
                        <option value="LATE REGISTRATION OF BIRTH">LATE REGISTRATION OF BIRTH</option>
                        <option value="LIBRENG LIBING">LIBRENG LIBING</option>
                        <option value="LOAN APPLICATION">LOAN APPLICATION</option>
                        <option value="LOCAL EMPLOYMENT">LOCAL EMPLOYMENT</option>
                        <option value="MARRIAGE LICENSE APPLICATION">MARRIAGE LICENSE APPLICATION</option>
                        <option value="MAYNILAD/MERALCO">MAYNILAD/MERALCO</option>
                        <option value="MEDICAL ASSISTANCE/FINANCIAL">MEDICAL ASSISTANCE/FINANCIAL</option>
                        <option value="NO DEROGATORY">NO DEROGATORY</option>
                        <option value="ONENESS">ONENESS</option>
                        <option value="PHILHEALTH APPLICATION">PHILHEALTH APPLICATION</option>
                        <option value="POSTAL ID REQUIREMENT">POSTAL ID REQUIREMENT</option>
                        <option value="PROOF OF INDIGENCY">PROOF OF INDIGENCY</option>
                        <option value="PROOF OF RESIDENCY">PROOF OF RESIDENCY</option>
                        <option value="PWD ID REQUIREMENT">PWD ID REQUIREMENT</option>
                        <option value="SCHOOL REQUIREMENT">SCHOOL REQUIREMENT</option>
                        <option value="SENIOR CITIZEN ID REQUIREMENT">SENIOR CITIZEN ID REQUIREMENT</option>
                        <option value="SOCIAL PENSION">SOCIAL PENSION</option>
                        <option value="SOLO PARENT ID REQUIREMENT">SOLO PARENT ID REQUIREMENT</option>
                        <option value="SSS REQUIREMENT">SSS REQUIREMENT</option>
                        <option value="TIN ID APPLICATION">TIN ID APPLICATION</option>
                        <option value="UNEMPLOYMENT">UNEMPLOYMENT</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="firstTimeJobSeeker">
                        <label for="firstTimeJobSeeker">FIRST TIME JOB-SEEKER?</label>
                    </div>
                </div>
                
                <!-- Additional Form for First Time Job Seekers -->
                <div id="additionalJobSeekerForm" class="additional-form hidden">
                    <h3>ADDITIONAL INFO FOR FIRST TIME JOB-SEEKERS</h3>
                    <p>Please provide the name of the School or institution for each selected section:</p>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="elementarySchool">
                            <label for="elementarySchool">Elementary School</label>
                        </div>
                        <input type="text" id="elementarySchoolName" class="school-name-input hidden" placeholder="ENTER ELEMENTARY SCHOOL NAME">
                        <div class="error-message" id="elementarySchoolError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="juniorHighSchool">
                            <label for="juniorHighSchool">Junior High School</label>
                        </div>
                        <input type="text" id="juniorHighSchoolName" class="school-name-input hidden" placeholder="ENTER JUNIOR HIGH SCHOOL NAME">
                        <div class="error-message" id="juniorHighSchoolError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="seniorHighSchool">
                            <label for="seniorHighSchool">Senior High School</label>
                        </div>
                        <input type="text" id="seniorHighSchoolName" class="school-name-input hidden" placeholder="ENTER SENIOR HIGH SCHOOL NAME">
                        <div class="error-message" id="seniorHighSchoolError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="college">
                            <label for="college">College</label>
                        </div>
                        <input type="text" id="collegeName" class="school-name-input hidden" placeholder="ENTER COLLEGE NAME">
                        <div class="error-message" id="collegeNameError">Please use CAPITAL LETTERS only</div>
                        <input type="text" id="collegeCourse" class="course-input hidden" placeholder="ENTER COLLEGE COURSE" style="margin-top: 10px;">
                        <div class="error-message" id="collegeCourseError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="vocationalSchool">
                            <label for="vocationalSchool">Vocational School</label>
                        </div>
                        <input type="text" id="vocationalSchoolName" class="school-name-input hidden" placeholder="ENTER VOCATIONAL SCHOOL NAME">
                        <div class="error-message" id="vocationalSchoolError">Please use CAPITAL LETTERS only</div>
                        <input type="text" id="vocationalCourse" class="course-input hidden" placeholder="ENTER VOCATIONAL COURSE" style="margin-top: 10px;">
                        <div class="error-message" id="vocationalCourseError">Please use CAPITAL LETTERS only</div>
                    </div>
                </div>
                
                <div style="margin-top: 30px; text-align: center;">
                    <button type="button" class="submit-btn back-btn" id="cancelApplicantForm">Cancel</button>
                    <button type="submit" class="submit-btn">Submit Application</button>
                </div>
            </form>
        </div>

        <!-- Thank You Screen -->
        <div id="thankYouScreen" class="thank-you-screen hidden">
            <i class="fas fa-check-circle thank-you-icon"></i>
            <h2>THANK YOU FOR FILLING YOUR APPLICATION!</h2>
            <h3>We will contact you once your application status is completed.</h3>
            <p>Your application has been submitted successfully. A barangay representative will contact you within 3-5 working days.</p>
            <p>For inquiries, please contact Barangay Pilar Village Office at (02) 1234-5678.</p>
            
            <div class="thank-you-buttons">
                <button class="submit-btn" id="newApplicationBtn">
                    Submit Another Application
                </button>
                <button class="submit-btn back-btn" id="backToHomeFromThankYou">
                    Back to Home
                </button>
            </div>
        </div>

        <!-- Member Dashboard -->
        <div id="memberDashboard" class="screen hidden">
            <h2>
                Barangay Management Dashboard
                <button class="nav-btn danger-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </h2>
            
            <p>Welcome back, <strong id="loggedInUser">Administrator</strong>! Here's an overview of barangay activities.</p>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <i class="fas fa-file-alt"></i>
                    <h3 id="pendingApplications">0</h3>
                    <p>Pending Applications</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-check-circle"></i>
                    <h3 id="processedToday">0</h3>
                    <p>Processed Today</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <h3 id="totalResidents">0</h3>
                    <p>Total Residents</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-calendar-check"></i>
                    <h3 id="upcomingEvents">3</h3>
                    <p>Upcoming Events</p>
                </div>
            </div>
            
            <h3>Quick Actions</h3>
            <div class="nav-buttons">
                <button class="nav-btn primary-btn" id="applicationsManagementBtn">
                    <i class="fas fa-list-check"></i> Applications Management
                </button>
                
                <button class="nav-btn primary-btn" id="residentRegistrationBtn">
                    <i class="fas fa-user-plus"></i> Register New Resident
                </button>
                
                <button class="nav-btn primary-btn" id="certificateGenerationBtn">
                    <i class="fas fa-print"></i> Generate Certificates
                </button>
                
                <button class="nav-btn primary-btn" id="reportsDashboardBtn">
                    <i class="fas fa-chart-bar"></i> View Reports
                </button>
            </div>
            
            <h3 style="margin-top: 30px;">Recent Activity</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Activity</th>
                            <th>User</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="recentActivity">
                        <!-- Activity rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Applications Management Interface -->
        <div id="applicationsManagementScreen" class="screen hidden">
            <h2>
                Applications Management
                <button class="nav-btn secondary-btn" id="backToDashboardFromApps">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="filter-controls">
                <div class="filter-group">
                    <label>Application Type</label>
                    <select id="filterType">
                        <option value="all">All Types</option>
                        <option value="residency">Certificate of Residency</option>
                        <option value="indigency">Certificate of Indigency</option>
                        <option value="jobseeker">First Time Job Seeker</option>
                        <option value="business">Business Permit</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Status</label>
                    <select id="filterStatus">
                        <option value="all">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="approved">Approved</option>
                        <option value="rejected">Rejected</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Date Range</label>
                    <input type="date" id="filterDate">
                </div>
                
                <button class="nav-btn primary-btn filter-btn" id="applyFilters">
                    <i class="fas fa-filter"></i> Apply Filters
                </button>
                
                <button class="nav-btn secondary-btn filter-btn" id="resetFilters">
                    <i class="fas fa-redo"></i> Reset
                </button>
            </div>
            
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Applicant Name</th>
                            <th>Application Type</th>
                            <th>Date Submitted</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="applicationsTable">
                        <!-- Applications will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <div style="margin-top: 20px; display: flex; justify-content: space-between;">
                <div>
                    <button class="nav-btn secondary-btn" id="exportApplications">
                        <i class="fas fa-file-export"></i> Export to Excel
                    </button>
                </div>
                <div>
                    <span id="paginationInfo">Showing 0 applications</span>
                    <button class="nav-btn secondary-btn" id="prevPage"><i class="fas fa-chevron-left"></i></button>
                    <button class="nav-btn secondary-btn" id="nextPage"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
        </div>

        <!-- Resident Registration Form -->
        <div id="residentRegistrationScreen" class="screen hidden">
            <h2>
                Register New Resident
                <button class="nav-btn secondary-btn" id="backToDashboardFromRegistration">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <form id="residentRegistrationForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentLastName" class="required">Last Name</label>
                        <input type="text" id="residentLastName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentFirstName" class="required">First Name</label>
                        <input type="text" id="residentFirstName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentMiddleName">Middle Name</label>
                        <input type="text" id="residentMiddleName">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentBirthdate" class="required">Birthdate</label>
                        <input type="date" id="residentBirthdate" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentAge" class="required">Age</label>
                        <input type="number" id="residentAge" min="0" max="120" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentCivilStatus" class="required">Civil Status</label>
                        <select id="residentCivilStatus" required>
                            <option value="">Select Status</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                            <option value="Widowed">Widowed</option>
                            <option value="Separated">Separated</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentContact" class="required">Contact Number</label>
                        <input type="tel" id="residentContact" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentEmail">Email Address</label>
                        <input type="email" id="residentEmail">
                    </div>
                    
                    <div class="form-group">
                        <label for="residentOccupation">Occupation</label>
                        <input type="text" id="residentOccupation">
                    </div>
                </div>
                
                <h3>Address Information</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentBlockLot" class="required">Block and Lot</label>
                        <input type="text" id="residentBlockLot" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentStreet" class="required">Street</label>
                        <input type="text" id="residentStreet" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentSubdivision" class="required">Subdivision</label>
                        <select id="residentSubdivision" required>
                            <option value="">Select Subdivision</option>
                            <option value="PILAR VILLAGE">PILAR VILLAGE</option>
                            <option value="CYPRESS MANGGAHAN">CYPRESS MANGGAHAN</option>
                            <option value="TERESA PARK">TERESA PARK</option>
                            <option value="BF PILAR SOUTHVILLE">BF PILAR SOUTHVILLE</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentLengthStay" class="required">Length of Stay</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="number" id="residentLengthStay" style="flex: 3;" required>
                            <select id="residentStayUnit" style="flex: 1;">
                                <option value="months">Months</option>
                                <option value="years">Years</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="residentNotes">Additional Notes</label>
                    <textarea id="residentNotes" rows="3"></textarea>
                </div>
                
                <div class="nav-buttons">
                    <button type="reset" class="nav-btn secondary-btn">
                        <i class="fas fa-redo"></i> Clear Form
                    </button>
                    <button type="submit" class="nav-btn success-btn">
                        <i class="fas fa-save"></i> Register Resident
                    </button>
                </div>
            </form>
        </div>

        <!-- Certificate Generation Module -->
        <div id="certificateGenerationScreen" class="screen hidden">
            <h2>
                Certificate Generation
                <button class="nav-btn secondary-btn" id="backToDashboardFromCertificates">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="certificateType" class="required">Certificate Type</label>
                    <select id="certificateType" required>
                        <option value="">Select Certificate Type</option>
                        <option value="residency">Certificate of Residency</option>
                        <option value="indigency">Certificate of Indigency</option>
                        <option value="goodmoral">Certificate of Good Moral Character</option>
                        <option value="employment">Certificate of Employment</option>
                        <option value="nocriminal">No Criminal Record</option>
                        <option value="soloparent">Solo Parent Certification</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="certificateRecipient" class="required">Recipient Name</label>
                    <input type="text" id="certificateRecipient" placeholder="Search resident name..." required>
                    <div id="residentSuggestions" style="margin-top: 5px; display: none;">
                        <!-- Suggestions will be populated here -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="certificatePurpose" class="required">Purpose</label>
                    <input type="text" id="certificatePurpose" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="certificateDate">Certificate Date</label>
                    <input type="date" id="certificateDate">
                </div>
                
                <div class="form-group">
                    <label for="certificateValidity">Validity (Days)</label>
                    <input type="number" id="certificateValidity" min="1" max="365" value="30">
                </div>
                
                <div class="form-group">
                    <label for="certificateNumber">Certificate Number</label>
                    <input type="text" id="certificateNumber" value="BPV-2023-" readonly>
                </div>
            </div>
            
            <div class="form-group">
                <label for="certificateRemarks">Additional Remarks</label>
                <textarea id="certificateRemarks" rows="3" placeholder="Any additional information for the certificate..."></textarea>
            </div>
            
            <div class="certificate-preview">
                <div class="certificate-header">
                    <h2 id="previewCertificateType">CERTIFICATE OF RESIDENCY</h2>
                    <p>Republic of the Philippines<br>Province of Cavite<br>Barangay Pilar Village</p>
                </div>
                
                <div class="certificate-body">
                    <p>TO WHOM IT MAY CONCERN:</p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        This is to certify that <strong id="previewRecipient">[RECIPIENT NAME]</strong>, 
                        of legal age, is a bona fide resident of <strong id="previewAddress">[ADDRESS]</strong>, 
                        Barangay Pilar Village, and has been residing therein for <strong id="previewLengthStay">[LENGTH]</strong>.
                    </p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        This certification is issued upon the request of the above-named person for <strong id="previewPurpose">[PURPOSE]</strong> 
                        and whatever legal purpose it may serve.
                    </p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        Issued this <strong id="previewDate">[DATE]</strong> at Barangay Pilar Village.
                    </p>
                </div>
                
                <div class="certificate-footer">
                    <div class="signature-box">
                        <div class="signature-line"></div>
                        <p><strong>HON. JUAN DELA CRUZ</strong><br>Barangay Captain</p>
                    </div>
                    
                    <div class="signature-box">
                        <div class="signature-line"></div>
                        <p><strong>MARIA SANTOS</strong><br>Barangay Secretary</p>
                    </div>
                </div>
            </div>
            
            <div class="nav-buttons" style="margin-top: 30px;">
                <button class="nav-btn secondary-btn" id="previewCertificate">
                    <i class="fas fa-eye"></i> Update Preview
                </button>
                <button class="nav-btn primary-btn" id="printCertificate">
                    <i class="fas fa-print"></i> Print Certificate
                </button>
                <button class="nav-btn success-btn" id="saveCertificate">
                    <i class="fas fa-save"></i> Save & Generate
                </button>
            </div>
        </div>

        <!-- Reports Dashboard -->
        <div id="reportsDashboardScreen" class="screen hidden">
            <h2>
                Reports Dashboard
                <button class="nav-btn secondary-btn" id="backToDashboardFromReports">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <i class="fas fa-file-alt"></i>
                    <h3>156</h3>
                    <p>Applications This Month</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <h3>42</h3>
                    <p>New Residents This Year</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-certificate"></i>
                    <h3>89</h3>
                    <p>Certificates Issued</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-money-bill-wave"></i>
                    <h3>24,580</h3>
                    <p>Revenue This Month</p>
                </div>
            </div>
            
            <h3>Application Statistics</h3>
            <div class="chart-row">
                <div class="chart-container">
                    <h4>Applications by Type</h4>
                    <div style="height: 300px; display: flex; align-items: flex-end; justify-content: space-around; margin-top: 20px;">
                        <div style="text-align: center;">
                            <div style="height: 200px; width: 40px; background-color: var(--blue-medium); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Residency</div>
                            <div style="font-weight: bold;">45%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 150px; width: 40px; background-color: var(--green); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Indigency</div>
                            <div style="font-weight: bold;">25%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 100px; width: 40px; background-color: var(--orange); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Job Seeker</div>
                            <div style="font-weight: bold;">15%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 80px; width: 40px; background-color: var(--purple); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Business</div>
                            <div style="font-weight: bold;">10%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 50px; width: 40px; background-color: var(--red); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Others</div>
                            <div style="font-weight: bold;">5%</div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h4>Applications by Status</h4>
                    <div style="height: 300px; display: flex; align-items: center; justify-content: center; margin-top: 20px;">
                        <div style="width: 200px; height: 200px; border-radius: 50%; background: conic-gradient(var(--green) 0% 65%, var(--yellow) 65% 85%, var(--red) 85% 100%);"></div>
                    </div>
                    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--green); margin-right: 5px;"></span> Approved (65%)</div>
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--yellow); margin-right: 5px;"></span> Pending (20%)</div>
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--red); margin-right: 5px;"></span> Rejected (15%)</div>
                    </div>
                </div>
            </div>
            
            <h3>Monthly Report</h3>
            <div class="filter-controls">
                <div class="filter-group">
                    <label>Report Type</label>
                    <select id="reportType">
                        <option value="applications">Applications Report</option>
                        <option value="residents">Residents Report</option>
                        <option value="financial">Financial Report</option>
                        <option value="certificates">Certificates Report</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Month</label>
                    <select id="reportMonth">
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Year</label>
                    <select id="reportYear">
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                    </select>
                </div>
                
                <button class="nav-btn primary-btn filter-btn" id="generateReport">
                    <i class="fas fa-chart-bar"></i> Generate Report
                </button>
                
                <button class="nav-btn success-btn filter-btn" id="exportReport">
                    <i class="fas fa-download"></i> Export as PDF
                </button>
            </div>
            
            <div class="table-container" style="margin-top: 20px;">
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Application Type</th>
                            <th>Applicant</th>
                            <th>Status</th>
                            <th>Processed By</th>
                            <th>Processing Time</th>
                        </tr>
                    </thead>
                    <tbody id="reportTable">
                        <!-- Report data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Form View Modal -->
        <div id="formViewModal" class="modal-overlay hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Application Details</h2>
                    <button class="close-modal" id="closeModalBtn">&times;</button>
                </div>
                <div id="formViewContent">
                    <!-- Form content will be populated here -->
                </div>
                <div style="margin-top: 20px; text-align: center;">
                    <button class="nav-btn secondary-btn" id="closeModal">Close</button>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3><i class="fas fa-map-marker-alt"></i> Visit Us!</h3>
                <p>C2C5+FCQ, Aguirre Corner Sapphire, Pilar, Las Pias, 1740 Metro Manila</p>
            </div>
            <div class="footer-section">
                <h3><i class="fas fa-phone-alt"></i> Contact Us!</h3>
                <p>0927 342 5375</p>
                <p>Office Hours: Mon-Fri 8:00 AM - 5:00 PM</p>
            </div>
            <div class="footer-section">
                <h3><i class="fas fa-info-circle"></i> About</h3>
                <p>Barangay Pilar Village Services Portal</p>
                <p>Official online service platform</p>
            </div>
        </div>
    </footer>

    <script>
        // Data Management
        let applicantsDatabase = JSON.parse(localStorage.getItem('applicantsDatabase')) || [];
        let residentsDatabase = JSON.parse(localStorage.getItem('residentsDatabase')) || [];
        
        // Initialize sample data if empty
        if (applicantsDatabase.length === 0) {
            const sampleApplicant = {
                id: Date.now(),
                photo: 'https://via.placeholder.com/120x120/0756CE/FFFFFF?text=Sample+Photo',
                lastName: 'SANTOS',
                firstName: 'JUAN',
                middleName: 'DELA CRUZ',
                blockLot: 'BLOCK 5, LOT 12',
                street: 'SAPPHIRE STREET',
                subdivision: 'PILAR VILLAGE',
                provincialAddress: 'BRGY. SAN ISIDRO, ABUCAY, BATAAN',
                contactNumber: '09171234567',
                age: '25',
                lengthStay: '2 years',
                birthday: 'January 15, 1999',
                birthPlace: 'MANILA, METRO MANILA',
                nationality: 'Filipino',
                sex: 'Male',
                civilStatus: 'Single',
                purpose: 'PROOF OF RESIDENCY',
                isFirstTimeJobSeeker: true,
                jobSeekerData: {
                    elementary: { name: 'Pilar Elementary School' },
                    juniorHigh: { name: 'Pilar National High School' },
                    seniorHigh: { name: 'Pilar Senior High School' },
                    college: { name: 'University of the Philippines', course: 'Business Administration' }
                },
                status: 'Pending',
                dateSubmitted: new Date().toLocaleDateString()
            };
            
            applicantsDatabase.push(sampleApplicant);
            localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
        }
        
        if (residentsDatabase.length === 0) {
            const sampleResidents = [
                { id: 1, lastName: 'DELA CRUZ', firstName: 'JUAN', middleName: 'SANTOS', birthdate: '1990-05-15', age: 33, civilStatus: 'Single', contact: '09123456789', email: 'juan@example.com', occupation: 'Teacher', blockLot: 'BLOCK 5, LOT 12', street: 'SAPPHIRE STREET', subdivision: 'PILAR VILLAGE', lengthStay: '5 years', notes: '' },
                { id: 2, lastName: 'SANTOS', firstName: 'MARIA', middleName: 'REYES', birthdate: '1985-08-22', age: 38, civilStatus: 'Married', contact: '09234567890', email: 'maria@example.com', occupation: 'Nurse', blockLot: 'BLOCK 3, LOT 8', street: 'DIAMOND STREET', subdivision: 'TERESA PARK', lengthStay: '10 years', notes: '' }
            ];
            
            residentsDatabase = sampleResidents;
            localStorage.setItem('residentsDatabase', JSON.stringify(residentsDatabase));
        }

        // DOM Elements
        const accessScreen = document.getElementById('accessScreen');
        const loginScreen = document.getElementById('loginScreen');
        const applicantForm = document.getElementById('applicantForm');
        const thankYouScreen = document.getElementById('thankYouScreen');
        const memberDashboard = document.getElementById('memberDashboard');
        const applicationsManagementScreen = document.getElementById('applicationsManagementScreen');
        const residentRegistrationScreen = document.getElementById('residentRegistrationScreen');
        const certificateGenerationScreen = document.getElementById('certificateGenerationScreen');
        const reportsDashboardScreen = document.getElementById('reportsDashboardScreen');
        const formViewModal = document.getElementById('formViewModal');
        const formViewContent = document.getElementById('formViewContent');
        
        // Buttons
        const applicantBtn = document.getElementById('applicantBtn');
        const memberBtn = document.getElementById('memberBtn');
        const backToAccessFromLogin = document.getElementById('backToAccessFromLogin');
        const backToAccessFromApplicant = document.getElementById('backToAccessFromApplicant');
        const cancelApplicantForm = document.getElementById('cancelApplicantForm');
        const backToHomeFromThankYou = document.getElementById('backToHomeFromThankYou');
        const logoutBtn = document.getElementById('logoutBtn');
        
        // Application form elements
        const applicationForm = document.getElementById('applicationForm');
        const firstTimeJobSeekerCheckbox = document.getElementById('firstTimeJobSeeker');
        const additionalJobSeekerForm = document.getElementById('additionalJobSeekerForm');
        const lengthStayInput = document.getElementById('lengthStay');
        const stayUnitSelect = document.getElementById('stayUnit');
        const nationalitySelect = document.getElementById('nationality');
        const newApplicationBtn = document.getElementById('newApplicationBtn');
        
        // Image upload elements
        const imageUpload = document.getElementById('imageUpload');
        const uploadTrigger = document.getElementById('uploadTrigger');
        const changePhotoBtn = document.getElementById('changePhotoBtn');
        const imagePreview = document.getElementById('imagePreview');
        const fileName = document.getElementById('fileName');
        
        // Dashboard navigation buttons
        const applicationsManagementBtn = document.getElementById('applicationsManagementBtn');
        const residentRegistrationBtn = document.getElementById('residentRegistrationBtn');
        const certificateGenerationBtn = document.getElementById('certificateGenerationBtn');
        const reportsDashboardBtn = document.getElementById('reportsDashboardBtn');
        
        // Back buttons from sub-screens
        const backToDashboardFromApps = document.getElementById('backToDashboardFromApps');
        const backToDashboardFromRegistration = document.getElementById('backToDashboardFromRegistration');
        const backToDashboardFromCertificates = document.getElementById('backToDashboardFromCertificates');
        const backToDashboardFromReports = document.getElementById('backToDashboardFromReports');
        
        // Modal buttons
        const closeModalBtn = document.getElementById('closeModalBtn');
        const closeModal = document.getElementById('closeModal');
        
        // Demo credentials
        const validCredentials = [
            { username: 'admin', password: 'barangay2023', name: 'Administrator' },
            { username: 'staff', password: 'pilarvillage', name: 'Staff Member' }
        ];

        // Sample activity data
        const sampleActivity = [
            { time: '10:30 AM', activity: 'Certificate of Residency approved', user: 'Juan Dela Cruz', status: 'approved' },
            { time: '9:15 AM', activity: 'First Time Job Seeker application submitted', user: 'Maria Santos', status: 'pending' },
            { time: 'Yesterday', activity: 'Barangay Meeting scheduled', user: 'System', status: 'info' },
            { time: 'Nov 28', activity: 'Database backup completed', user: 'System', status: 'info' },
            { time: 'Nov 27', activity: 'Certificate of Indigency rejected', user: 'Pedro Garcia', status: 'rejected' }
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            populateNationalityDropdown();
            setupEventListeners();
            updateDashboardStats();
            populateApplicationsTable();
            populateRecentActivity();
            populateReportTable();
        });

        function setupEventListeners() {
            // Main navigation
            applicantBtn.addEventListener('click', () => {
                accessScreen.classList.add('hidden');
                applicantForm.classList.remove('hidden');
                resetApplicationForm();
            });
            
            memberBtn.addEventListener('click', () => {
                accessScreen.classList.add('hidden');
                loginScreen.classList.remove('hidden');
            });
            
            backToAccessFromLogin.addEventListener('click', () => {
                loginScreen.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            backToAccessFromApplicant.addEventListener('click', () => {
                applicantForm.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            cancelApplicantForm.addEventListener('click', () => {
                if (confirm('Are you sure you want to cancel? All entered data will be lost.')) {
                    applicantForm.classList.add('hidden');
                    accessScreen.classList.remove('hidden');
                }
            });
            
            // Thank you screen navigation
            newApplicationBtn.addEventListener('click', function() {
                thankYouScreen.classList.add('hidden');
                applicantForm.classList.remove('hidden');
                resetApplicationForm();
            });
            
            backToHomeFromThankYou.addEventListener('click', () => {
                thankYouScreen.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            // Login form
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('username').value.trim();
                const password = document.getElementById('password').value;
                
                const validUser = validCredentials.find(
                    cred => cred.username === username && cred.password === password
                );
                
                if (validUser) {
                    document.getElementById('loginError').style.display = 'none';
                    document.getElementById('loggedInUser').textContent = validUser.name;
                    loginScreen.classList.add('hidden');
                    memberDashboard.classList.remove('hidden');
                    this.reset();
                    updateDashboardStats();
                    populateApplicationsTable();
                } else {
                    document.getElementById('loginError').style.display = 'block';
                    document.getElementById('password').value = '';
                }
            });
            
            // Logout
            logoutBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            // Dashboard navigation
            applicationsManagementBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                applicationsManagementScreen.classList.remove('hidden');
                populateApplicationsTable();
            });
            
            residentRegistrationBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                residentRegistrationScreen.classList.remove('hidden');
            });
            
            certificateGenerationBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                certificateGenerationScreen.classList.remove('hidden');
            });
            
            reportsDashboardBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                reportsDashboardScreen.classList.remove('hidden');
            });
            
            // Back buttons
            backToDashboardFromApps.addEventListener('click', () => {
                applicationsManagementScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            backToDashboardFromRegistration.addEventListener('click', () => {
                residentRegistrationScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            backToDashboardFromCertificates.addEventListener('click', () => {
                certificateGenerationScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            backToDashboardFromReports.addEventListener('click', () => {
                reportsDashboardScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            // Application form event listeners
            // Image upload handling
            uploadTrigger.addEventListener('click', () => {
                imageUpload.click();
            });
            
            changePhotoBtn.addEventListener('click', () => {
                imageUpload.click();
            });
            
            imageUpload.addEventListener('change', function() {
                if (this.files && this.files[0]) {
                    const file = this.files[0];
                    
                    // Check file type
                    if (!file.type.match('image/png') && !file.type.match('image/jpeg')) {
                        alert('Please upload a PNG or JPG image file.');
                        this.value = '';
                        return;
                    }
                    
                    // Check file size (max 5MB)
                    if (file.size > 5 * 1024 * 1024) {
                        alert('File size should be less than 5MB.');
                        this.value = '';
                        return;
                    }
                    
                    // Display file name
                    fileName.textContent = `Selected file: ${file.name}`;
                    
                    // Preview image
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        imagePreview.src = e.target.result;
                        imagePreview.style.display = 'block';
                        
                        // Hide upload button and show change button
                        uploadTrigger.classList.add('hidden');
                        changePhotoBtn.classList.remove('hidden');
                    }
                    reader.readAsDataURL(file);
                }
            });
            
            // First Time Job Seeker Checkbox
            firstTimeJobSeekerCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    additionalJobSeekerForm.classList.remove('hidden');
                } else {
                    hideAdditionalForm();
                }
            });
            
            // School checkbox handlers
            document.querySelectorAll('.school-checkbox input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const schoolNameInput = document.getElementById(this.id + 'Name');
                    const courseInput = document.getElementById(this.id.replace('School', 'Course'));
                    
                    if (this.checked) {
                        schoolNameInput.classList.remove('hidden');
                        schoolNameInput.required = true;
                        
                        // Show course input for college or vocational school
                        if (courseInput) {
                            courseInput.classList.remove('hidden');
                            courseInput.required = true;
                        }
                    } else {
                        schoolNameInput.classList.add('hidden');
                        schoolNameInput.required = false;
                        schoolNameInput.value = '';
                        
                        if (courseInput) {
                            courseInput.classList.add('hidden');
                            courseInput.required = false;
                            courseInput.value = '';
                        }
                    }
                });
            });
            
            // Length of Stay validation
            stayUnitSelect.addEventListener('change', function() {
                if (this.value === 'months') {
                    lengthStayInput.min = 6;
                    if (lengthStayInput.value && parseInt(lengthStayInput.value) < 6) {
                        lengthStayInput.value = 6;
                    }
                } else {
                    lengthStayInput.min = 1;
                }
            });
            
            // CAPITAL LETTERS ENFORCEMENT
            // Function to check if text contains lowercase letters
            function hasLowercase(text) {
                return /[a-z]/.test(text);
            }
            
            // Function to validate capital letters for a field
            function validateCapitalLetters(inputElement, errorElementId) {
                const value = inputElement.value;
                const errorElement = document.getElementById(errorElementId);
                
                if (value && hasLowercase(value)) {
                    inputElement.classList.add('invalid-input');
                    errorElement.style.display = 'block';
                    return false;
                } else {
                    inputElement.classList.remove('invalid-input');
                    errorElement.style.display = 'none';
                    return true;
                }
            }
            
            // Real-time validation for all text fields
            const textInputs = [
                { id: 'lastName', errorId: 'lastNameError' },
                { id: 'firstName', errorId: 'firstNameError' },
                { id: 'middleName', errorId: 'middleNameError' },
                { id: 'blockLot', errorId: 'blockLotError' },
                { id: 'street', errorId: 'streetError' },
                { id: 'provincialAddress', errorId: 'provincialAddressError' },
                { id: 'birthPlace', errorId: 'birthPlaceError' },
                { id: 'elementarySchoolName', errorId: 'elementarySchoolError' },
                { id: 'juniorHighSchoolName', errorId: 'juniorHighSchoolError' },
                { id: 'seniorHighSchoolName', errorId: 'seniorHighSchoolError' },
                { id: 'collegeName', errorId: 'collegeNameError' },
                { id: 'collegeCourse', errorId: 'collegeCourseError' },
                { id: 'vocationalSchoolName', errorId: 'vocationalSchoolError' },
                { id: 'vocationalCourse', errorId: 'vocationalCourseError' }
            ];
            
            // Add event listeners for real-time validation
            textInputs.forEach(field => {
                const inputElement = document.getElementById(field.id);
                if (inputElement) {
                    inputElement.addEventListener('input', function() {
                        // Convert input to uppercase as user types
                        this.value = this.value.toUpperCase();
                        
                        // Validate capital letters
                        validateCapitalLetters(this, field.errorId);
                    });
                    
                    inputElement.addEventListener('blur', function() {
                        validateCapitalLetters(this, field.errorId);
                    });
                }
            });
            
            // For textarea elements (provincial address)
            const provincialAddress = document.getElementById('provincialAddress');
            provincialAddress.addEventListener('input', function() {
                this.value = this.value.toUpperCase();
                validateCapitalLetters(this, 'provincialAddressError');
            });
            
            provincialAddress.addEventListener('blur', function() {
                validateCapitalLetters(this, 'provincialAddressError');
            });
            
            // Form Submission with capital letters validation
            applicationForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Validate image upload
                if (!imagePreview.src || imagePreview.style.display === 'none') {
                    alert('Please upload a formal image of the applicant.');
                    uploadTrigger.focus();
                    return;
                }
                
                // Validate length of stay (minimum 6 months if months is selected)
                const lengthStay = lengthStayInput.value;
                const stayUnit = stayUnitSelect.value;
                
                if (stayUnit === 'months' && lengthStay < 6) {
                    alert("Minimum length of stay should be 6 months when selecting 'Months' as the unit.");
                    lengthStayInput.focus();
                    return;
                }
                
                // Validate capital letters for all text fields
                let allFieldsValid = true;
                textInputs.forEach(field => {
                    const inputElement = document.getElementById(field.id);
                    if (inputElement && inputElement.value.trim() !== '') {
                        if (!validateCapitalLetters(inputElement, field.errorId)) {
                            allFieldsValid = false;
                            inputElement.focus();
                        }
                    }
                });
                
                if (!allFieldsValid) {
                    alert("Please use CAPITAL LETTERS for all text fields.");
                    return;
                }
                
                // Validate first time job seeker additional info
                let jobSeekerData = null;
                if (firstTimeJobSeekerCheckbox.checked) {
                    const selectedSchools = document.querySelectorAll('.school-checkbox input[type="checkbox"]:checked');
                    if (selectedSchools.length === 0) {
                        alert("Please select at least one educational background for first time job seekers.");
                        return;
                    }
                    
                    // Check that school names are provided for selected schools
                    let allValid = true;
                    jobSeekerData = {};
                    
                    selectedSchools.forEach(schoolCheckbox => {
                        const schoolNameInput = document.getElementById(schoolCheckbox.id + 'Name');
                        if (!schoolNameInput.value.trim()) {
                            allValid = false;
                            schoolNameInput.focus();
                        } else {
                            const schoolType = schoolCheckbox.id.replace('School', '');
                            jobSeekerData[schoolType] = {
                                name: schoolNameInput.value.trim()
                            };
                            
                            // Add course if applicable
                            const courseInput = document.getElementById(schoolCheckbox.id.replace('School', 'Course'));
                            if (courseInput && courseInput.value.trim()) {
                                jobSeekerData[schoolType].course = courseInput.value.trim();
                            }
                        }
                    });
                    
                    if (!allValid) {
                        alert("Please provide the name of the school/institution for each selected educational background.");
                        return;
                    }
                }
                
                // Create applicant object with image data
                const applicant = {
                    id: Date.now(), // Simple ID generation
                    photo: imagePreview.src,
                    lastName: document.getElementById('lastName').value.toUpperCase(),
                    firstName: document.getElementById('firstName').value.toUpperCase(),
                    middleName: document.getElementById('middleName').value.toUpperCase(),
                    blockLot: document.getElementById('blockLot').value.toUpperCase(),
                    street: document.getElementById('street').value.toUpperCase(),
                    subdivision: document.getElementById('subdivision').value,
                    provincialAddress: document.getElementById('provincialAddress').value.toUpperCase(),
                    contactNumber: document.getElementById('contactNumber').value,
                    age: document.getElementById('age').value,
                    lengthStay: lengthStay + ' ' + stayUnit,
                    birthday: formatDate(document.getElementById('birthday').value),
                    birthPlace: document.getElementById('birthPlace').value.toUpperCase(),
                    nationality: document.getElementById('nationality').value,
                    sex: document.getElementById('sex').value,
                    civilStatus: document.getElementById('civilStatus').value,
                    purpose: document.getElementById('purpose').value,
                    isFirstTimeJobSeeker: firstTimeJobSeekerCheckbox.checked,
                    jobSeekerData: jobSeekerData,
                    status: 'Pending',
                    dateSubmitted: new Date().toLocaleDateString()
                };
                
                // Add to database
                applicantsDatabase.push(applicant);
                localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
                
                // Show thank you screen
                applicantForm.classList.add('hidden');
                thankYouScreen.classList.remove('hidden');
            });
            
            // Applications Management
            document.getElementById('applyFilters').addEventListener('click', applyFilters);
            document.getElementById('resetFilters').addEventListener('click', resetFilters);
            document.getElementById('exportApplications').addEventListener('click', () => {
                alert('Exporting applications to Excel...');
            });
            
            // Certificate Generation
            document.getElementById('certificateType').addEventListener('change', updateCertificatePreview);
            document.getElementById('certificateRecipient').addEventListener('input', showResidentSuggestions);
            document.getElementById('previewCertificate').addEventListener('click', updateCertificatePreview);
            document.getElementById('printCertificate').addEventListener('click', () => {
                window.print();
            });
            document.getElementById('saveCertificate').addEventListener('click', () => {
                alert('Certificate saved and generated successfully!');
            });
            
            // Reports
            document.getElementById('generateReport').addEventListener('click', generateReport);
            document.getElementById('exportReport').addEventListener('click', () => {
                alert('Report exported as PDF successfully!');
            });
            
            // Resident Registration
            document.getElementById('residentRegistrationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const resident = {
                    id: Date.now(),
                    lastName: document.getElementById('residentLastName').value.toUpperCase(),
                    firstName: document.getElementById('residentFirstName').value.toUpperCase(),
                    middleName: document.getElementById('residentMiddleName').value.toUpperCase(),
                    birthdate: document.getElementById('residentBirthdate').value,
                    age: document.getElementById('residentAge').value,
                    civilStatus: document.getElementById('residentCivilStatus').value,
                    contact: document.getElementById('residentContact').value,
                    email: document.getElementById('residentEmail').value,
                    occupation: document.getElementById('residentOccupation').value.toUpperCase(),
                    blockLot: document.getElementById('residentBlockLot').value.toUpperCase(),
                    street: document.getElementById('residentStreet').value.toUpperCase(),
                    subdivision: document.getElementById('residentSubdivision').value,
                    lengthStay: document.getElementById('residentLengthStay').value + ' ' + document.getElementById('residentStayUnit').value,
                    notes: document.getElementById('residentNotes').value,
                    dateRegistered: new Date().toLocaleDateString()
                };
                
                residentsDatabase.push(resident);
                localStorage.setItem('residentsDatabase', JSON.stringify(residentsDatabase));
                
                alert('Resident registered successfully!');
                this.reset();
                
                // Update dashboard stats
                updateDashboardStats();
            });
            
            // Modal close buttons
            closeModalBtn.addEventListener('click', () => {
                formViewModal.classList.add('hidden');
            });
            
            closeModal.addEventListener('click', () => {
                formViewModal.classList.add('hidden');
            });
            
            // Close modal when clicking outside
            formViewModal.addEventListener('click', (e) => {
                if (e.target === formViewModal) {
                    formViewModal.classList.add('hidden');
                }
            });
        }

        // Application Management Functions
        function populateApplicationsTable() {
            const tableBody = document.getElementById('applicationsTable');
            tableBody.innerHTML = '';
            
            if (applicantsDatabase.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `<td colspan="6" style="text-align: center; padding: 30px;">No applications found</td>`;
                tableBody.appendChild(row);
                return;
            }
            
            applicantsDatabase.forEach(app => {
                const row = document.createElement('tr');
                
                let statusClass = 'status-pending';
                if (app.status === 'Approved') statusClass = 'status-approved';
                if (app.status === 'Rejected') statusClass = 'status-rejected';
                
                row.innerHTML = `
                    <td>${app.id}</td>
                    <td>${app.lastName}, ${app.firstName} ${app.middleName || ''}</td>
                    <td>${app.purpose}</td>
                    <td>${app.dateSubmitted}</td>
                    <td><span class="status-badge ${statusClass}">${app.status.toUpperCase()}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn view-btn" onclick="viewApplicationDetails(${app.id})">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="action-btn approve-btn" onclick="approveApplication(${app.id})">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="action-btn reject-btn" onclick="rejectApplication(${app.id})">
                                <i class="fas fa-times"></i> Reject
                            </button>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // Update pagination info
            document.getElementById('paginationInfo').textContent = `Showing ${applicantsDatabase.length} applications`;
        }

        function viewApplicationDetails(appId) {
            const applicant = applicantsDatabase.find(app => app.id === appId);
            
            if (!applicant) {
                alert('Application not found!');
                return;
            }
            
            let jobSeekerInfo = '';
            if (applicant.isFirstTimeJobSeeker && applicant.jobSeekerData) {
                jobSeekerInfo = '<h3>Educational Background</h3>';
                for (const [key, data] of Object.entries(applicant.jobSeekerData)) {
                    jobSeekerInfo += `<p><strong>${key}:</strong> ${data.name}${data.course ? ` (${data.course})` : ''}</p>`;
                }
            }
            
            formViewContent.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <img src="${applicant.photo}" alt="Applicant Photo" style="width: 150px; height: 150px; object-fit: cover; border: 3px solid var(--blue-light); border-radius: 8px;">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Last Name</label>
                        <input type="text" value="${applicant.lastName}" readonly>
                    </div>
                    <div class="form-group">
                        <label>First Name</label>
                        <input type="text" value="${applicant.firstName}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Middle Name</label>
                        <input type="text" value="${applicant.middleName || ''}" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Block and Lot</label>
                        <input type="text" value="${applicant.blockLot}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Street</label>
                        <input type="text" value="${applicant.street}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Subdivision</label>
                        <input type="text" value="${applicant.subdivision}" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <label>Provincial Address</label>
                    <textarea rows="3" readonly>${applicant.provincialAddress}</textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Contact Number</label>
                        <input type="text" value="${applicant.contactNumber}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Age</label>
                        <input type="text" value="${applicant.age}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Length of Stay</label>
                        <input type="text" value="${applicant.lengthStay}" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Birthday</label>
                        <input type="text" value="${applicant.birthday}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Place of Birth</label>
                        <input type="text" value="${applicant.birthPlace}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Nationality</label>
                        <input type="text" value="${applicant.nationality}" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Sex</label>
                        <input type="text" value="${applicant.sex}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Civil Status</label>
                        <input type="text" value="${applicant.civilStatus}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Purpose</label>
                        <input type="text" value="${applicant.purpose}" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <label>First Time Job Seeker</label>
                    <input type="text" value="${applicant.isFirstTimeJobSeeker ? 'YES' : 'NO'}" readonly>
                </div>
                ${jobSeekerInfo}
                <div class="form-row">
                    <div class="form-group">
                        <label>Status</label>
                        <input type="text" value="${applicant.status}" readonly style="font-weight: bold; color: ${applicant.status === 'Approved' ? 'green' : applicant.status === 'Rejected' ? 'red' : 'orange'}">
                    </div>
                    <div class="form-group">
                        <label>Date Submitted</label>
                        <input type="text" value="${applicant.dateSubmitted}" readonly>
                    </div>
                </div>
            `;
            
            formViewModal.classList.remove('hidden');
        }

        function approveApplication(appId) {
            if (confirm('Approve this application?')) {
                const applicantIndex = applicantsDatabase.findIndex(app => app.id === appId);
                if (applicantIndex !== -1) {
                    applicantsDatabase[applicantIndex].status = 'Approved';
                    localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
                    populateApplicationsTable();
                    updateDashboardStats();
                    alert('Application approved successfully!');
                }
            }
        }

        function rejectApplication(appId) {
            if (confirm('Reject this application?')) {
                const applicantIndex = applicantsDatabase.findIndex(app => app.id === appId);
                if (applicantIndex !== -1) {
                    applicantsDatabase[applicantIndex].status = 'Rejected';
                    localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
                    populateApplicationsTable();
                    updateDashboardStats();
                    alert('Application rejected successfully!');
                }
            }
        }

        function applyFilters() {
            const typeFilter = document.getElementById('filterType').value;
            const statusFilter = document.getElementById('filterStatus').value;
            const dateFilter = document.getElementById('filterDate').value;
            
            // Filter applications based on criteria
            let filteredApplications = applicantsDatabase;
            
            if (typeFilter !== 'all') {
                filteredApplications = filteredApplications.filter(app => 
                    app.purpose.toLowerCase().includes(typeFilter.toLowerCase())
                );
            }
            
            if (statusFilter !== 'all') {
                filteredApplications = filteredApplications.filter(app => 
                    app.status.toLowerCase() === statusFilter.toLowerCase()
                );
            }
            
            if (dateFilter) {
                filteredApplications = filteredApplications.filter(app => 
                    app.dateSubmitted === dateFilter
                );
            }
            
            // Update table with filtered applications
            const tableBody = document.getElementById('applicationsTable');
            tableBody.innerHTML = '';
            
            filteredApplications.forEach(app => {
                const row = document.createElement('tr');
                
                let statusClass = 'status-pending';
                if (app.status === 'Approved') statusClass = 'status-approved';
                if (app.status === 'Rejected') statusClass = 'status-rejected';
                
                row.innerHTML = `
                    <td>${app.id}</td>
                    <td>${app.lastName}, ${app.firstName} ${app.middleName || ''}</td>
                    <td>${app.purpose}</td>
                    <td>${app.dateSubmitted}</td>
                    <td><span class="status-badge ${statusClass}">${app.status.toUpperCase()}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn view-btn" onclick="viewApplicationDetails(${app.id})">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="action-btn approve-btn" onclick="approveApplication(${app.id})">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="action-btn reject-btn" onclick="rejectApplication(${app.id})">
                                <i class="fas fa-times"></i> Reject
                            </button>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            if (filteredApplications.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `<td colspan="6" style="text-align: center; padding: 30px;">No applications match the selected filters</td>`;
                tableBody.appendChild(row);
            }
            
            document.getElementById('paginationInfo').textContent = `Showing ${filteredApplications.length} applications`;
        }

        function resetFilters() {
            document.getElementById('filterType').value = 'all';
            document.getElementById('filterStatus').value = 'all';
            document.getElementById('filterDate').value = '';
            populateApplicationsTable();
        }

        // Dashboard Functions
        function updateDashboardStats() {
            // Pending applications
            const pendingApps = applicantsDatabase.filter(app => app.status === 'Pending').length;
            document.getElementById('pendingApplications').textContent = pendingApps;
            
            // Processed today
            const today = new Date().toLocaleDateString();
            const processedToday = applicantsDatabase.filter(app => 
                app.dateSubmitted === today && app.status !== 'Pending'
            ).length;
            document.getElementById('processedToday').textContent = processedToday;
            
            // Total residents
            document.getElementById('totalResidents').textContent = residentsDatabase.length;
        }

        function populateRecentActivity() {
            const tableBody = document.getElementById('recentActivity');
            tableBody.innerHTML = '';
            
            sampleActivity.forEach(activity => {
                const row = document.createElement('tr');
                
                let statusBadge = '';
                if (activity.status === 'approved') {
                    statusBadge = '<span class="status-badge status-approved">APPROVED</span>';
                } else if (activity.status === 'rejected') {
                    statusBadge = '<span class="status-badge status-rejected">REJECTED</span>';
                } else {
                    statusBadge = '<span class="status-badge status-pending">INFO</span>';
                }
                
                row.innerHTML = `
                    <td>${activity.time}</td>
                    <td>${activity.activity}</td>
                    <td>${activity.user}</td>
                    <td>${statusBadge}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function populateReportTable() {
            const tableBody = document.getElementById('reportTable');
            tableBody.innerHTML = '';
            
            // Add sample report data
            for (let i = 1; i <= 10; i++) {
                const date = `2023-11-${i.toString().padStart(2, '0')}`;
                const types = ['Certificate of Residency', 'First Time Job Seeker', 'Certificate of Indigency', 'Business Permit'];
                const type = types[Math.floor(Math.random() * types.length)];
                const resident = applicantsDatabase[Math.floor(Math.random() * Math.min(applicantsDatabase.length, 5))] || { lastName: 'Sample', firstName: 'Applicant' };
                const statuses = ['Pending', 'Approved', 'Rejected'];
                const status = statuses[Math.floor(Math.random() * statuses.length)];
                const officers = ['Juan Dela Cruz', 'Maria Santos', 'Pedro Garcia'];
                const officer = officers[Math.floor(Math.random() * officers.length)];
                const time = `${Math.floor(Math.random() * 3) + 1} days`;
                
                let statusClass = 'status-pending';
                if (status === 'Approved') statusClass = 'status-approved';
                if (status === 'Rejected') statusClass = 'status-rejected';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${date}</td>
                    <td>${type}</td>
                    <td>${resident ? resident.lastName + ', ' + resident.firstName : 'Sample Applicant'}</td>
                    <td><span class="status-badge ${statusClass}">${status.toUpperCase()}</span></td>
                    <td>${officer}</td>
                    <td>${time}</td>
                `;
                
                tableBody.appendChild(row);
            }
        }

        // Certificate Generation Functions
        function updateCertificatePreview() {
            const type = document.getElementById('certificateType').value;
            const recipient = document.getElementById('certificateRecipient').value || '[RECIPIENT NAME]';
            const purpose = document.getElementById('certificatePurpose').value || '[PURPOSE]';
            const date = document.getElementById('certificateDate').value || new Date().toISOString().split('T')[0];
            
            // Update preview
            document.getElementById('previewCertificateType').textContent = 
                type === 'residency' ? 'CERTIFICATE OF RESIDENCY' :
                type === 'indigency' ? 'CERTIFICATE OF INDIGENCY' :
                type === 'goodmoral' ? 'CERTIFICATE OF GOOD MORAL CHARACTER' :
                type === 'employment' ? 'CERTIFICATE OF EMPLOYMENT' :
                type === 'nocriminal' ? 'NO CRIMINAL RECORD' :
                type === 'soloparent' ? 'SOLO PARENT CERTIFICATION' :
                'CERTIFICATE';
            
            document.getElementById('previewRecipient').textContent = recipient;
            document.getElementById('previewPurpose').textContent = purpose;
            document.getElementById('previewDate').textContent = formatDate(date);
            
            // Set sample address and length of stay
            document.getElementById('previewAddress').textContent = 'Block 5, Lot 12, Pilar Village';
            document.getElementById('previewLengthStay').textContent = '5 years';
        }

        function showResidentSuggestions() {
            const input = document.getElementById('certificateRecipient').value.toLowerCase();
            const suggestionsDiv = document.getElementById('residentSuggestions');
            
            if (input.length < 2) {
                suggestionsDiv.style.display = 'none';
                return;
            }
            
            const filtered = residentsDatabase.filter(r => 
                (r.lastName + ' ' + r.firstName).toLowerCase().includes(input)
            );
            
            if (filtered.length > 0) {
                suggestionsDiv.innerHTML = filtered.map(r => 
                    `<div style="padding: 5px; border-bottom: 1px solid #eee; cursor: pointer;" 
                          onclick="selectResident('${r.lastName}, ${r.firstName}', '${r.blockLot}, ${r.street}, ${r.subdivision}')">
                        ${r.lastName}, ${r.firstName} - ${r.blockLot}, ${r.street}, ${r.subdivision}
                    </div>`
                ).join('');
                suggestionsDiv.style.display = 'block';
            } else {
                suggestionsDiv.style.display = 'none';
            }
        }

        function selectResident(name, address) {
            document.getElementById('certificateRecipient').value = name;
            document.getElementById('residentSuggestions').style.display = 'none';
            // You could also populate address fields if needed
        }

        function generateReport() {
            const type = document.getElementById('reportType').value;
            const month = document.getElementById('reportMonth').value;
            const year = document.getElementById('reportYear').value;
            
            alert(`Generating ${type} report for ${getMonthName(month)} ${year}...\n\nIn a real system, this would fetch data from the database and update the report table.`);
        }

        // Helper Functions
        function resetApplicationForm() {
            applicationForm.reset();
            hideAdditionalForm();
            resetImageUpload();
            clearAllErrorMessages();
            
            // Initialize length stay validation
            stayUnitSelect.dispatchEvent(new Event('change'));
        }

        function hideAdditionalForm() {
            additionalJobSeekerForm.classList.add('hidden');
            
            // Uncheck all school checkboxes
            document.querySelectorAll('.school-checkbox input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            
            // Hide all school name inputs
            document.querySelectorAll('.school-name-input, .course-input').forEach(input => {
                input.classList.add('hidden');
                input.value = '';
                input.required = false;
            });
        }

        function resetImageUpload() {
            imagePreview.style.display = 'none';
            imagePreview.src = '';
            fileName.textContent = '';
            imageUpload.value = '';
            // Show upload button, hide change button
            uploadTrigger.classList.remove('hidden');
            changePhotoBtn.classList.add('hidden');
        }

        function clearAllErrorMessages() {
            const textInputs = [
                { id: 'lastName', errorId: 'lastNameError' },
                { id: 'firstName', errorId: 'firstNameError' },
                { id: 'middleName', errorId: 'middleNameError' },
                { id: 'blockLot', errorId: 'blockLotError' },
                { id: 'street', errorId: 'streetError' },
                { id: 'provincialAddress', errorId: 'provincialAddressError' },
                { id: 'birthPlace', errorId: 'birthPlaceError' },
                { id: 'elementarySchoolName', errorId: 'elementarySchoolError' },
                { id: 'juniorHighSchoolName', errorId: 'juniorHighSchoolError' },
                { id: 'seniorHighSchoolName', errorId: 'seniorHighSchoolError' },
                { id: 'collegeName', errorId: 'collegeNameError' },
                { id: 'collegeCourse', errorId: 'collegeCourseError' },
                { id: 'vocationalSchoolName', errorId: 'vocationalSchoolError' },
                { id: 'vocationalCourse', errorId: 'vocationalCourseError' }
            ];
            
            textInputs.forEach(field => {
                const inputElement = document.getElementById(field.id);
                const errorElement = document.getElementById(field.errorId);
                
                if (inputElement) {
                    inputElement.classList.remove('invalid-input');
                }
                
                if (errorElement) {
                    errorElement.style.display = 'none';
                }
            });
        }

        function populateNationalityDropdown() {
            // List of all nationalities/countries
            const nationalities = [
                "FILIPINO", "AFGHAN", "ALBANIAN", "ALGERIAN", "AMERICAN", "ANDORRAN", "ANGOLAN", 
                "ANTIGUAN", "ARGENTINE", "ARMENIAN", "AUSTRALIAN", "AUSTRIAN", "AZERBAIJANI", 
                "BAHAMIAN", "BAHRAINI", "BANGLADESHI", "BARBADIAN", "BELARUSIAN", "BELGIAN", 
                "BELIZEAN", "BENINESE", "BHUTANESE", "BOLIVIAN", "BOSNIAN", "BOTSWANAN", 
                "BRAZILIAN", "BRITISH", "BRUNEIAN", "BULGARIAN", "BURKINABE", "BURMESE", 
                "BURUNDIAN", "CAMBODIAN", "CAMEROONIAN", "CANADIAN", "CAPE VERDEAN", 
                "CENTRAL AFRICAN", "CHADIAN", "CHILEAN", "CHINESE", "COLOMBIAN", "COMORAN", 
                "CONGOLESE", "COSTA RICAN", "CROATIAN", "CUBAN", "CYPRIOT", "CZECH", 
                "DANISH", "DJIBOUTIAN", "DOMINICAN", "DUTCH", "EAST TIMORESE", "ECUADOREAN", 
                "EGYPTIAN", "EMIRATI", "EQUATORIAL GUINEAN", "ERITREAN", "ESTONIAN", 
                "ETHIOPIAN", "FIJIAN", "FINNISH", "FRENCH", "GABONESE", "GAMBIAN", 
                "GEORGIAN", "GERMAN", "GHANAIAN", "GREEK", "GRENADIAN", "GUATEMALAN", 
                "GUINEAN", "GUYANESE", "HAITIAN", "HONDURAN", "HUNGARIAN", "ICELANDIC", 
                "INDIAN", "INDONESIAN", "IRANIAN", "IRAQI", "IRISH", "ISRAELI", "ITALIAN", 
                "IVORIAN", "JAMAICAN", "JAPANESE", "JORDANIAN", "KAZAKH", "KENYAN", 
                "KIRIBATI", "KOREAN", "KOSOVAR", "KUWAITI", "KYRGYZ", "LAOTIAN", "LATVIAN", 
                "LEBANESE", "LIBERIAN", "LIBYAN", "LIECHTENSTEINER", "LITHUANIAN", 
                "LUXEMBOURGER", "MACEDONIAN", "MALAGASY", "MALAWIAN", "MALAYSIAN", 
                "MALDIVIAN", "MALIAN", "MALTESE", "MARSHALLESE", "MAURITANIAN", "MAURITIAN", 
                "MEXICAN", "MICRONESIAN", "MOLDOVAN", "MONACAN", "MONGOLIAN", "MONTENEGRIN", 
                "MOROCCAN", "MOSOTHO", "MOZAMBICAN", "NAMIBIAN", "NAURUAN", "NEPALESE", 
                "NEW ZEALANDER", "NICARAGUAN", "NIGERIAN", "NIGERIEN", "NIUEAN", "NORWEGIAN", 
                "OMANI", "PAKISTANI", "PALAUAN", "PALESTINIAN", "PANAMANIAN", "PAPUA NEW GUINEAN", 
                "PARAGUAYAN", "PERUVIAN", "POLISH", "PORTUGUESE", "QATARI", "ROMANIAN", 
                "RUSSIAN", "RWANDAN", "SAINT LUCIAN", "SALVADORAN", "SAMOAN", "SAN MARINESE", 
                "SAO TOMEAN", "SAUDI", "SCOTTISH", "SENEGALESE", "SERBIAN", "SEYCHELLOIS", 
                "SIERRA LEONEAN", "SINGAPOREAN", "SLOVAK", "SLOVENIAN", "SOLOMON ISLANDER", 
                "SOMALI", "SOUTH AFRICAN", "SOUTH KOREAN", "SOUTH SUDANESE", "SPANISH", 
                "SRI LANKAN", "SUDANESE", "SURINAMER", "SWAZI", "SWEDISH", "SWISS", 
                "SYRIAN", "TAIWANESE", "TAJIK", "TANZANIAN", "THAI", "TOGOLESE", "TONGAN", 
                "TRINIDADIAN", "TUNISIAN", "TURKISH", "TURKMEN", "TUVALUAN", "UGANDAN", 
                "UKRAINIAN", "URUGUAYAN", "UZBEK", "VANUATUAN", "VENEZUELAN", "VIETNAMESE", 
                "WELSH", "YEMENI", "ZAMBIAN", "ZIMBABWEAN"
            ];

            // Sort nationalities alphabetically but keep FILIPINO first
            nationalities.sort((a, b) => {
                if (a === "FILIPINO") return -1;
                if (b === "FILIPINO") return 1;
                return a.localeCompare(b);
            });

            // Populate nationality dropdown with ALL CAPS
            nationalities.forEach(nationality => {
                const option = document.createElement('option');
                option.value = nationality;
                option.textContent = nationality;
                nationalitySelect.appendChild(option);
            });

            // Set FILIPINO as selected by default
            setTimeout(() => {
                const filipinoOption = nationalitySelect.querySelector('option[value="FILIPINO"]');
                if (filipinoOption) {
                    filipinoOption.selected = true;
                }
            }, 100);
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('en-US', options);
        }

        function getMonthName(monthNumber) {
            const months = [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ];
            return months[parseInt(monthNumber) - 1] || '';
        }

        // Initialize certificate preview
        updateCertificatePreview();
        
        // Set today's date as default for certificate date
        document.getElementById('certificateDate').value = new Date().toISOString().split('T')[0];
        document.getElementById('residentBirthdate').value = new Date(new Date().setFullYear(new Date().getFullYear() - 30)).toISOString().split('T')[0];
    </script>
</body>

</html>

can you combine these 2 codes. For the first code, you just add it to the 2nd code without changing anything. For the 2nd code, make it so that pressing the "open as applicant" takes you to the "application form", which is the 1st code. And that after submitting a form, it will go to the "applications management" webpage and its status is now pending until approved or rejected. Also make it so that you can actually view the form that was submitted.

1st code: 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Application Form - Barangay Pilar Village Services Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --blue-dark: #003380;
            --blue-medium: #0047AB;
            --blue-light: #0756CE;
            --red: #CE1126;
            --yellow: #FCD116;
            --gray-light: #f5f5f5;
            --gray-medium: #e0e0e0;
            --gray-dark: #333333;
            --green: #28a745;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--gray-light);
            color: var(--gray-dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }

        @media (max-width: 1400px) {
            .container {
                max-width: 1200px;
            }
        }
        
        @media (max-width: 1200px) {
            .container {
                max-width: 1000px;
            }
        }
        
        @media (max-width: 992px) {
            .container {
                max-width: 800px;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                max-width: 95%;
                padding: 15px;
            }
        }

        header {
            background: linear-gradient(to right, var(--blue-dark), var(--blue-medium));
            color: white;
            padding: 20px 0;
            text-align: center;
            border-bottom: 5px solid var(--yellow);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }

        .logo {
            font-size: 2.5rem;
            margin-right: 15px;
            color: var(--yellow);
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .tagline {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .applicant-form, .thank-you-screen {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-top: 30px;
            text-align: center;
        }

        h2 {
            color: var(--blue-dark);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--yellow);
        }

        .capital-notice {
            background-color: #fff8e1;
            border-left: 5px solid var(--yellow);
            padding: 15px;
            margin-bottom: 25px;
            text-align: center;
            font-weight: bold;
            color: #333;
        }

        .capital-notice i {
            color: var(--red);
            margin-right: 10px;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .form-row .form-group {
            flex: 1;
            min-width: 250px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--blue-dark);
        }

        .required::after {
            content: " *";
            color: var(--red);
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--gray-medium);
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s;
            background-color: white;
        }

        /* Add uppercase styling to text inputs */
        input[type="text"], input[type="tel"], textarea {
            text-transform: uppercase;
        }

        input::placeholder, textarea::placeholder {
            color: #888;
            font-style: italic;
        }

        select {
            color: #333;
        }

        select option:first-child {
            color: #888;
            font-style: italic;
        }

        input:focus, select:focus, textarea:focus {
            border-color: var(--blue-light);
            outline: none;
            box-shadow: 0 0 0 3px rgba(7, 86, 206, 0.2);
        }

        /* Style for invalid input (when lowercase is detected) */
        .invalid-input {
            border-color: var(--red) !important;
            background-color: #fff0f0;
        }

        .error-message {
            color: var(--red);
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
        }

        .length-stay-container {
            display: flex;
            gap: 10px;
        }

        .length-stay-container input {
            flex: 3;
        }

        .length-stay-container select {
            flex: 1;
            min-width: 120px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }

        .checkbox-group label {
            margin-bottom: 0;
        }

        .additional-form {
            background-color: #f0f8ff;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid var(--blue-medium);
        }

        .additional-form h3 {
            color: var(--blue-dark);
            margin-bottom: 15px;
            text-align: center;
        }

        .school-checkbox {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #ccc;
        }

        .school-checkbox:last-child {
            border-bottom: none;
        }

        .hidden {
            display: none !important;
        }

        .submit-btn {
            background-color: var(--blue-medium);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
            width: 100%;
            max-width: 300px;
            text-decoration: none;
            display: inline-block;
        }

        .submit-btn:hover {
            background-color: var(--blue-dark);
            transform: scale(1.05);
        }

        .back-btn {
            background-color: var(--gray-medium);
            color: var(--gray-dark);
            margin-right: 15px;
        }

        .back-btn:hover {
            background-color: #b0b0b0;
        }

        .thank-you-screen h2 {
            color: var(--blue-dark);
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .thank-you-screen h3 {
            color: var(--blue-medium);
            font-size: 1.4rem;
            margin-bottom: 30px;
            font-weight: normal;
        }

        .thank-you-icon {
            font-size: 4rem;
            color: var(--blue-light);
            margin: 30px 0;
        }

        /* FIXED: Button container alignment for thank you screen */
        .thank-you-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        /* Image Upload Styles */
        .image-upload-container {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            border: 2px dashed var(--blue-medium);
            border-radius: 10px;
            background-color: #f9f9f9;
        }

        .image-preview {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border: 3px solid var(--blue-light);
            margin: 15px auto;
            display: none;
        }

        .upload-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .upload-btn {
            background-color: var(--blue-medium);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            display: inline-block;
            font-size: 0.9rem;
        }

        .change-btn {
            background-color: var(--green);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            display: inline-block;
            font-size: 0.9rem;
        }

        .upload-btn:hover {
            background-color: var(--blue-dark);
        }

        .change-btn:hover {
            background-color: #218838;
        }

        footer {
            background-color: var(--blue-dark);
            color: white;
            padding: 30px 0;
            margin-top: 40px;
            text-align: center;
        }

        .footer-content {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .footer-section {
            flex: 1;
            min-width: 300px;
            margin: 15px 0;
        }

        .footer-section h3 {
            color: var(--yellow);
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .footer-section p {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .footer-section i {
            margin-right: 10px;
            color: var(--yellow);
            min-width: 20px;
        }

        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            h1 {
                font-size: 1.7rem;
            }
            
            .footer-content {
                flex-direction: column;
                text-align: center;
            }
            
            .thank-you-buttons {
                flex-direction: column;
                align-items: center;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .applicant-form, .thank-you-screen {
                padding: 20px;
            }
            
            .upload-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .upload-btn, .change-btn {
                width: 100%;
                max-width: 200px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo-container">
                <i class="fas fa-landmark logo"></i>
                <div>
                    <h1>Barangay Pilar Village Services Portal</h1>
                    <p class="tagline">Serving The Community With Integrity And Excellence</p>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Applicant Form Screen -->
        <div id="applicantForm" class="applicant-form">
            <h2>Application Form</h2>
            
            <div class="capital-notice">
                <i class="fas fa-exclamation-triangle"></i>
                USE CAPITAL LETTERS WHEN FILLING OUT THIS FORM
            </div>

            <form id="applicationForm">
                <!-- Image Upload Section -->
                <div class="image-upload-container">
                    <h3>Request of Formal Image of Applicant</h3>
                    <p><strong>Required: PNG or JPG format</strong></p>
                    <p><em>Applicant's face must be clearly visible</em></p>
                    
                    <img id="imagePreview" class="image-preview" alt="Applicant Photo Preview">
                    
                    <div>
                        <input type="file" id="imageUpload" accept=".png,.jpg,.jpeg" style="display: none;">
                        <div class="upload-buttons">
                            <!-- Initially show only upload button -->
                            <button type="button" class="upload-btn" id="uploadTrigger">
                                <i class="fas fa-camera"></i> Upload Photo
                            </button>
                            <!-- Change button is hidden initially -->
                            <button type="button" class="change-btn hidden" id="changePhotoBtn">
                                <i class="fas fa-sync-alt"></i> Change Photo
                            </button>
                        </div>
                    </div>
                    <p id="fileName" style="margin-top: 10px; color: var(--blue-dark);"></p>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="lastName" class="required">Last Name</label>
                        <input type="text" id="lastName" placeholder="Enter last name" required>
                        <div class="error-message" id="lastNameError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="firstName" class="required">First Name</label>
                        <input type="text" id="firstName" placeholder="Enter first name" required>
                        <div class="error-message" id="firstNameError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="middleName">Middle Name</label>
                        <input type="text" id="middleName" placeholder="Enter middle name">
                        <div class="error-message" id="middleNameError">Please use CAPITAL LETTERS only</div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="blockLot" class="required">Block and Lot</label>
                        <input type="text" id="blockLot" placeholder="e.g., BLOCK 5, LOT 12" required>
                        <div class="error-message" id="blockLotError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="street" class="required">Street</label>
                        <input type="text" id="street" placeholder="Enter street name" required>
                        <div class="error-message" id="streetError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="subdivision" class="required">Subdivision</label>
                        <select id="subdivision" required>
                            <option value="" disabled selected>Select Subdivision</option>
                            <option value="CYPRESS MANGGAHAN">CYPRESS MANGGAHAN</option>
                            <option value="CAMELLA HOMES CLASSIC">CAMELLA HOMES CLASSIC</option>
                            <option value="CLASSIC HOMES">CLASSIC HOMES</option>
                            <option value="CUEVAS COMPOUND">CUEVAS COMPOUND</option>
                            <option value="DAISY COMPOUND">DAISY COMPOUND</option>
                            <option value="GARDEN COMPOUND">GARDEN COMPOUND</option>
                            <option value="GLORIA COMPOUND">GLORIA COMPOUND</option>
                            <option value="MALIGAYA COMPOUND">MALIGAYA COMPOUND</option>
                            <option value="PAG-ASA COMPOUND">PAG-ASA COMPOUND</option>
                            <option value="SAMPAGUITA COMPOUND">SAMPAGUITA COMPOUND</option>
                            <option value="BF PILAR SOUTHVILLE">BF PILAR SOUTHVILLE</option>
                            <option value="TERESA COMPOUND">TERESA COMPOUND</option>
                            <option value="PILAR VILLAGE">PILAR VILLAGE</option>
                            <option value="TERESA PARK">TERESA PARK</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="provincialAddress" class="required">Provincial Address</label>
                    <textarea id="provincialAddress" rows="3" placeholder="Enter complete provincial address" required></textarea>
                    <div class="error-message" id="provincialAddressError">Please use CAPITAL LETTERS only</div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="contactNumber" class="required">Contact Number</label>
                        <input type="tel" id="contactNumber" placeholder="e.g., 09171234567" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="age" class="required">Age</label>
                        <input type="number" id="age" min="1" max="120" placeholder="Enter age" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="lengthStay" class="required">Length of Stay (Minimum: 6 Months)</label>
                        <div class="length-stay-container">
                            <input type="number" id="lengthStay" min="1" placeholder="Enter number" required>
                            <select id="stayUnit">
                                <option value="months">Months</option>
                                <option value="years">Years</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="birthday" class="required">Birthday</label>
                        <input type="date" id="birthday" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="birthPlace" class="required">Place of Birth</label>
                        <input type="text" id="birthPlace" placeholder="CITY, PROVINCE" required>
                        <div class="error-message" id="birthPlaceError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="nationality" class="required">Nationality</label>
                        <select id="nationality" required>
                            <option value="" disabled selected>Select nationality</option>
                            <!-- Nationalities will be populated by JavaScript -->
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="sex" class="required">Sex</label>
                        <select id="sex" required>
                            <option value="" disabled selected>Select Sex</option>
                            <option value="MALE">MALE</option>
                            <option value="FEMALE">FEMALE</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="civilStatus" class="required">Civil Status</label>
                        <select id="civilStatus" required>
                            <option value="" disabled selected>Select Civil Status</option>
                            <option value="SINGLE">SINGLE</option>
                            <option value="MARRIED">MARRIED</option>
                            <option value="WIDOWED">WIDOWED</option>
                            <option value="LEGALLY SEPARATED">LEGALLY SEPARATED</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="purpose" class="required">Purpose of Application</label>
                    <select id="purpose" required>
                        <option value="" disabled selected>Select Purpose</option>
                        <option value="PROOF OF RESIDENCY">PROOF OF RESIDENCY</option>
                        <option value="PROOF OF INDIGENCY">PROOF OF INDIGENCY</option>
                        <option value="POSTAL ID REQUIREMENT">POSTAL ID REQUIREMENT</option>
                        <option value="PWD ID REQUIREMENT">PWD ID REQUIREMENT</option>
                        <option value="SENIOR CITIZEN ID REQUIREMENT">SENIOR CITIZEN ID REQUIREMENT</option>
                        <option value="MEDICAL ASSISTANCE/FINANCIAL">MEDICAL ASSISTANCE/FINANCIAL</option>
                        <option value="EDUCATIONAL ASSISTANCE">EDUCATIONAL ASSISTANCE</option>
                        <option value="GREENCARD APPLICATION/RENEWAL">GREENCARD APPLICATION/RENEWAL</option>
                        <option value="LOCAL EMPLOYMENT">LOCAL EMPLOYMENT</option>
                        <option value="SCHOOL REQUIREMENT">SCHOOL REQUIREMENT</option>
                        <option value="BANK REQUIREMENT">BANK REQUIREMENT</option>
                        <option value="LOAN APPLICATION">LOAN APPLICATION</option>
                        <option value="SOLO PARENT ID REQUIREMENT">SOLO PARENT ID REQUIREMENT</option>
                        <option value="PHILHEALTH APPLICATION">PHILHEALTH APPLICATION</option>
                        <option value="TIN ID APPLICATION">TIN ID APPLICATION</option>
                        <option value="GSIS REQUIREMENT">GSIS REQUIREMENT</option>
                        <option value="SSS REQUIREMENT">SSS REQUIREMENT</option>
                        <option value="MARRIAGE LICENSE APPLICATION">MARRIAGE LICENSE APPLICATION</option>
                        <option value="LATE REGISTRATION OF BIRTH">LATE REGISTRATION OF BIRTH</option>
                        <option value="DRIVER LICENSE APPLICATION">DRIVER LICENSE APPLICATION</option>
                        <option value="BUSINESS PERMIT APPLICATION">BUSINESS PERMIT APPLICATION</option>
                        <option value="FIRST TIME JOB SEEKER">FIRST TIME JOB SEEKER</option>
                        <option value="LIBRENG LIBING">LIBRENG LIBING</option>
                        <option value="CUTTING TREES">CUTTING TREES</option>
                        <option value="SOCIAL PENSION">SOCIAL PENSION</option>
                        <option value="ONENESS">ONENESS</option>
                        <option value="UNEMPLOYMENT">UNEMPLOYMENT</option>
                        <option value="NO DEROGATORY">NO DEROGATORY</option>
                        <option value="CERTIFICATE OF RESIDENCY">CERTIFICATE OF RESIDENCY</option>
                        <option value="GOOD MORAL">GOOD MORAL</option>
                        <option value="FIRE VICTIM">FIRE VICTIM</option>
                        <option value="CHANGE ADDRESS">CHANGE ADDRESS</option>
                        <option value="MAYNILAD/MERALCO">MAYNILAD/MERALCO</option>
                        <option value="COHABITATION">COHABITATION</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="firstTimeJobSeeker">
                        <label for="firstTimeJobSeeker">FIRST TIME JOB-SEEKER?</label>
                    </div>
                </div>
                
                <!-- Additional Form for First Time Job Seekers -->
                <div id="additionalJobSeekerForm" class="additional-form hidden">
                    <h3>ADDITIONAL INFO FOR FIRST TIME JOB-SEEKERS</h3>
                    <p>Please provide the name of the School or institution for each selected section:</p>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="elementarySchool">
                            <label for="elementarySchool">Elementary School</label>
                        </div>
                        <input type="text" id="elementarySchoolName" class="school-name-input hidden" placeholder="ENTER ELEMENTARY SCHOOL NAME">
                        <div class="error-message" id="elementarySchoolError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="juniorHighSchool">
                            <label for="juniorHighSchool">Junior High School</label>
                        </div>
                        <input type="text" id="juniorHighSchoolName" class="school-name-input hidden" placeholder="ENTER JUNIOR HIGH SCHOOL NAME">
                        <div class="error-message" id="juniorHighSchoolError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="seniorHighSchool">
                            <label for="seniorHighSchool">Senior High School</label>
                        </div>
                        <input type="text" id="seniorHighSchoolName" class="school-name-input hidden" placeholder="ENTER SENIOR HIGH SCHOOL NAME">
                        <div class="error-message" id="seniorHighSchoolError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="college">
                            <label for="college">College</label>
                        </div>
                        <input type="text" id="collegeName" class="school-name-input hidden" placeholder="ENTER COLLEGE NAME">
                        <div class="error-message" id="collegeNameError">Please use CAPITAL LETTERS only</div>
                        <input type="text" id="collegeCourse" class="course-input hidden" placeholder="ENTER COLLEGE COURSE" style="margin-top: 10px;">
                        <div class="error-message" id="collegeCourseError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="vocationalSchool">
                            <label for="vocationalSchool">Vocational School</label>
                        </div>
                        <input type="text" id="vocationalSchoolName" class="school-name-input hidden" placeholder="ENTER VOCATIONAL SCHOOL NAME">
                        <div class="error-message" id="vocationalSchoolError">Please use CAPITAL LETTERS only</div>
                        <input type="text" id="vocationalCourse" class="course-input hidden" placeholder="ENTER VOCATIONAL COURSE" style="margin-top: 10px;">
                        <div class="error-message" id="vocationalCourseError">Please use CAPITAL LETTERS only</div>
                    </div>
                </div>
                
                <div style="margin-top: 30px; text-align: center;">
                    <a href="index.html" class="submit-btn back-btn">Back</a>
                    <button type="submit" class="submit-btn">Submit Application</button>
                </div>
            </form>
        </div>

        <!-- Thank You Screen - FIXED -->
        <div id="thankYouScreen" class="thank-you-screen hidden">
            <i class="fas fa-check-circle thank-you-icon"></i>
            <h2>THANK YOU FOR FILLING YOUR APPLICATION!</h2>
            <h3>We will contact you once your application status is completed.</h3>
            <p>Your application has been submitted successfully. A barangay representative will contact you within 3-5 working days.</p>
            <p>For inquiries, please contact Barangay Pilar Village Office at (02) 1234-5678.</p>
            
            <div class="thank-you-buttons">
                <button class="submit-btn" id="newApplicationBtn">
                    Submit Another Application
                </button>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3><i class="fas fa-map-marker-alt"></i> Visit Us!</h3>
                <p>C2C5+FCQ, Aguirre Corner Sapphire, Pilar, Las Pi√±as, 1740 Metro Manila</p>
            </div>
            <div class="footer-section">
                <h3><i class="fas fa-phone-alt"></i> Contact Us!</h3>
                <p>0927 342 5375</p>
                <p>Office Hours: Mon-Fri 8:00 AM - 5:00 PM</p>
            </div>
            <div class="footer-section">
                <h3><i class="fas fa-info-circle"></i> About</h3>
                <p>Barangay Pilar Village Services Portal</p>
                <p>Official online service platform</p>
            </div>
        </div>
    </footer>

    <script>
        // DOM Elements
        const applicantForm = document.getElementById('applicantForm');
        const thankYouScreen = document.getElementById('thankYouScreen');
        const newApplicationBtn = document.getElementById('newApplicationBtn');
        const applicationForm = document.getElementById('applicationForm');
        const firstTimeJobSeekerCheckbox = document.getElementById('firstTimeJobSeeker');
        const additionalJobSeekerForm = document.getElementById('additionalJobSeekerForm');
        const lengthStayInput = document.getElementById('lengthStay');
        const stayUnitSelect = document.getElementById('stayUnit');
        const nationalitySelect = document.getElementById('nationality');
        
        // Image upload elements
        const imageUpload = document.getElementById('imageUpload');
        const uploadTrigger = document.getElementById('uploadTrigger');
        const changePhotoBtn = document.getElementById('changePhotoBtn');
        const imagePreview = document.getElementById('imagePreview');
        const fileName = document.getElementById('fileName');
        
        // Variables
        let applicantsDatabase = JSON.parse(localStorage.getItem('applicantsDatabase')) || [];
        
        // Event Listeners
        // "Submit Another Application" button - FIXED
        newApplicationBtn.addEventListener('click', function() {
            // Hide thank you screen
            thankYouScreen.classList.add('hidden');
            // Show application form
            applicantForm.classList.remove('hidden');
            // Reset the form
            applicationForm.reset();
            hideAdditionalForm();
            resetImageUpload();
            // Clear any error messages
            clearAllErrorMessages();
        });
        
        // Image upload handling
        uploadTrigger.addEventListener('click', () => {
            imageUpload.click();
        });
        
        changePhotoBtn.addEventListener('click', () => {
            imageUpload.click();
        });
        
        imageUpload.addEventListener('change', function() {
            if (this.files && this.files[0]) {
                const file = this.files[0];
                
                // Check file type
                if (!file.type.match('image/png') && !file.type.match('image/jpeg')) {
                    alert('Please upload a PNG or JPG image file.');
                    this.value = '';
                    return;
                }
                
                // Check file size (max 5MB)
                if (file.size > 5 * 1024 * 1024) {
                    alert('File size should be less than 5MB.');
                    this.value = '';
                    return;
                }
                
                // Display file name
                fileName.textContent = `Selected file: ${file.name}`;
                
                // Preview image
                const reader = new FileReader();
                reader.onload = function(e) {
                    imagePreview.src = e.target.result;
                    imagePreview.style.display = 'block';
                    
                    // Hide upload button and show change button
                    uploadTrigger.classList.add('hidden');
                    changePhotoBtn.classList.remove('hidden');
                }
                reader.readAsDataURL(file);
            }
        });
        
        // First Time Job Seeker Checkbox
        firstTimeJobSeekerCheckbox.addEventListener('change', function() {
            if (this.checked) {
                additionalJobSeekerForm.classList.remove('hidden');
            } else {
                hideAdditionalForm();
            }
        });
        
        // School checkbox handlers
        document.querySelectorAll('.school-checkbox input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const schoolNameInput = document.getElementById(this.id + 'Name');
                const courseInput = document.getElementById(this.id.replace('School', 'Course'));
                
                if (this.checked) {
                    schoolNameInput.classList.remove('hidden');
                    schoolNameInput.required = true;
                    
                    // Show course input for college or vocational school
                    if (courseInput) {
                        courseInput.classList.remove('hidden');
                        courseInput.required = true;
                    }
                } else {
                    schoolNameInput.classList.add('hidden');
                    schoolNameInput.required = false;
                    schoolNameInput.value = '';
                    
                    if (courseInput) {
                        courseInput.classList.add('hidden');
                        courseInput.required = false;
                        courseInput.value = '';
                    }
                }
            });
        });
        
        // Length of Stay validation
        stayUnitSelect.addEventListener('change', function() {
            if (this.value === 'months') {
                lengthStayInput.min = 6;
                if (lengthStayInput.value && parseInt(lengthStayInput.value) < 6) {
                    lengthStayInput.value = 6;
                }
            } else {
                lengthStayInput.min = 1;
            }
        });
        
        // CAPITAL LETTERS ENFORCEMENT
        // Function to check if text contains lowercase letters
        function hasLowercase(text) {
            return /[a-z]/.test(text);
        }
        
        // Function to validate capital letters for a field
        function validateCapitalLetters(inputElement, errorElementId) {
            const value = inputElement.value;
            const errorElement = document.getElementById(errorElementId);
            
            if (value && hasLowercase(value)) {
                inputElement.classList.add('invalid-input');
                errorElement.style.display = 'block';
                return false;
            } else {
                inputElement.classList.remove('invalid-input');
                errorElement.style.display = 'none';
                return true;
            }
        }
        
        // Real-time validation for all text fields
        const textInputs = [
            { id: 'lastName', errorId: 'lastNameError' },
            { id: 'firstName', errorId: 'firstNameError' },
            { id: 'middleName', errorId: 'middleNameError' },
            { id: 'blockLot', errorId: 'blockLotError' },
            { id: 'street', errorId: 'streetError' },
            { id: 'provincialAddress', errorId: 'provincialAddressError' },
            { id: 'birthPlace', errorId: 'birthPlaceError' },
            { id: 'elementarySchoolName', errorId: 'elementarySchoolError' },
            { id: 'juniorHighSchoolName', errorId: 'juniorHighSchoolError' },
            { id: 'seniorHighSchoolName', errorId: 'seniorHighSchoolError' },
            { id: 'collegeName', errorId: 'collegeNameError' },
            { id: 'collegeCourse', errorId: 'collegeCourseError' },
            { id: 'vocationalSchoolName', errorId: 'vocationalSchoolError' },
            { id: 'vocationalCourse', errorId: 'vocationalCourseError' }
        ];
        
        // Add event listeners for real-time validation
        textInputs.forEach(field => {
            const inputElement = document.getElementById(field.id);
            if (inputElement) {
                inputElement.addEventListener('input', function() {
                    // Convert input to uppercase as user types
                    this.value = this.value.toUpperCase();
                    
                    // Validate capital letters
                    validateCapitalLetters(this, field.errorId);
                });
                
                inputElement.addEventListener('blur', function() {
                    validateCapitalLetters(this, field.errorId);
                });
            }
        });
        
        // For textarea elements (provincial address)
        const provincialAddress = document.getElementById('provincialAddress');
        provincialAddress.addEventListener('input', function() {
            this.value = this.value.toUpperCase();
            validateCapitalLetters(this, 'provincialAddressError');
        });
        
        provincialAddress.addEventListener('blur', function() {
            validateCapitalLetters(this, 'provincialAddressError');
        });
        
        // Function to clear all error messages
        function clearAllErrorMessages() {
            textInputs.forEach(field => {
                const inputElement = document.getElementById(field.id);
                const errorElement = document.getElementById(field.errorId);
                
                if (inputElement) {
                    inputElement.classList.remove('invalid-input');
                }
                
                if (errorElement) {
                    errorElement.style.display = 'none';
                }
            });
        }
        
        // Form Submission with capital letters validation
        applicationForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validate image upload
            if (!imagePreview.src || imagePreview.style.display === 'none') {
                alert('Please upload a formal image of the applicant.');
                uploadTrigger.focus();
                return;
            }
            
            // Validate length of stay (minimum 6 months if months is selected)
            const lengthStay = lengthStayInput.value;
            const stayUnit = stayUnitSelect.value;
            
            if (stayUnit === 'months' && lengthStay < 6) {
                alert("Minimum length of stay should be 6 months when selecting 'Months' as the unit.");
                lengthStayInput.focus();
                return;
            }
            
            // Validate capital letters for all text fields
            let allFieldsValid = true;
            textInputs.forEach(field => {
                const inputElement = document.getElementById(field.id);
                if (inputElement && inputElement.value.trim() !== '') {
                    if (!validateCapitalLetters(inputElement, field.errorId)) {
                        allFieldsValid = false;
                        inputElement.focus();
                    }
                }
            });
            
            if (!allFieldsValid) {
                alert("Please use CAPITAL LETTERS for all text fields.");
                return;
            }
            
            // Validate first time job seeker additional info
            let jobSeekerData = null;
            if (firstTimeJobSeekerCheckbox.checked) {
                const selectedSchools = document.querySelectorAll('.school-checkbox input[type="checkbox"]:checked');
                if (selectedSchools.length === 0) {
                    alert("Please select at least one educational background for first time job seekers.");
                    return;
                }
                
                // Check that school names are provided for selected schools
                let allValid = true;
                jobSeekerData = {};
                
                selectedSchools.forEach(schoolCheckbox => {
                    const schoolNameInput = document.getElementById(schoolCheckbox.id + 'Name');
                    if (!schoolNameInput.value.trim()) {
                        allValid = false;
                        schoolNameInput.focus();
                    } else {
                        const schoolType = schoolCheckbox.id.replace('School', '');
                        jobSeekerData[schoolType] = {
                            name: schoolNameInput.value.trim()
                        };
                        
                        // Add course if applicable
                        const courseInput = document.getElementById(schoolCheckbox.id.replace('School', 'Course'));
                        if (courseInput && courseInput.value.trim()) {
                            jobSeekerData[schoolType].course = courseInput.value.trim();
                        }
                    }
                });
                
                if (!allValid) {
                    alert("Please provide the name of the school/institution for each selected educational background.");
                    return;
                }
            }
            
            // Create applicant object with image data
            const applicant = {
                id: Date.now(), // Simple ID generation
                photo: imagePreview.src,
                lastName: document.getElementById('lastName').value.toUpperCase(),
                firstName: document.getElementById('firstName').value.toUpperCase(),
                middleName: document.getElementById('middleName').value.toUpperCase(),
                blockLot: document.getElementById('blockLot').value.toUpperCase(),
                street: document.getElementById('street').value.toUpperCase(),
                subdivision: document.getElementById('subdivision').value,
                provincialAddress: document.getElementById('provincialAddress').value.toUpperCase(),
                contactNumber: document.getElementById('contactNumber').value,
                age: document.getElementById('age').value,
                lengthStay: lengthStay + ' ' + stayUnit,
                birthday: formatDate(document.getElementById('birthday').value),
                birthPlace: document.getElementById('birthPlace').value.toUpperCase(),
                nationality: document.getElementById('nationality').value,
                sex: document.getElementById('sex').value,
                civilStatus: document.getElementById('civilStatus').value,
                purpose: document.getElementById('purpose').value,
                isFirstTimeJobSeeker: firstTimeJobSeekerCheckbox.checked,
                jobSeekerData: jobSeekerData,
                status: 'Pending',
                dateSubmitted: new Date().toLocaleDateString()
            };
            
            // Add to database
            applicantsDatabase.push(applicant);
            localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
            
            // Show thank you screen
            applicantForm.classList.add('hidden');
            thankYouScreen.classList.remove('hidden');
        });
        
        // Helper Functions
        function hideAdditionalForm() {
            additionalJobSeekerForm.classList.add('hidden');
            
            // Uncheck all school checkboxes
            document.querySelectorAll('.school-checkbox input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            
            // Hide all school name inputs
            document.querySelectorAll('.school-name-input, .course-input').forEach(input => {
                input.classList.add('hidden');
                input.value = '';
                input.required = false;
            });
        }
        
        function resetImageUpload() {
            imagePreview.style.display = 'none';
            imagePreview.src = '';
            fileName.textContent = '';
            imageUpload.value = '';
            // Show upload button, hide change button
            uploadTrigger.classList.remove('hidden');
            changePhotoBtn.classList.add('hidden');
        }
        
// Replace the nationality dropdown population code with this:
// List of all nationalities/countries
const nationalities = [
    "FILIPINO", "AFGHAN", "ALBANIAN", "ALGERIAN", "AMERICAN", "ANDORRAN", "ANGOLAN", 
    "ANTIGUAN", "ARGENTINE", "ARMENIAN", "AUSTRALIAN", "AUSTRIAN", "AZERBAIJANI", 
    "BAHAMIAN", "BAHRAINI", "BANGLADESHI", "BARBADIAN", "BELARUSIAN", "BELGIAN", 
    "BELIZEAN", "BENINESE", "BHUTANESE", "BOLIVIAN", "BOSNIAN", "BOTSWANAN", 
    "BRAZILIAN", "BRITISH", "BRUNEIAN", "BULGARIAN", "BURKINABE", "BURMESE", 
    "BURUNDIAN", "CAMBODIAN", "CAMEROONIAN", "CANADIAN", "CAPE VERDEAN", 
    "CENTRAL AFRICAN", "CHADIAN", "CHILEAN", "CHINESE", "COLOMBIAN", "COMORAN", 
    "CONGOLESE", "COSTA RICAN", "CROATIAN", "CUBAN", "CYPRIOT", "CZECH", 
    "DANISH", "DJIBOUTIAN", "DOMINICAN", "DUTCH", "EAST TIMORESE", "ECUADOREAN", 
    "EGYPTIAN", "EMIRATI", "EQUATORIAL GUINEAN", "ERITREAN", "ESTONIAN", 
    "ETHIOPIAN", "FIJIAN", "FINNISH", "FRENCH", "GABONESE", "GAMBIAN", 
    "GEORGIAN", "GERMAN", "GHANAIAN", "GREEK", "GRENADIAN", "GUATEMALAN", 
    "GUINEAN", "GUYANESE", "HAITIAN", "HONDURAN", "HUNGARIAN", "ICELANDIC", 
    "INDIAN", "INDONESIAN", "IRANIAN", "IRAQI", "IRISH", "ISRAELI", "ITALIAN", 
    "IVORIAN", "JAMAICAN", "JAPANESE", "JORDANIAN", "KAZAKH", "KENYAN", 
    "KIRIBATI", "KOREAN", "KOSOVAR", "KUWAITI", "KYRGYZ", "LAOTIAN", "LATVIAN", 
    "LEBANESE", "LIBERIAN", "LIBYAN", "LIECHTENSTEINER", "LITHUANIAN", 
    "LUXEMBOURGER", "MACEDONIAN", "MALAGASY", "MALAWIAN", "MALAYSIAN", 
    "MALDIVIAN", "MALIAN", "MALTESE", "MARSHALLESE", "MAURITANIAN", "MAURITIAN", 
    "MEXICAN", "MICRONESIAN", "MOLDOVAN", "MONACAN", "MONGOLIAN", "MONTENEGRIN", 
    "MOROCCAN", "MOSOTHO", "MOZAMBICAN", "NAMIBIAN", "NAURUAN", "NEPALESE", 
    "NEW ZEALANDER", "NICARAGUAN", "NIGERIAN", "NIGERIEN", "NIUEAN", "NORWEGIAN", 
    "OMANI", "PAKISTANI", "PALAUAN", "PALESTINIAN", "PANAMANIAN", "PAPUA NEW GUINEAN", 
    "PARAGUAYAN", "PERUVIAN", "POLISH", "PORTUGUESE", "QATARI", "ROMANIAN", 
    "RUSSIAN", "RWANDAN", "SAINT LUCIAN", "SALVADORAN", "SAMOAN", "SAN MARINESE", 
    "SAO TOMEAN", "SAUDI", "SCOTTISH", "SENEGALESE", "SERBIAN", "SEYCHELLOIS", 
    "SIERRA LEONEAN", "SINGAPOREAN", "SLOVAK", "SLOVENIAN", "SOLOMON ISLANDER", 
    "SOMALI", "SOUTH AFRICAN", "SOUTH KOREAN", "SOUTH SUDANESE", "SPANISH", 
    "SRI LANKAN", "SUDANESE", "SURINAMER", "SWAZI", "SWEDISH", "SWISS", 
    "SYRIAN", "TAIWANESE", "TAJIK", "TANZANIAN", "THAI", "TOGOLESE", "TONGAN", 
    "TRINIDADIAN", "TUNISIAN", "TURKISH", "TURKMEN", "TUVALUAN", "UGANDAN", 
    "UKRAINIAN", "URUGUAYAN", "UZBEK", "VANUATUAN", "VENEZUELAN", "VIETNAMESE", 
    "WELSH", "YEMENI", "ZAMBIAN", "ZIMBABWEAN"
];

// Sort nationalities alphabetically but keep FILIPINO first
nationalities.sort((a, b) => {
    if (a === "FILIPINO") return -1;
    if (b === "FILIPINO") return 1;
    return a.localeCompare(b);
});

// Populate nationality dropdown with ALL CAPS
nationalities.forEach(nationality => {
    const option = document.createElement('option');
    option.value = nationality;
    option.textContent = nationality; // Already in all caps
    nationalitySelect.appendChild(option);
});

// Set FILIPINO as selected by default
setTimeout(() => {
    const filipinoOption = nationalitySelect.querySelector('option[value="FILIPINO"]');
    if (filipinoOption) {
        filipinoOption.selected = true;
    }
}, 100);
        
        // Initialize length stay validation
        stayUnitSelect.dispatchEvent(new Event('change'));
        
        // Helper Functions
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }
        
        // Initialize with some sample data if empty
        if (applicantsDatabase.length === 0) {
            // Add a sample applicant for demonstration
            const sampleApplicant = {
                id: 1,
                photo: 'https://via.placeholder.com/120x120/0756CE/FFFFFF?text=Sample+Photo',
                lastName: 'SANTOS',
                firstName: 'JUAN',
                middleName: 'DELA CRUZ',
                blockLot: 'BLOCK 5, LOT 12',
                street: 'SAPPHIRE STREET',
                subdivision: 'PILAR VILLAGE',
                provincialAddress: 'BRGY. SAN ISIDRO, ABUCAY, BATAAN',
                contactNumber: '09171234567',
                age: '25',
                lengthStay: '2 years',
                birthday: 'January 15, 1999',
                birthPlace: 'MANILA, METRO MANILA',
                nationality: 'Filipino',
                sex: 'Male',
                civilStatus: 'Single',
                purpose: 'PROOF OF RESIDENCY',
                isFirstTimeJobSeeker: true,
                jobSeekerData: {
                    elementary: { name: 'Pilar Elementary School' },
                    juniorHigh: { name: 'Pilar National High School' },
                    seniorHigh: { name: 'Pilar Senior High School' },
                    college: { name: 'University of the Philippines', course: 'Business Administration' }
                },
                status: 'Pending',
                dateSubmitted: '10/15/2023'
            };
            
            applicantsDatabase.push(sampleApplicant);
            localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
        }
    </script>
</body>
</html>

2nd code:
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barangay Pilar Village Services Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --blue-dark: #003380;
            --blue-medium: #0047AB;
            --blue-light: #0756CE;
            --red: #CE1126;
            --yellow: #FCD116;
            --green: #28a745;
            --orange: #fd7e14;
            --purple: #6f42c1;
            --gray-light: #f5f5f5;
            --gray-medium: #e0e0e0;
            --gray-dark: #333333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--gray-light);
            color: var(--gray-dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(to right, var(--blue-dark), var(--blue-medium));
            color: white;
            padding: 20px 0;
            text-align: center;
            border-bottom: 5px solid var(--yellow);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }

        .logo {
            font-size: 2.5rem;
            margin-right: 15px;
            color: var(--yellow);
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .tagline {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .screen {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-top: 30px;
        }

        h2 {
            color: var(--blue-dark);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--yellow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h3 {
            color: var(--blue-medium);
            margin: 20px 0 15px 0;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-btn i {
            font-size: 1.2rem;
        }

        .primary-btn {
            background-color: var(--blue-medium);
            color: white;
        }

        .primary-btn:hover {
            background-color: var(--blue-dark);
            transform: translateY(-2px);
        }

        .secondary-btn {
            background-color: var(--gray-medium);
            color: var(--gray-dark);
        }

        .secondary-btn:hover {
            background-color: #d0d0d0;
        }

        .danger-btn {
            background-color: var(--red);
            color: white;
        }

        .danger-btn:hover {
            background-color: #b31022;
        }

        .success-btn {
            background-color: var(--green);
            color: white;
        }

        .success-btn:hover {
            background-color: #218838;
        }

        .hidden {
            display: none;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .form-row .form-group {
            flex: 1;
            min-width: 250px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--blue-dark);
        }

        .required::after {
            content: " *";
            color: var(--red);
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--gray-medium);
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            border-color: var(--blue-light);
            outline: none;
            box-shadow: 0 0 0 3px rgba(7, 86, 206, 0.2);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }

        .checkbox-group label {
            margin-bottom: 0;
        }

        /* Table Styles */
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th {
            background-color: var(--blue-dark);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--gray-medium);
        }

        tr:hover {
            background-color: rgba(7, 86, 206, 0.05);
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
        }

        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-approved {
            background-color: #d4edda;
            color: #155724;
        }

        .status-rejected {
            background-color: #f8d7da;
            color: #721c24;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .view-btn {
            background-color: var(--blue-light);
            color: white;
        }

        .approve-btn {
            background-color: var(--green);
            color: white;
        }

        .reject-btn {
            background-color: var(--red);
            color: white;
        }

        /* Dashboard Stats */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-top: 4px solid var(--blue-medium);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2.5rem;
            color: var(--blue-medium);
            margin-bottom: 15px;
        }

        .stat-card h3 {
            font-size: 2.2rem;
            color: var(--blue-dark);
            margin: 10px 0;
        }

        .stat-card p {
            color: var(--gray-dark);
            font-size: 0.95rem;
        }

        /* Charts */
        .chart-container {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }

        .chart-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        /* Certificate Preview */
        .certificate-preview {
            background-color: white;
            border: 2px solid var(--gray-medium);
            border-radius: 8px;
            padding: 40px;
            margin-top: 20px;
            min-height: 400px;
            position: relative;
            background-image: url('data:image/svg+xml;utf8,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><path d="M0,0 L100,0 L100,100 L0,100 Z" fill="none" stroke="%23FCD116" stroke-width="2" stroke-dasharray="5,5"/></svg>');
            background-size: 100px 100px;
        }

        .certificate-header {
            text-align: center;
            border-bottom: 3px double var(--blue-dark);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .certificate-header h2 {
            color: var(--blue-dark);
            font-size: 2.2rem;
            border: none;
            margin: 0;
            padding: 0;
        }

        .certificate-body {
            padding: 30px;
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .certificate-footer {
            position: absolute;
            bottom: 40px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
            padding-top: 30px;
            border-top: 1px solid var(--gray-medium);
        }

        .signature-box {
            text-align: center;
        }

        .signature-line {
            width: 200px;
            border-top: 1px solid var(--gray-dark);
            margin: 40px auto 10px;
        }

        /* Filter Controls */
        .filter-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            background-color: var(--gray-light);
            padding: 20px;
            border-radius: 8px;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .filter-btn {
            align-self: flex-end;
            padding: 10px 20px;
        }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: var(--blue-dark);
            border-top: 1px solid var(--gray-medium);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .screen {
                padding: 20px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .nav-buttons {
                flex-direction: column;
            }
            
            .nav-btn {
                width: 100%;
                justify-content: center;
            }
            
            .chart-row {
                grid-template-columns: 1fr;
            }
            
            .certificate-footer {
                flex-direction: column;
                gap: 30px;
                position: static;
                margin-top: 40px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo-container">
                <i class="fas fa-landmark logo"></i>
                <div>
                    <h1>Barangay Pilar Village Services Portal</h1>
                    <p class="tagline">Serving the community with integrity and excellence</p>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Access Selection Screen -->
        <div id="accessScreen" class="screen">
            <h2>Welcome to the Barangay Pilar Village Services Portal</h2>
            <p>Please select your access type:</p>
            
            <div class="nav-buttons">
                <button class="nav-btn primary-btn" id="applicantBtn">
                    <i class="fas fa-user-edit"></i>
                    Open as Applicant
                </button>
                
                <button class="nav-btn primary-btn" id="memberBtn">
                    <i class="fas fa-user-lock"></i>
                    Open as Barangay Member
                </button>
            </div>
        </div>

        <!-- Login Screen for Barangay Members -->
        <div id="loginScreen" class="screen hidden">
            <h2>Barangay Member Login</h2>
            <p>Enter your credentials to access the barangay management system</p>
            
            <div id="loginError" class="error-message" style="background-color: #f8d7da; color: #721c24; padding: 12px; border-radius: 6px; margin-bottom: 20px; display: none;">
                <i class="fas fa-exclamation-circle"></i> Invalid username or password. Please try again.
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="username" class="required">Username</label>
                    <input type="text" id="username" placeholder="Enter your username" required>
                </div>
                
                <div class="form-group">
                    <label for="password" class="required">Password</label>
                    <input type="password" id="password" placeholder="Enter your password" required>
                </div>
                
                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="rememberMe">
                        <label for="rememberMe">Remember me</label>
                    </div>
                </div>
                
                <div class="nav-buttons">
                    <button type="button" class="nav-btn secondary-btn" id="backToAccessFromLogin">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <button type="submit" class="nav-btn primary-btn">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </div>
                
                <div style="margin-top: 20px; text-align: center; font-size: 0.9rem; color: var(--gray-dark);">
                    <p>Demo Credentials:</p>
                    <p><strong>Username:</strong> admin | <strong>Password:</strong> barangay2023</p>
                    <p><strong>Username:</strong> staff | <strong>Password:</strong> pilarvillage</p>
                </div>
            </form>
        </div>

        <!-- Member Dashboard -->
        <div id="memberDashboard" class="screen hidden">
            <h2>
                Barangay Management Dashboard
                <button class="nav-btn danger-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </h2>
            
            <p>Welcome back, <strong id="loggedInUser">Administrator</strong>! Here's an overview of barangay activities.</p>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <i class="fas fa-file-alt"></i>
                    <h3 id="pendingApplications">24</h3>
                    <p>Pending Applications</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-check-circle"></i>
                    <h3 id="processedToday">18</h3>
                    <p>Processed Today</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <h3 id="totalResidents">1,245</h3>
                    <p>Total Residents</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-calendar-check"></i>
                    <h3 id="upcomingEvents">3</h3>
                    <p>Upcoming Events</p>
                </div>
            </div>
            
            <h3>Quick Actions</h3>
            <div class="nav-buttons">
                <button class="nav-btn primary-btn" id="applicationsManagementBtn">
                    <i class="fas fa-list-check"></i> Applications Management
                </button>
                
                <button class="nav-btn primary-btn" id="residentRegistrationBtn">
                    <i class="fas fa-user-plus"></i> Register New Resident
                </button>
                
                <button class="nav-btn primary-btn" id="certificateGenerationBtn">
                    <i class="fas fa-print"></i> Generate Certificates
                </button>
                
                <button class="nav-btn primary-btn" id="reportsDashboardBtn">
                    <i class="fas fa-chart-bar"></i> View Reports
                </button>
            </div>
            
            <h3 style="margin-top: 30px;">Recent Activity</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Activity</th>
                            <th>User</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="recentActivity">
                        <!-- Activity rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Applications Management Interface -->
        <div id="applicationsManagementScreen" class="screen hidden">
            <h2>
                Applications Management
                <button class="nav-btn secondary-btn" id="backToDashboardFromApps">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="filter-controls">
                <div class="filter-group">
                    <label>Application Type</label>
                    <select id="filterType">
                        <option value="all">All Types</option>
                        <option value="residency">Certificate of Residency</option>
                        <option value="indigency">Certificate of Indigency</option>
                        <option value="jobseeker">First Time Job Seeker</option>
                        <option value="business">Business Permit</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Status</label>
                    <select id="filterStatus">
                        <option value="all">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="approved">Approved</option>
                        <option value="rejected">Rejected</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Date Range</label>
                    <input type="date" id="filterDate">
                </div>
                
                <button class="nav-btn primary-btn filter-btn" id="applyFilters">
                    <i class="fas fa-filter"></i> Apply Filters
                </button>
                
                <button class="nav-btn secondary-btn filter-btn" id="resetFilters">
                    <i class="fas fa-redo"></i> Reset
                </button>
            </div>
            
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Applicant Name</th>
                            <th>Application Type</th>
                            <th>Date Submitted</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="applicationsTable">
                        <!-- Applications will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <div style="margin-top: 20px; display: flex; justify-content: space-between;">
                <div>
                    <button class="nav-btn secondary-btn" id="exportApplications">
                        <i class="fas fa-file-export"></i> Export to Excel
                    </button>
                </div>
                <div>
                    <span id="paginationInfo">Showing 1-10 of 24 applications</span>
                    <button class="nav-btn secondary-btn" id="prevPage"><i class="fas fa-chevron-left"></i></button>
                    <button class="nav-btn secondary-btn" id="nextPage"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
        </div>

        <!-- Resident Registration Form -->
        <div id="residentRegistrationScreen" class="screen hidden">
            <h2>
                Register New Resident
                <button class="nav-btn secondary-btn" id="backToDashboardFromRegistration">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <form id="residentRegistrationForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentLastName" class="required">Last Name</label>
                        <input type="text" id="residentLastName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentFirstName" class="required">First Name</label>
                        <input type="text" id="residentFirstName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentMiddleName">Middle Name</label>
                        <input type="text" id="residentMiddleName">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentBirthdate" class="required">Birthdate</label>
                        <input type="date" id="residentBirthdate" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentAge" class="required">Age</label>
                        <input type="number" id="residentAge" min="0" max="120" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentCivilStatus" class="required">Civil Status</label>
                        <select id="residentCivilStatus" required>
                            <option value="">Select Status</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                            <option value="Widowed">Widowed</option>
                            <option value="Separated">Separated</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentContact" class="required">Contact Number</label>
                        <input type="tel" id="residentContact" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentEmail">Email Address</label>
                        <input type="email" id="residentEmail">
                    </div>
                    
                    <div class="form-group">
                        <label for="residentOccupation">Occupation</label>
                        <input type="text" id="residentOccupation">
                    </div>
                </div>
                
                <h3>Address Information</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentBlockLot" class="required">Block and Lot</label>
                        <input type="text" id="residentBlockLot" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentStreet" class="required">Street</label>
                        <input type="text" id="residentStreet" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentSubdivision" class="required">Subdivision</label>
                        <select id="residentSubdivision" required>
                            <option value="">Select Subdivision</option>
                            <option value="PILAR VILLAGE">PILAR VILLAGE</option>
                            <option value="CYPRESS MANGGAHAN">CYPRESS MANGGAHAN</option>
                            <option value="TERESA PARK">TERESA PARK</option>
                            <option value="BF PILAR SOUTHVILLE">BF PILAR SOUTHVILLE</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentLengthStay" class="required">Length of Stay</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="number" id="residentLengthStay" style="flex: 3;" required>
                            <select id="residentStayUnit" style="flex: 1;">
                                <option value="months">Months</option>
                                <option value="years">Years</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="residentNotes">Additional Notes</label>
                    <textarea id="residentNotes" rows="3"></textarea>
                </div>
                
                <div class="nav-buttons">
                    <button type="reset" class="nav-btn secondary-btn">
                        <i class="fas fa-redo"></i> Clear Form
                    </button>
                    <button type="submit" class="nav-btn success-btn">
                        <i class="fas fa-save"></i> Register Resident
                    </button>
                </div>
            </form>
        </div>

        <!-- Certificate Generation Module -->
        <div id="certificateGenerationScreen" class="screen hidden">
            <h2>
                Certificate Generation
                <button class="nav-btn secondary-btn" id="backToDashboardFromCertificates">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="certificateType" class="required">Certificate Type</label>
                    <select id="certificateType" required>
                        <option value="">Select Certificate Type</option>
                        <option value="residency">Certificate of Residency</option>
                        <option value="indigency">Certificate of Indigency</option>
                        <option value="goodmoral">Certificate of Good Moral Character</option>
                        <option value="employment">Certificate of Employment</option>
                        <option value="nocriminal">No Criminal Record</option>
                        <option value="soloparent">Solo Parent Certification</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="certificateRecipient" class="required">Recipient Name</label>
                    <input type="text" id="certificateRecipient" placeholder="Search resident name..." required>
                    <div id="residentSuggestions" style="margin-top: 5px; display: none;">
                        <!-- Suggestions will be populated here -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="certificatePurpose" class="required">Purpose</label>
                    <input type="text" id="certificatePurpose" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="certificateDate">Certificate Date</label>
                    <input type="date" id="certificateDate">
                </div>
                
                <div class="form-group">
                    <label for="certificateValidity">Validity (Days)</label>
                    <input type="number" id="certificateValidity" min="1" max="365" value="30">
                </div>
                
                <div class="form-group">
                    <label for="certificateNumber">Certificate Number</label>
                    <input type="text" id="certificateNumber" value="BPV-2023-" readonly>
                </div>
            </div>
            
            <div class="form-group">
                <label for="certificateRemarks">Additional Remarks</label>
                <textarea id="certificateRemarks" rows="3" placeholder="Any additional information for the certificate..."></textarea>
            </div>
            
            <div class="certificate-preview">
                <div class="certificate-header">
                    <h2 id="previewCertificateType">CERTIFICATE OF RESIDENCY</h2>
                    <p>Republic of the Philippines<br>Province of Cavite<br>Barangay Pilar Village</p>
                </div>
                
                <div class="certificate-body">
                    <p>TO WHOM IT MAY CONCERN:</p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        This is to certify that <strong id="previewRecipient">[RECIPIENT NAME]</strong>, 
                        of legal age, is a bona fide resident of <strong id="previewAddress">[ADDRESS]</strong>, 
                        Barangay Pilar Village, and has been residing therein for <strong id="previewLengthStay">[LENGTH]</strong>.
                    </p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        This certification is issued upon the request of the above-named person for <strong id="previewPurpose">[PURPOSE]</strong> 
                        and whatever legal purpose it may serve.
                    </p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        Issued this <strong id="previewDate">[DATE]</strong> at Barangay Pilar Village.
                    </p>
                </div>
                
                <div class="certificate-footer">
                    <div class="signature-box">
                        <div class="signature-line"></div>
                        <p><strong>HON. JUAN DELA CRUZ</strong><br>Barangay Captain</p>
                    </div>
                    
                    <div class="signature-box">
                        <div class="signature-line"></div>
                        <p><strong>MARIA SANTOS</strong><br>Barangay Secretary</p>
                    </div>
                </div>
            </div>
            
            <div class="nav-buttons" style="margin-top: 30px;">
                <button class="nav-btn secondary-btn" id="previewCertificate">
                    <i class="fas fa-eye"></i> Update Preview
                </button>
                <button class="nav-btn primary-btn" id="printCertificate">
                    <i class="fas fa-print"></i> Print Certificate
                </button>
                <button class="nav-btn success-btn" id="saveCertificate">
                    <i class="fas fa-save"></i> Save & Generate
                </button>
            </div>
        </div>

        <!-- Reports Dashboard -->
        <div id="reportsDashboardScreen" class="screen hidden">
            <h2>
                Reports Dashboard
                <button class="nav-btn secondary-btn" id="backToDashboardFromReports">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <i class="fas fa-file-alt"></i>
                    <h3>156</h3>
                    <p>Applications This Month</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <h3>42</h3>
                    <p>New Residents This Year</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-certificate"></i>
                    <h3>89</h3>
                    <p>Certificates Issued</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-money-bill-wave"></i>
                    <h3>‚Ç±24,580</h3>
                    <p>Revenue This Month</p>
                </div>
            </div>
            
            <h3>Application Statistics</h3>
            <div class="chart-row">
                <div class="chart-container">
                    <h4>Applications by Type</h4>
                    <div style="height: 300px; display: flex; align-items: flex-end; justify-content: space-around; margin-top: 20px;">
                        <div style="text-align: center;">
                            <div style="height: 200px; width: 40px; background-color: var(--blue-medium); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Residency</div>
                            <div style="font-weight: bold;">45%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 150px; width: 40px; background-color: var(--green); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Indigency</div>
                            <div style="font-weight: bold;">25%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 100px; width: 40px; background-color: var(--orange); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Job Seeker</div>
                            <div style="font-weight: bold;">15%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 80px; width: 40px; background-color: var(--purple); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Business</div>
                            <div style="font-weight: bold;">10%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 50px; width: 40px; background-color: var(--red); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Others</div>
                            <div style="font-weight: bold;">5%</div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h4>Applications by Status</h4>
                    <div style="height: 300px; display: flex; align-items: center; justify-content: center; margin-top: 20px;">
                        <div style="width: 200px; height: 200px; border-radius: 50%; background: conic-gradient(var(--green) 0% 65%, var(--yellow) 65% 85%, var(--red) 85% 100%);"></div>
                    </div>
                    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--green); margin-right: 5px;"></span> Approved (65%)</div>
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--yellow); margin-right: 5px;"></span> Pending (20%)</div>
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--red); margin-right: 5px;"></span> Rejected (15%)</div>
                    </div>
                </div>
            </div>
            
            <h3>Monthly Report</h3>
            <div class="filter-controls">
                <div class="filter-group">
                    <label>Report Type</label>
                    <select id="reportType">
                        <option value="applications">Applications Report</option>
                        <option value="residents">Residents Report</option>
                        <option value="financial">Financial Report</option>
                        <option value="certificates">Certificates Report</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Month</label>
                    <select id="reportMonth">
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Year</label>
                    <select id="reportYear">
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                    </select>
                </div>
                
                <button class="nav-btn primary-btn filter-btn" id="generateReport">
                    <i class="fas fa-chart-bar"></i> Generate Report
                </button>
                
                <button class="nav-btn success-btn filter-btn" id="exportReport">
                    <i class="fas fa-download"></i> Export as PDF
                </button>
            </div>
            
            <div class="table-container" style="margin-top: 20px;">
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Application Type</th>
                            <th>Applicant</th>
                            <th>Status</th>
                            <th>Processed By</th>
                            <th>Processing Time</th>
                        </tr>
                    </thead>
                    <tbody id="reportTable">
                        <!-- Report data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>Barangay Pilar Village Services Portal &copy; 2023. All rights reserved.</p>
            <p>This portal is for official use only. Unauthorized access is prohibited.</p>
        </div>
    </footer>

    <script>
        // DOM Elements
        const accessScreen = document.getElementById('accessScreen');
        const loginScreen = document.getElementById('loginScreen');
        const memberDashboard = document.getElementById('memberDashboard');
        const applicationsManagementScreen = document.getElementById('applicationsManagementScreen');
        const residentRegistrationScreen = document.getElementById('residentRegistrationScreen');
        const certificateGenerationScreen = document.getElementById('certificateGenerationScreen');
        const reportsDashboardScreen = document.getElementById('reportsDashboardScreen');
        
        // Buttons
        const applicantBtn = document.getElementById('applicantBtn');
        const memberBtn = document.getElementById('memberBtn');
        const backToAccessFromLogin = document.getElementById('backToAccessFromLogin');
        const logoutBtn = document.getElementById('logoutBtn');
        
        // Dashboard navigation buttons
        const applicationsManagementBtn = document.getElementById('applicationsManagementBtn');
        const residentRegistrationBtn = document.getElementById('residentRegistrationBtn');
        const certificateGenerationBtn = document.getElementById('certificateGenerationBtn');
        const reportsDashboardBtn = document.getElementById('reportsDashboardBtn');
        
        // Back buttons from sub-screens
        const backToDashboardFromApps = document.getElementById('backToDashboardFromApps');
        const backToDashboardFromRegistration = document.getElementById('backToDashboardFromRegistration');
        const backToDashboardFromCertificates = document.getElementById('backToDashboardFromCertificates');
        const backToDashboardFromReports = document.getElementById('backToDashboardFromReports');
        
        // Demo credentials
        const validCredentials = [
            { username: 'admin', password: 'barangay2023', name: 'Administrator' },
            { username: 'staff', password: 'pilarvillage', name: 'Staff Member' }
        ];

        // Sample data
        const sampleApplications = [
            { id: 'BPV-2023-001', name: 'Juan Dela Cruz', type: 'Certificate of Residency', date: '2023-11-15', status: 'pending' },
            { id: 'BPV-2023-002', name: 'Maria Santos', type: 'First Time Job Seeker', date: '2023-11-14', status: 'approved' },
            { id: 'BPV-2023-003', name: 'Pedro Garcia', type: 'Certificate of Indigency', date: '2023-11-13', status: 'rejected' },
            { id: 'BPV-2023-004', name: 'Ana Reyes', type: 'Business Permit', date: '2023-11-12', status: 'pending' },
            { id: 'BPV-2023-005', name: 'Luis Torres', type: 'Certificate of Residency', date: '2023-11-11', status: 'approved' },
            { id: 'BPV-2023-006', name: 'Sofia Mendoza', type: 'Solo Parent ID', date: '2023-11-10', status: 'pending' },
            { id: 'BPV-2023-007', name: 'Carlos Lim', type: 'Barangay Clearance', date: '2023-11-09', status: 'approved' },
            { id: 'BPV-2023-008', name: 'Elena Cruz', type: 'Certificate of Indigency', date: '2023-11-08', status: 'pending' },
            { id: 'BPV-2023-009', name: 'Ramon Aquino', type: 'First Time Job Seeker', date: '2023-11-07', status: 'approved' },
            { id: 'BPV-2023-010', name: 'Teresa Ramos', type: 'Certificate of Residency', date: '2023-11-06', status: 'pending' }
        ];

        const sampleResidents = [
            { id: 1, name: 'Juan Dela Cruz', age: 35, address: 'Block 5, Lot 12, Pilar Village', contact: '09123456789' },
            { id: 2, name: 'Maria Santos', age: 28, address: 'Block 3, Lot 8, Teresa Park', contact: '09234567890' },
            { id: 3, name: 'Pedro Garcia', age: 42, address: 'Block 7, Lot 15, Cypress Mangahan', contact: '09345678901' },
            { id: 4, name: 'Ana Reyes', age: 31, address: 'Block 2, Lot 5, BF Pilar Southville', contact: '09456789012' },
            { id: 5, name: 'Luis Torres', age: 56, address: 'Block 9, Lot 20, Pilar Village', contact: '09567890123' }
        ];

        const sampleActivity = [
            { time: '10:30 AM', activity: 'Certificate of Residency approved', user: 'Juan Dela Cruz', status: 'approved' },
            { time: '9:15 AM', activity: 'First Time Job Seeker application submitted', user: 'Maria Santos', status: 'pending' },
            { time: 'Yesterday', activity: 'Barangay Meeting scheduled', user: 'System', status: 'info' },
            { time: 'Nov 28', activity: 'Database backup completed', user: 'System', status: 'info' },
            { time: 'Nov 27', activity: 'Certificate of Indigency rejected', user: 'Pedro Garcia', status: 'rejected' }
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            populateApplicationsTable();
            populateRecentActivity();
            populateReportTable();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Main navigation
            applicantBtn.addEventListener('click', () => {
                alert('Applicant form would open here. This was shown in previous implementation.');
            });
            
            memberBtn.addEventListener('click', () => {
                accessScreen.classList.add('hidden');
                loginScreen.classList.remove('hidden');
            });
            
            backToAccessFromLogin.addEventListener('click', () => {
                loginScreen.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            // Login form
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('username').value.trim();
                const password = document.getElementById('password').value;
                
                const validUser = validCredentials.find(
                    cred => cred.username === username && cred.password === password
                );
                
                if (validUser) {
                    document.getElementById('loginError').style.display = 'none';
                    document.getElementById('loggedInUser').textContent = validUser.name;
                    loginScreen.classList.add('hidden');
                    memberDashboard.classList.remove('hidden');
                    this.reset();
                } else {
                    document.getElementById('loginError').style.display = 'block';
                    document.getElementById('password').value = '';
                }
            });
            
            // Logout
            logoutBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            // Dashboard navigation
            applicationsManagementBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                applicationsManagementScreen.classList.remove('hidden');
            });
            
            residentRegistrationBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                residentRegistrationScreen.classList.remove('hidden');
            });
            
            certificateGenerationBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                certificateGenerationScreen.classList.remove('hidden');
            });
            
            reportsDashboardBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                reportsDashboardScreen.classList.remove('hidden');
            });
            
            // Back buttons
            backToDashboardFromApps.addEventListener('click', () => {
                applicationsManagementScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            backToDashboardFromRegistration.addEventListener('click', () => {
                residentRegistrationScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            backToDashboardFromCertificates.addEventListener('click', () => {
                certificateGenerationScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            backToDashboardFromReports.addEventListener('click', () => {
                reportsDashboardScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            // Applications Management
            document.getElementById('applyFilters').addEventListener('click', applyFilters);
            document.getElementById('resetFilters').addEventListener('click', resetFilters);
            document.getElementById('exportApplications').addEventListener('click', () => {
                alert('Exporting applications to Excel...');
            });
            
            // Certificate Generation
            document.getElementById('certificateType').addEventListener('change', updateCertificatePreview);
            document.getElementById('certificateRecipient').addEventListener('input', showResidentSuggestions);
            document.getElementById('previewCertificate').addEventListener('click', updateCertificatePreview);
            document.getElementById('printCertificate').addEventListener('click', () => {
                window.print();
            });
            document.getElementById('saveCertificate').addEventListener('click', () => {
                alert('Certificate saved and generated successfully!');
            });
            
            // Reports
            document.getElementById('generateReport').addEventListener('click', generateReport);
            document.getElementById('exportReport').addEventListener('click', () => {
                alert('Report exported as PDF successfully!');
            });
            
            // Resident Registration
            document.getElementById('residentRegistrationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Resident registered successfully!');
                this.reset();
            });
        }

        function populateApplicationsTable() {
            const tableBody = document.getElementById('applicationsTable');
            tableBody.innerHTML = '';
            
            sampleApplications.forEach(app => {
                const row = document.createElement('tr');
                
                let statusClass = 'status-pending';
                if (app.status === 'approved') statusClass = 'status-approved';
                if (app.status === 'rejected') statusClass = 'status-rejected';
                
                row.innerHTML = `
                    <td>${app.id}</td>
                    <td>${app.name}</td>
                    <td>${app.type}</td>
                    <td>${app.date}</td>
                    <td><span class="status-badge ${statusClass}">${app.status.toUpperCase()}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn view-btn" onclick="viewApplication('${app.id}')">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="action-btn approve-btn" onclick="approveApplication('${app.id}')">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="action-btn reject-btn" onclick="rejectApplication('${app.id}')">
                                <i class="fas fa-times"></i> Reject
                            </button>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function populateRecentActivity() {
            const tableBody = document.getElementById('recentActivity');
            tableBody.innerHTML = '';
            
            sampleActivity.forEach(activity => {
                const row = document.createElement('tr');
                
                let statusBadge = '';
                if (activity.status === 'approved') {
                    statusBadge = '<span class="status-badge status-approved">APPROVED</span>';
                } else if (activity.status === 'rejected') {
                    statusBadge = '<span class="status-badge status-rejected">REJECTED</span>';
                } else {
                    statusBadge = '<span class="status-badge status-pending">INFO</span>';
                }
                
                row.innerHTML = `
                    <td>${activity.time}</td>
                    <td>${activity.activity}</td>
                    <td>${activity.user}</td>
                    <td>${statusBadge}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function populateReportTable() {
            const tableBody = document.getElementById('reportTable');
            tableBody.innerHTML = '';
            
            // Add sample report data
            for (let i = 1; i <= 10; i++) {
                const date = `2023-11-${i.toString().padStart(2, '0')}`;
                const types = ['Certificate of Residency', 'First Time Job Seeker', 'Certificate of Indigency', 'Business Permit'];
                const type = types[Math.floor(Math.random() * types.length)];
                const resident = sampleResidents[Math.floor(Math.random() * sampleResidents.length)];
                const statuses = ['pending', 'approved', 'rejected'];
                const status = statuses[Math.floor(Math.random() * statuses.length)];
                const officers = ['Juan Dela Cruz', 'Maria Santos', 'Pedro Garcia'];
                const officer = officers[Math.floor(Math.random() * officers.length)];
                const time = `${Math.floor(Math.random() * 3) + 1} days`;
                
                let statusClass = 'status-pending';
                if (status === 'approved') statusClass = 'status-approved';
                if (status === 'rejected') statusClass = 'status-rejected';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${date}</td>
                    <td>${type}</td>
                    <td>${resident.name}</td>
                    <td><span class="status-badge ${statusClass}">${status.toUpperCase()}</span></td>
                    <td>${officer}</td>
                    <td>${time}</td>
                `;
                
                tableBody.appendChild(row);
            }
        }

        function applyFilters() {
            const typeFilter = document.getElementById('filterType').value;
            const statusFilter = document.getElementById('filterStatus').value;
            const dateFilter = document.getElementById('filterDate').value;
            
            alert(`Filters applied:\nType: ${typeFilter}\nStatus: ${statusFilter}\nDate: ${dateFilter || 'All dates'}`);
            
            // In a real application, this would filter the data and re-render the table
        }

        function resetFilters() {
            document.getElementById('filterType').value = 'all';
            document.getElementById('filterStatus').value = 'all';
            document.getElementById('filterDate').value = '';
            alert('Filters reset');
        }

        function viewApplication(appId) {
            alert(`Viewing application: ${appId}\n\nThis would open a detailed view of the application.`);
        }

        function approveApplication(appId) {
            if (confirm(`Approve application ${appId}?`)) {
                alert(`Application ${appId} approved successfully!`);
                // In a real application, update the application status
            }
        }

        function rejectApplication(appId) {
            if (confirm(`Reject application ${appId}?`)) {
                const reason = prompt('Please enter the reason for rejection:');
                if (reason) {
                    alert(`Application ${appId} rejected. Reason: ${reason}`);
                    // In a real application, update the application status
                }
            }
        }

        function updateCertificatePreview() {
            const type = document.getElementById('certificateType').value;
            const recipient = document.getElementById('certificateRecipient').value || '[RECIPIENT NAME]';
            const purpose = document.getElementById('certificatePurpose').value || '[PURPOSE]';
            const date = document.getElementById('certificateDate').value || new Date().toISOString().split('T')[0];
            
            // Update preview
            document.getElementById('previewCertificateType').textContent = 
                type === 'residency' ? 'CERTIFICATE OF RESIDENCY' :
                type === 'indigency' ? 'CERTIFICATE OF INDIGENCY' :
                type === 'goodmoral' ? 'CERTIFICATE OF GOOD MORAL CHARACTER' :
                type === 'employment' ? 'CERTIFICATE OF EMPLOYMENT' :
                type === 'nocriminal' ? 'NO CRIMINAL RECORD' :
                type === 'soloparent' ? 'SOLO PARENT CERTIFICATION' :
                'CERTIFICATE';
            
            document.getElementById('previewRecipient').textContent = recipient;
            document.getElementById('previewPurpose').textContent = purpose;
            document.getElementById('previewDate').textContent = formatDate(date);
            
            // Set sample address and length of stay
            document.getElementById('previewAddress').textContent = 'Block 5, Lot 12, Pilar Village';
            document.getElementById('previewLengthStay').textContent = '5 years';
        }

        function showResidentSuggestions() {
            const input = document.getElementById('certificateRecipient').value.toLowerCase();
            const suggestionsDiv = document.getElementById('residentSuggestions');
            
            if (input.length < 2) {
                suggestionsDiv.style.display = 'none';
                return;
            }
            
            const filtered = sampleResidents.filter(r => 
                r.name.toLowerCase().includes(input)
            );
            
            if (filtered.length > 0) {
                suggestionsDiv.innerHTML = filtered.map(r => 
                    `<div style="padding: 5px; border-bottom: 1px solid #eee; cursor: pointer;" 
                          onclick="selectResident('${r.name}', '${r.address}')">
                        ${r.name} - ${r.address}
                    </div>`
                ).join('');
                suggestionsDiv.style.display = 'block';
            } else {
                suggestionsDiv.style.display = 'none';
            }
        }

        function selectResident(name, address) {
            document.getElementById('certificateRecipient').value = name;
            document.getElementById('residentSuggestions').style.display = 'none';
            // You could also populate address fields if needed
        }

        function generateReport() {
            const type = document.getElementById('reportType').value;
            const month = document.getElementById('reportMonth').value;
            const year = document.getElementById('reportYear').value;
            
            alert(`Generating ${type} report for ${getMonthName(month)} ${year}...\n\nIn a real system, this would fetch data from the database and update the report table.`);
        }

        // Helper functions
        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('en-US', options);
        }

        function getMonthName(monthNumber) {
            const months = [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ];
            return months[parseInt(monthNumber) - 1] || '';
        }

        // Initialize certificate preview
        updateCertificatePreview();
        
        // Set today's date as default for certificate date
        document.getElementById('certificateDate').value = new Date().toISOString().split('T')[0];
        document.getElementById('residentBirthdate').value = new Date(new Date().setFullYear(new Date().getFullYear() - 30)).toISOString().split('T')[0];
    </script>
</body>
</html>
Combined Barangay Pilar Village Services Portal
I've successfully combined both codes into a single integrated system. Here's the complete solution:

html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barangay Pilar Village Services Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --blue-dark: #003380;
            --blue-medium: #0047AB;
            --blue-light: #0756CE;
            --red: #CE1126;
            --yellow: #FCD116;
            --green: #28a745;
            --orange: #fd7e14;
            --purple: #6f42c1;
            --gray-light: #f5f5f5;
            --gray-medium: #e0e0e0;
            --gray-dark: #333333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--gray-light);
            color: var(--gray-dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }

        @media (max-width: 1400px) {
            .container {
                max-width: 1200px;
            }
        }
        
        @media (max-width: 1200px) {
            .container {
                max-width: 1000px;
            }
        }
        
        @media (max-width: 992px) {
            .container {
                max-width: 800px;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                max-width: 95%;
                padding: 15px;
            }
        }

        header {
            background: linear-gradient(to right, var(--blue-dark), var(--blue-medium));
            color: white;
            padding: 20px 0;
            text-align: center;
            border-bottom: 5px solid var(--yellow);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }

        .logo {
            font-size: 2.5rem;
            margin-right: 15px;
            color: var(--yellow);
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .tagline {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Common screen styles */
        .screen {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-top: 30px;
        }

        h2 {
            color: var(--blue-dark);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--yellow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h3 {
            color: var(--blue-medium);
            margin: 20px 0 15px 0;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-btn i {
            font-size: 1.2rem;
        }

        .primary-btn {
            background-color: var(--blue-medium);
            color: white;
        }

        .primary-btn:hover {
            background-color: var(--blue-dark);
            transform: translateY(-2px);
        }

        .secondary-btn {
            background-color: var(--gray-medium);
            color: var(--gray-dark);
        }

        .secondary-btn:hover {
            background-color: #d0d0d0;
        }

        .danger-btn {
            background-color: var(--red);
            color: white;
        }

        .danger-btn:hover {
            background-color: #b31022;
        }

        .success-btn {
            background-color: var(--green);
            color: white;
        }

        .success-btn:hover {
            background-color: #218838;
        }

        .hidden {
            display: none !important;
        }

        /* Applicant Form Specific Styles */
        .applicant-form {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-top: 30px;
        }

        .thank-you-screen {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-top: 30px;
            text-align: center;
        }

        .capital-notice {
            background-color: #fff8e1;
            border-left: 5px solid var(--yellow);
            padding: 15px;
            margin-bottom: 25px;
            text-align: center;
            font-weight: bold;
            color: #333;
        }

        .capital-notice i {
            color: var(--red);
            margin-right: 10px;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .form-row .form-group {
            flex: 1;
            min-width: 250px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--blue-dark);
        }

        .required::after {
            content: " *";
            color: var(--red);
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--gray-medium);
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s;
            background-color: white;
        }

        /* Add uppercase styling to text inputs */
        input[type="text"], input[type="tel"], textarea {
            text-transform: uppercase;
        }

        input::placeholder, textarea::placeholder {
            color: #888;
            font-style: italic;
        }

        select {
            color: #333;
        }

        select option:first-child {
            color: #888;
            font-style: italic;
        }

        input:focus, select:focus, textarea:focus {
            border-color: var(--blue-light);
            outline: none;
            box-shadow: 0 0 0 3px rgba(7, 86, 206, 0.2);
        }

        /* Style for invalid input (when lowercase is detected) */
        .invalid-input {
            border-color: var(--red) !important;
            background-color: #fff0f0;
        }

        .error-message {
            color: var(--red);
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
        }

        .length-stay-container {
            display: flex;
            gap: 10px;
        }

        .length-stay-container input {
            flex: 3;
        }

        .length-stay-container select {
            flex: 1;
            min-width: 120px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }

        .checkbox-group label {
            margin-bottom: 0;
        }

        .additional-form {
            background-color: #f0f8ff;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid var(--blue-medium);
        }

        .additional-form h3 {
            color: var(--blue-dark);
            margin-bottom: 15px;
            text-align: center;
        }

        .school-checkbox {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #ccc;
        }

        .school-checkbox:last-child {
            border-bottom: none;
        }

        .submit-btn {
            background-color: var(--blue-medium);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
            width: 100%;
            max-width: 300px;
            text-decoration: none;
            display: inline-block;
        }

        .submit-btn:hover {
            background-color: var(--blue-dark);
            transform: scale(1.05);
        }

        .back-btn {
            background-color: var(--gray-medium);
            color: var(--gray-dark);
            margin-right: 15px;
        }

        .back-btn:hover {
            background-color: #b0b0b0;
        }

        .thank-you-screen h2 {
            color: var(--blue-dark);
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .thank-you-screen h3 {
            color: var(--blue-medium);
            font-size: 1.4rem;
            margin-bottom: 30px;
            font-weight: normal;
        }

        .thank-you-icon {
            font-size: 4rem;
            color: var(--blue-light);
            margin: 30px 0;
        }

        /* FIXED: Button container alignment for thank you screen */
        .thank-you-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        /* Image Upload Styles */
        .image-upload-container {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            border: 2px dashed var(--blue-medium);
            border-radius: 10px;
            background-color: #f9f9f9;
        }

        .image-preview {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border: 3px solid var(--blue-light);
            margin: 15px auto;
            display: none;
        }

        .upload-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .upload-btn, .change-btn {
            background-color: var(--blue-medium);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            display: inline-block;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .change-btn {
            background-color: var(--green);
        }

        .upload-btn:hover {
            background-color: var(--blue-dark);
        }

        .change-btn:hover {
            background-color: #218838;
        }

        /* Table Styles */
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th {
            background-color: var(--blue-dark);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--gray-medium);
        }

        tr:hover {
            background-color: rgba(7, 86, 206, 0.05);
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
        }

        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-approved {
            background-color: #d4edda;
            color: #155724;
        }

        .status-rejected {
            background-color: #f8d7da;
            color: #721c24;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .view-btn {
            background-color: var(--blue-light);
            color: white;
        }

        .approve-btn {
            background-color: var(--green);
            color: white;
        }

        .reject-btn {
            background-color: var(--red);
            color: white;
        }

        /* Dashboard Stats */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-top: 4px solid var(--blue-medium);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2.5rem;
            color: var(--blue-medium);
            margin-bottom: 15px;
        }

        .stat-card h3 {
            font-size: 2.2rem;
            color: var(--blue-dark);
            margin: 10px 0;
        }

        .stat-card p {
            color: var(--gray-dark);
            font-size: 0.95rem;
        }

        /* Charts */
        .chart-container {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }

        .chart-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        /* Certificate Preview */
        .certificate-preview {
            background-color: white;
            border: 2px solid var(--gray-medium);
            border-radius: 8px;
            padding: 40px;
            margin-top: 20px;
            min-height: 400px;
            position: relative;
            background-image: url('data:image/svg+xml;utf8,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><path d="M0,0 L100,0 L100,100 L0,100 Z" fill="none" stroke="%23FCD116" stroke-width="2" stroke-dasharray="5,5"/></svg>');
            background-size: 100px 100px;
        }

        .certificate-header {
            text-align: center;
            border-bottom: 3px double var(--blue-dark);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .certificate-header h2 {
            color: var(--blue-dark);
            font-size: 2.2rem;
            border: none;
            margin: 0;
            padding: 0;
        }

        .certificate-body {
            padding: 30px;
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .certificate-footer {
            position: absolute;
            bottom: 40px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
            padding-top: 30px;
            border-top: 1px solid var(--gray-medium);
        }

        .signature-box {
            text-align: center;
        }

        .signature-line {
            width: 200px;
            border-top: 1px solid var(--gray-dark);
            margin: 40px auto 10px;
        }

        /* Filter Controls */
        .filter-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            background-color: var(--gray-light);
            padding: 20px;
            border-radius: 8px;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .filter-btn {
            align-self: flex-end;
            padding: 10px 20px;
        }

        /* Form View Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            margin: 0;
            border: none;
            padding: 0;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-dark);
        }

        /* Footer */
        footer {
            background-color: var(--blue-dark);
            color: white;
            padding: 30px 0;
            margin-top: 40px;
            text-align: center;
        }

        .footer-content {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .footer-section {
            flex: 1;
            min-width: 300px;
            margin: 15px 0;
        }

        .footer-section h3 {
            color: var(--yellow);
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .footer-section p {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .footer-section i {
            margin-right: 10px;
            color: var(--yellow);
            min-width: 20px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .screen, .applicant-form, .thank-you-screen {
                padding: 20px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .nav-buttons {
                flex-direction: column;
            }
            
            .nav-btn {
                width: 100%;
                justify-content: center;
            }
            
            .chart-row {
                grid-template-columns: 1fr;
            }
            
            .certificate-footer {
                flex-direction: column;
                gap: 30px;
                position: static;
                margin-top: 40px;
            }
            
            .footer-content {
                flex-direction: column;
                text-align: center;
            }
            
            .thank-you-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .upload-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .upload-btn, .change-btn {
                width: 100%;
                max-width: 200px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.7rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo-container">
                <i class="fas fa-landmark logo"></i>
                <div>
                    <h1>Barangay Pilar Village Services Portal</h1>
                    <p class="tagline">Serving The Community With Integrity And Excellence</p>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Access Selection Screen -->
        <div id="accessScreen" class="screen">
            <h2>Welcome to the Barangay Pilar Village Services Portal</h2>
            <p>Please select your access type:</p>
            
            <div class="nav-buttons">
                <button class="nav-btn primary-btn" id="applicantBtn">
                    <i class="fas fa-user-edit"></i>
                    Open as Applicant
                </button>
                
                <button class="nav-btn primary-btn" id="memberBtn">
                    <i class="fas fa-user-lock"></i>
                    Open as Barangay Member
                </button>
            </div>
        </div>

        <!-- Login Screen for Barangay Members -->
        <div id="loginScreen" class="screen hidden">
            <h2>Barangay Member Login</h2>
            <p>Enter your credentials to access the barangay management system</p>
            
            <div id="loginError" class="error-message" style="background-color: #f8d7da; color: #721c24; padding: 12px; border-radius: 6px; margin-bottom: 20px; display: none;">
                <i class="fas fa-exclamation-circle"></i> Invalid username or password. Please try again.
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="username" class="required">Username</label>
                    <input type="text" id="username" placeholder="Enter your username" required>
                </div>
                
                <div class="form-group">
                    <label for="password" class="required">Password</label>
                    <input type="password" id="password" placeholder="Enter your password" required>
                </div>
                
                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="rememberMe">
                        <label for="rememberMe">Remember me</label>
                    </div>
                </div>
                
                <div class="nav-buttons">
                    <button type="button" class="nav-btn secondary-btn" id="backToAccessFromLogin">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <button type="submit" class="nav-btn primary-btn">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </div>
                
                <div style="margin-top: 20px; text-align: center; font-size: 0.9rem; color: var(--gray-dark);">
                    <p>Demo Credentials:</p>
                    <p><strong>Username:</strong> admin | <strong>Password:</strong> barangay2023</p>
                    <p><strong>Username:</strong> staff | <strong>Password:</strong> pilarvillage</p>
                </div>
            </form>
        </div>

        <!-- Application Form Screen -->
        <div id="applicantForm" class="applicant-form hidden">
            <h2>
                Application Form
                <button class="nav-btn secondary-btn" id="backToAccessFromApplicant">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </button>
            </h2>
            
            <div class="capital-notice">
                <i class="fas fa-exclamation-triangle"></i>
                USE CAPITAL LETTERS WHEN FILLING OUT THIS FORM
            </div>

            <form id="applicationForm">
                <!-- Image Upload Section -->
                <div class="image-upload-container">
                    <h3>Request of Formal Image of Applicant</h3>
                    <p><strong>Required: PNG or JPG format</strong></p>
                    <p><em>Applicant's face must be clearly visible</em></p>
                    
                    <img id="imagePreview" class="image-preview" alt="Applicant Photo Preview">
                    
                    <div>
                        <input type="file" id="imageUpload" accept=".png,.jpg,.jpeg" style="display: none;">
                        <div class="upload-buttons">
                            <!-- Initially show only upload button -->
                            <button type="button" class="upload-btn" id="uploadTrigger">
                                <i class="fas fa-camera"></i> Upload Photo
                            </button>
                            <!-- Change button is hidden initially -->
                            <button type="button" class="change-btn hidden" id="changePhotoBtn">
                                <i class="fas fa-sync-alt"></i> Change Photo
                            </button>
                        </div>
                    </div>
                    <p id="fileName" style="margin-top: 10px; color: var(--blue-dark);"></p>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="lastName" class="required">Last Name</label>
                        <input type="text" id="lastName" placeholder="Enter last name" required>
                        <div class="error-message" id="lastNameError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="firstName" class="required">First Name</label>
                        <input type="text" id="firstName" placeholder="Enter first name" required>
                        <div class="error-message" id="firstNameError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="middleName">Middle Name</label>
                        <input type="text" id="middleName" placeholder="Enter middle name">
                        <div class="error-message" id="middleNameError">Please use CAPITAL LETTERS only</div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="blockLot" class="required">Block and Lot</label>
                        <input type="text" id="blockLot" placeholder="e.g., BLOCK 5, LOT 12" required>
                        <div class="error-message" id="blockLotError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="street" class="required">Street</label>
                        <input type="text" id="street" placeholder="Enter street name" required>
                        <div class="error-message" id="streetError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="subdivision" class="required">Subdivision</label>
                        <select id="subdivision" required>
                            <option value="" disabled selected>Select Subdivision</option>
                            <option value="CYPRESS MANGGAHAN">CYPRESS MANGGAHAN</option>
                            <option value="CAMELLA HOMES CLASSIC">CAMELLA HOMES CLASSIC</option>
                            <option value="CLASSIC HOMES">CLASSIC HOMES</option>
                            <option value="CUEVAS COMPOUND">CUEVAS COMPOUND</option>
                            <option value="DAISY COMPOUND">DAISY COMPOUND</option>
                            <option value="GARDEN COMPOUND">GARDEN COMPOUND</option>
                            <option value="GLORIA COMPOUND">GLORIA COMPOUND</option>
                            <option value="MALIGAYA COMPOUND">MALIGAYA COMPOUND</option>
                            <option value="PAG-ASA COMPOUND">PAG-ASA COMPOUND</option>
                            <option value="SAMPAGUITA COMPOUND">SAMPAGUITA COMPOUND</option>
                            <option value="BF PILAR SOUTHVILLE">BF PILAR SOUTHVILLE</option>
                            <option value="TERESA COMPOUND">TERESA COMPOUND</option>
                            <option value="PILAR VILLAGE">PILAR VILLAGE</option>
                            <option value="TERESA PARK">TERESA PARK</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="provincialAddress" class="required">Provincial Address</label>
                    <textarea id="provincialAddress" rows="3" placeholder="Enter complete provincial address" required></textarea>
                    <div class="error-message" id="provincialAddressError">Please use CAPITAL LETTERS only</div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="contactNumber" class="required">Contact Number</label>
                        <input type="tel" id="contactNumber" placeholder="e.g., 09171234567" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="age" class="required">Age</label>
                        <input type="number" id="age" min="1" max="120" placeholder="Enter age" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="lengthStay" class="required">Length of Stay (Minimum: 6 Months)</label>
                        <div class="length-stay-container">
                            <input type="number" id="lengthStay" min="1" placeholder="Enter number" required>
                            <select id="stayUnit">
                                <option value="months">Months</option>
                                <option value="years">Years</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="birthday" class="required">Birthday</label>
                        <input type="date" id="birthday" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="birthPlace" class="required">Place of Birth</label>
                        <input type="text" id="birthPlace" placeholder="CITY, PROVINCE" required>
                        <div class="error-message" id="birthPlaceError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="nationality" class="required">Nationality</label>
                        <select id="nationality" required>
                            <option value="" disabled selected>Select nationality</option>
                            <!-- Nationalities will be populated by JavaScript -->
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="sex" class="required">Sex</label>
                        <select id="sex" required>
                            <option value="" disabled selected>Select Sex</option>
                            <option value="MALE">MALE</option>
                            <option value="FEMALE">FEMALE</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="civilStatus" class="required">Civil Status</label>
                        <select id="civilStatus" required>
                            <option value="" disabled selected>Select Civil Status</option>
                            <option value="SINGLE">SINGLE</option>
                            <option value="MARRIED">MARRIED</option>
                            <option value="WIDOWED">WIDOWED</option>
                            <option value="LEGALLY SEPARATED">LEGALLY SEPARATED</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="purpose" class="required">Purpose of Application</label>
                    <select id="purpose" required>
                        <option value="" disabled selected>Select Purpose</option>
                        <option value="PROOF OF RESIDENCY">PROOF OF RESIDENCY</option>
                        <option value="PROOF OF INDIGENCY">PROOF OF INDIGENCY</option>
                        <option value="POSTAL ID REQUIREMENT">POSTAL ID REQUIREMENT</option>
                        <option value="PWD ID REQUIREMENT">PWD ID REQUIREMENT</option>
                        <option value="SENIOR CITIZEN ID REQUIREMENT">SENIOR CITIZEN ID REQUIREMENT</option>
                        <option value="MEDICAL ASSISTANCE/FINANCIAL">MEDICAL ASSISTANCE/FINANCIAL</option>
                        <option value="EDUCATIONAL ASSISTANCE">EDUCATIONAL ASSISTANCE</option>
                        <option value="GREENCARD APPLICATION/RENEWAL">GREENCARD APPLICATION/RENEWAL</option>
                        <option value="LOCAL EMPLOYMENT">LOCAL EMPLOYMENT</option>
                        <option value="SCHOOL REQUIREMENT">SCHOOL REQUIREMENT</option>
                        <option value="BANK REQUIREMENT">BANK REQUIREMENT</option>
                        <option value="LOAN APPLICATION">LOAN APPLICATION</option>
                        <option value="SOLO PARENT ID REQUIREMENT">SOLO PARENT ID REQUIREMENT</option>
                        <option value="PHILHEALTH APPLICATION">PHILHEALTH APPLICATION</option>
                        <option value="TIN ID APPLICATION">TIN ID APPLICATION</option>
                        <option value="GSIS REQUIREMENT">GSIS REQUIREMENT</option>
                        <option value="SSS REQUIREMENT">SSS REQUIREMENT</option>
                        <option value="MARRIAGE LICENSE APPLICATION">MARRIAGE LICENSE APPLICATION</option>
                        <option value="LATE REGISTRATION OF BIRTH">LATE REGISTRATION OF BIRTH</option>
                        <option value="DRIVER LICENSE APPLICATION">DRIVER LICENSE APPLICATION</option>
                        <option value="BUSINESS PERMIT APPLICATION">BUSINESS PERMIT APPLICATION</option>
                        <option value="FIRST TIME JOB SEEKER">FIRST TIME JOB SEEKER</option>
                        <option value="LIBRENG LIBING">LIBRENG LIBING</option>
                        <option value="CUTTING TREES">CUTTING TREES</option>
                        <option value="SOCIAL PENSION">SOCIAL PENSION</option>
                        <option value="ONENESS">ONENESS</option>
                        <option value="UNEMPLOYMENT">UNEMPLOYMENT</option>
                        <option value="NO DEROGATORY">NO DEROGATORY</option>
                        <option value="CERTIFICATE OF RESIDENCY">CERTIFICATE OF RESIDENCY</option>
                        <option value="GOOD MORAL">GOOD MORAL</option>
                        <option value="FIRE VICTIM">FIRE VICTIM</option>
                        <option value="CHANGE ADDRESS">CHANGE ADDRESS</option>
                        <option value="MAYNILAD/MERALCO">MAYNILAD/MERALCO</option>
                        <option value="COHABITATION">COHABITATION</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="firstTimeJobSeeker">
                        <label for="firstTimeJobSeeker">FIRST TIME JOB-SEEKER?</label>
                    </div>
                </div>
                
                <!-- Additional Form for First Time Job Seekers -->
                <div id="additionalJobSeekerForm" class="additional-form hidden">
                    <h3>ADDITIONAL INFO FOR FIRST TIME JOB-SEEKERS</h3>
                    <p>Please provide the name of the School or institution for each selected section:</p>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="elementarySchool">
                            <label for="elementarySchool">Elementary School</label>
                        </div>
                        <input type="text" id="elementarySchoolName" class="school-name-input hidden" placeholder="ENTER ELEMENTARY SCHOOL NAME">
                        <div class="error-message" id="elementarySchoolError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="juniorHighSchool">
                            <label for="juniorHighSchool">Junior High School</label>
                        </div>
                        <input type="text" id="juniorHighSchoolName" class="school-name-input hidden" placeholder="ENTER JUNIOR HIGH SCHOOL NAME">
                        <div class="error-message" id="juniorHighSchoolError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="seniorHighSchool">
                            <label for="seniorHighSchool">Senior High School</label>
                        </div>
                        <input type="text" id="seniorHighSchoolName" class="school-name-input hidden" placeholder="ENTER SENIOR HIGH SCHOOL NAME">
                        <div class="error-message" id="seniorHighSchoolError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="college">
                            <label for="college">College</label>
                        </div>
                        <input type="text" id="collegeName" class="school-name-input hidden" placeholder="ENTER COLLEGE NAME">
                        <div class="error-message" id="collegeNameError">Please use CAPITAL LETTERS only</div>
                        <input type="text" id="collegeCourse" class="course-input hidden" placeholder="ENTER COLLEGE COURSE" style="margin-top: 10px;">
                        <div class="error-message" id="collegeCourseError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="vocationalSchool">
                            <label for="vocationalSchool">Vocational School</label>
                        </div>
                        <input type="text" id="vocationalSchoolName" class="school-name-input hidden" placeholder="ENTER VOCATIONAL SCHOOL NAME">
                        <div class="error-message" id="vocationalSchoolError">Please use CAPITAL LETTERS only</div>
                        <input type="text" id="vocationalCourse" class="course-input hidden" placeholder="ENTER VOCATIONAL COURSE" style="margin-top: 10px;">
                        <div class="error-message" id="vocationalCourseError">Please use CAPITAL LETTERS only</div>
                    </div>
                </div>
                
                <div style="margin-top: 30px; text-align: center;">
                    <button type="button" class="submit-btn back-btn" id="cancelApplicantForm">Cancel</button>
                    <button type="submit" class="submit-btn">Submit Application</button>
                </div>
            </form>
        </div>

        <!-- Thank You Screen -->
        <div id="thankYouScreen" class="thank-you-screen hidden">
            <i class="fas fa-check-circle thank-you-icon"></i>
            <h2>THANK YOU FOR FILLING YOUR APPLICATION!</h2>
            <h3>We will contact you once your application status is completed.</h3>
            <p>Your application has been submitted successfully. A barangay representative will contact you within 3-5 working days.</p>
            <p>For inquiries, please contact Barangay Pilar Village Office at (02) 1234-5678.</p>
            
            <div class="thank-you-buttons">
                <button class="submit-btn" id="newApplicationBtn">
                    Submit Another Application
                </button>
                <button class="submit-btn back-btn" id="backToHomeFromThankYou">
                    Back to Home
                </button>
            </div>
        </div>

        <!-- Member Dashboard -->
        <div id="memberDashboard" class="screen hidden">
            <h2>
                Barangay Management Dashboard
                <button class="nav-btn danger-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </h2>
            
            <p>Welcome back, <strong id="loggedInUser">Administrator</strong>! Here's an overview of barangay activities.</p>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <i class="fas fa-file-alt"></i>
                    <h3 id="pendingApplications">0</h3>
                    <p>Pending Applications</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-check-circle"></i>
                    <h3 id="processedToday">0</h3>
                    <p>Processed Today</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <h3 id="totalResidents">0</h3>
                    <p>Total Residents</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-calendar-check"></i>
                    <h3 id="upcomingEvents">3</h3>
                    <p>Upcoming Events</p>
                </div>
            </div>
            
            <h3>Quick Actions</h3>
            <div class="nav-buttons">
                <button class="nav-btn primary-btn" id="applicationsManagementBtn">
                    <i class="fas fa-list-check"></i> Applications Management
                </button>
                
                <button class="nav-btn primary-btn" id="residentRegistrationBtn">
                    <i class="fas fa-user-plus"></i> Register New Resident
                </button>
                
                <button class="nav-btn primary-btn" id="certificateGenerationBtn">
                    <i class="fas fa-print"></i> Generate Certificates
                </button>
                
                <button class="nav-btn primary-btn" id="reportsDashboardBtn">
                    <i class="fas fa-chart-bar"></i> View Reports
                </button>
            </div>
            
            <h3 style="margin-top: 30px;">Recent Activity</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Activity</th>
                            <th>User</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="recentActivity">
                        <!-- Activity rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Applications Management Interface -->
        <div id="applicationsManagementScreen" class="screen hidden">
            <h2>
                Applications Management
                <button class="nav-btn secondary-btn" id="backToDashboardFromApps">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="filter-controls">
                <div class="filter-group">
                    <label>Application Type</label>
                    <select id="filterType">
                        <option value="all">All Types</option>
                        <option value="residency">Certificate of Residency</option>
                        <option value="indigency">Certificate of Indigency</option>
                        <option value="jobseeker">First Time Job Seeker</option>
                        <option value="business">Business Permit</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Status</label>
                    <select id="filterStatus">
                        <option value="all">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="approved">Approved</option>
                        <option value="rejected">Rejected</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Date Range</label>
                    <input type="date" id="filterDate">
                </div>
                
                <button class="nav-btn primary-btn filter-btn" id="applyFilters">
                    <i class="fas fa-filter"></i> Apply Filters
                </button>
                
                <button class="nav-btn secondary-btn filter-btn" id="resetFilters">
                    <i class="fas fa-redo"></i> Reset
                </button>
            </div>
            
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Applicant Name</th>
                            <th>Application Type</th>
                            <th>Date Submitted</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="applicationsTable">
                        <!-- Applications will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <div style="margin-top: 20px; display: flex; justify-content: space-between;">
                <div>
                    <button class="nav-btn secondary-btn" id="exportApplications">
                        <i class="fas fa-file-export"></i> Export to Excel
                    </button>
                </div>
                <div>
                    <span id="paginationInfo">Showing 0 applications</span>
                    <button class="nav-btn secondary-btn" id="prevPage"><i class="fas fa-chevron-left"></i></button>
                    <button class="nav-btn secondary-btn" id="nextPage"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
        </div>

        <!-- Resident Registration Form -->
        <div id="residentRegistrationScreen" class="screen hidden">
            <h2>
                Register New Resident
                <button class="nav-btn secondary-btn" id="backToDashboardFromRegistration">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <form id="residentRegistrationForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentLastName" class="required">Last Name</label>
                        <input type="text" id="residentLastName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentFirstName" class="required">First Name</label>
                        <input type="text" id="residentFirstName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentMiddleName">Middle Name</label>
                        <input type="text" id="residentMiddleName">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentBirthdate" class="required">Birthdate</label>
                        <input type="date" id="residentBirthdate" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentAge" class="required">Age</label>
                        <input type="number" id="residentAge" min="0" max="120" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentCivilStatus" class="required">Civil Status</label>
                        <select id="residentCivilStatus" required>
                            <option value="">Select Status</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                            <option value="Widowed">Widowed</option>
                            <option value="Separated">Separated</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentContact" class="required">Contact Number</label>
                        <input type="tel" id="residentContact" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentEmail">Email Address</label>
                        <input type="email" id="residentEmail">
                    </div>
                    
                    <div class="form-group">
                        <label for="residentOccupation">Occupation</label>
                        <input type="text" id="residentOccupation">
                    </div>
                </div>
                
                <h3>Address Information</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentBlockLot" class="required">Block and Lot</label>
                        <input type="text" id="residentBlockLot" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentStreet" class="required">Street</label>
                        <input type="text" id="residentStreet" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentSubdivision" class="required">Subdivision</label>
                        <select id="residentSubdivision" required>
                            <option value="">Select Subdivision</option>
                            <option value="PILAR VILLAGE">PILAR VILLAGE</option>
                            <option value="CYPRESS MANGGAHAN">CYPRESS MANGGAHAN</option>
                            <option value="TERESA PARK">TERESA PARK</option>
                            <option value="BF PILAR SOUTHVILLE">BF PILAR SOUTHVILLE</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentLengthStay" class="required">Length of Stay</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="number" id="residentLengthStay" style="flex: 3;" required>
                            <select id="residentStayUnit" style="flex: 1;">
                                <option value="months">Months</option>
                                <option value="years">Years</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="residentNotes">Additional Notes</label>
                    <textarea id="residentNotes" rows="3"></textarea>
                </div>
                
                <div class="nav-buttons">
                    <button type="reset" class="nav-btn secondary-btn">
                        <i class="fas fa-redo"></i> Clear Form
                    </button>
                    <button type="submit" class="nav-btn success-btn">
                        <i class="fas fa-save"></i> Register Resident
                    </button>
                </div>
            </form>
        </div>

        <!-- Certificate Generation Module -->
        <div id="certificateGenerationScreen" class="screen hidden">
            <h2>
                Certificate Generation
                <button class="nav-btn secondary-btn" id="backToDashboardFromCertificates">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="certificateType" class="required">Certificate Type</label>
                    <select id="certificateType" required>
                        <option value="">Select Certificate Type</option>
                        <option value="residency">Certificate of Residency</option>
                        <option value="indigency">Certificate of Indigency</option>
                        <option value="goodmoral">Certificate of Good Moral Character</option>
                        <option value="employment">Certificate of Employment</option>
                        <option value="nocriminal">No Criminal Record</option>
                        <option value="soloparent">Solo Parent Certification</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="certificateRecipient" class="required">Recipient Name</label>
                    <input type="text" id="certificateRecipient" placeholder="Search resident name..." required>
                    <div id="residentSuggestions" style="margin-top: 5px; display: none;">
                        <!-- Suggestions will be populated here -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="certificatePurpose" class="required">Purpose</label>
                    <input type="text" id="certificatePurpose" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="certificateDate">Certificate Date</label>
                    <input type="date" id="certificateDate">
                </div>
                
                <div class="form-group">
                    <label for="certificateValidity">Validity (Days)</label>
                    <input type="number" id="certificateValidity" min="1" max="365" value="30">
                </div>
                
                <div class="form-group">
                    <label for="certificateNumber">Certificate Number</label>
                    <input type="text" id="certificateNumber" value="BPV-2023-" readonly>
                </div>
            </div>
            
            <div class="form-group">
                <label for="certificateRemarks">Additional Remarks</label>
                <textarea id="certificateRemarks" rows="3" placeholder="Any additional information for the certificate..."></textarea>
            </div>
            
            <div class="certificate-preview">
                <div class="certificate-header">
                    <h2 id="previewCertificateType">CERTIFICATE OF RESIDENCY</h2>
                    <p>Republic of the Philippines<br>Province of Cavite<br>Barangay Pilar Village</p>
                </div>
                
                <div class="certificate-body">
                    <p>TO WHOM IT MAY CONCERN:</p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        This is to certify that <strong id="previewRecipient">[RECIPIENT NAME]</strong>, 
                        of legal age, is a bona fide resident of <strong id="previewAddress">[ADDRESS]</strong>, 
                        Barangay Pilar Village, and has been residing therein for <strong id="previewLengthStay">[LENGTH]</strong>.
                    </p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        This certification is issued upon the request of the above-named person for <strong id="previewPurpose">[PURPOSE]</strong> 
                        and whatever legal purpose it may serve.
                    </p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        Issued this <strong id="previewDate">[DATE]</strong> at Barangay Pilar Village.
                    </p>
                </div>
                
                <div class="certificate-footer">
                    <div class="signature-box">
                        <div class="signature-line"></div>
                        <p><strong>HON. JUAN DELA CRUZ</strong><br>Barangay Captain</p>
                    </div>
                    
                    <div class="signature-box">
                        <div class="signature-line"></div>
                        <p><strong>MARIA SANTOS</strong><br>Barangay Secretary</p>
                    </div>
                </div>
            </div>
            
            <div class="nav-buttons" style="margin-top: 30px;">
                <button class="nav-btn secondary-btn" id="previewCertificate">
                    <i class="fas fa-eye"></i> Update Preview
                </button>
                <button class="nav-btn primary-btn" id="printCertificate">
                    <i class="fas fa-print"></i> Print Certificate
                </button>
                <button class="nav-btn success-btn" id="saveCertificate">
                    <i class="fas fa-save"></i> Save & Generate
                </button>
            </div>
        </div>

        <!-- Reports Dashboard -->
        <div id="reportsDashboardScreen" class="screen hidden">
            <h2>
                Reports Dashboard
                <button class="nav-btn secondary-btn" id="backToDashboardFromReports">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <i class="fas fa-file-alt"></i>
                    <h3>156</h3>
                    <p>Applications This Month</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <h3>42</h3>
                    <p>New Residents This Year</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-certificate"></i>
                    <h3>89</h3>
                    <p>Certificates Issued</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-money-bill-wave"></i>
                    <h3>‚Ç±24,580</h3>
                    <p>Revenue This Month</p>
                </div>
            </div>
            
            <h3>Application Statistics</h3>
            <div class="chart-row">
                <div class="chart-container">
                    <h4>Applications by Type</h4>
                    <div style="height: 300px; display: flex; align-items: flex-end; justify-content: space-around; margin-top: 20px;">
                        <div style="text-align: center;">
                            <div style="height: 200px; width: 40px; background-color: var(--blue-medium); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Residency</div>
                            <div style="font-weight: bold;">45%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 150px; width: 40px; background-color: var(--green); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Indigency</div>
                            <div style="font-weight: bold;">25%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 100px; width: 40px; background-color: var(--orange); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Job Seeker</div>
                            <div style="font-weight: bold;">15%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 80px; width: 40px; background-color: var(--purple); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Business</div>
                            <div style="font-weight: bold;">10%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 50px; width: 40px; background-color: var(--red); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Others</div>
                            <div style="font-weight: bold;">5%</div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h4>Applications by Status</h4>
                    <div style="height: 300px; display: flex; align-items: center; justify-content: center; margin-top: 20px;">
                        <div style="width: 200px; height: 200px; border-radius: 50%; background: conic-gradient(var(--green) 0% 65%, var(--yellow) 65% 85%, var(--red) 85% 100%);"></div>
                    </div>
                    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--green); margin-right: 5px;"></span> Approved (65%)</div>
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--yellow); margin-right: 5px;"></span> Pending (20%)</div>
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--red); margin-right: 5px;"></span> Rejected (15%)</div>
                    </div>
                </div>
            </div>
            
            <h3>Monthly Report</h3>
            <div class="filter-controls">
                <div class="filter-group">
                    <label>Report Type</label>
                    <select id="reportType">
                        <option value="applications">Applications Report</option>
                        <option value="residents">Residents Report</option>
                        <option value="financial">Financial Report</option>
                        <option value="certificates">Certificates Report</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Month</label>
                    <select id="reportMonth">
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Year</label>
                    <select id="reportYear">
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                    </select>
                </div>
                
                <button class="nav-btn primary-btn filter-btn" id="generateReport">
                    <i class="fas fa-chart-bar"></i> Generate Report
                </button>
                
                <button class="nav-btn success-btn filter-btn" id="exportReport">
                    <i class="fas fa-download"></i> Export as PDF
                </button>
            </div>
            
            <div class="table-container" style="margin-top: 20px;">
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Application Type</th>
                            <th>Applicant</th>
                            <th>Status</th>
                            <th>Processed By</th>
                            <th>Processing Time</th>
                        </tr>
                    </thead>
                    <tbody id="reportTable">
                        <!-- Report data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Form View Modal -->
        <div id="formViewModal" class="modal-overlay hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Application Details</h2>
                    <button class="close-modal" id="closeModalBtn">&times;</button>
                </div>
                <div id="formViewContent">
                    <!-- Form content will be populated here -->
                </div>
                <div style="margin-top: 20px; text-align: center;">
                    <button class="nav-btn secondary-btn" id="closeModal">Close</button>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3><i class="fas fa-map-marker-alt"></i> Visit Us!</h3>
                <p>C2C5+FCQ, Aguirre Corner Sapphire, Pilar, Las Pi√±as, 1740 Metro Manila</p>
            </div>
            <div class="footer-section">
                <h3><i class="fas fa-phone-alt"></i> Contact Us!</h3>
                <p>0927 342 5375</p>
                <p>Office Hours: Mon-Fri 8:00 AM - 5:00 PM</p>
            </div>
            <div class="footer-section">
                <h3><i class="fas fa-info-circle"></i> About</h3>
                <p>Barangay Pilar Village Services Portal</p>
                <p>Official online service platform</p>
            </div>
        </div>
    </footer>

    <script>
        // Data Management
        let applicantsDatabase = JSON.parse(localStorage.getItem('applicantsDatabase')) || [];
        let residentsDatabase = JSON.parse(localStorage.getItem('residentsDatabase')) || [];
        
        // Initialize sample data if empty
        if (applicantsDatabase.length === 0) {
            const sampleApplicant = {
                id: Date.now(),
                photo: 'https://via.placeholder.com/120x120/0756CE/FFFFFF?text=Sample+Photo',
                lastName: 'SANTOS',
                firstName: 'JUAN',
                middleName: 'DELA CRUZ',
                blockLot: 'BLOCK 5, LOT 12',
                street: 'SAPPHIRE STREET',
                subdivision: 'PILAR VILLAGE',
                provincialAddress: 'BRGY. SAN ISIDRO, ABUCAY, BATAAN',
                contactNumber: '09171234567',
                age: '25',
                lengthStay: '2 years',
                birthday: 'January 15, 1999',
                birthPlace: 'MANILA, METRO MANILA',
                nationality: 'Filipino',
                sex: 'Male',
                civilStatus: 'Single',
                purpose: 'PROOF OF RESIDENCY',
                isFirstTimeJobSeeker: true,
                jobSeekerData: {
                    elementary: { name: 'Pilar Elementary School' },
                    juniorHigh: { name: 'Pilar National High School' },
                    seniorHigh: { name: 'Pilar Senior High School' },
                    college: { name: 'University of the Philippines', course: 'Business Administration' }
                },
                status: 'Pending',
                dateSubmitted: new Date().toLocaleDateString()
            };
            
            applicantsDatabase.push(sampleApplicant);
            localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
        }
        
        if (residentsDatabase.length === 0) {
            const sampleResidents = [
                { id: 1, lastName: 'DELA CRUZ', firstName: 'JUAN', middleName: 'SANTOS', birthdate: '1990-05-15', age: 33, civilStatus: 'Single', contact: '09123456789', email: 'juan@example.com', occupation: 'Teacher', blockLot: 'BLOCK 5, LOT 12', street: 'SAPPHIRE STREET', subdivision: 'PILAR VILLAGE', lengthStay: '5 years', notes: '' },
                { id: 2, lastName: 'SANTOS', firstName: 'MARIA', middleName: 'REYES', birthdate: '1985-08-22', age: 38, civilStatus: 'Married', contact: '09234567890', email: 'maria@example.com', occupation: 'Nurse', blockLot: 'BLOCK 3, LOT 8', street: 'DIAMOND STREET', subdivision: 'TERESA PARK', lengthStay: '10 years', notes: '' }
            ];
            
            residentsDatabase = sampleResidents;
            localStorage.setItem('residentsDatabase', JSON.stringify(residentsDatabase));
        }

        // DOM Elements
        const accessScreen = document.getElementById('accessScreen');
        const loginScreen = document.getElementById('loginScreen');
        const applicantForm = document.getElementById('applicantForm');
        const thankYouScreen = document.getElementById('thankYouScreen');
        const memberDashboard = document.getElementById('memberDashboard');
        const applicationsManagementScreen = document.getElementById('applicationsManagementScreen');
        const residentRegistrationScreen = document.getElementById('residentRegistrationScreen');
        const certificateGenerationScreen = document.getElementById('certificateGenerationScreen');
        const reportsDashboardScreen = document.getElementById('reportsDashboardScreen');
        const formViewModal = document.getElementById('formViewModal');
        const formViewContent = document.getElementById('formViewContent');
        
        // Buttons
        const applicantBtn = document.getElementById('applicantBtn');
        const memberBtn = document.getElementById('memberBtn');
        const backToAccessFromLogin = document.getElementById('backToAccessFromLogin');
        const backToAccessFromApplicant = document.getElementById('backToAccessFromApplicant');
        const cancelApplicantForm = document.getElementById('cancelApplicantForm');
        const backToHomeFromThankYou = document.getElementById('backToHomeFromThankYou');
        const logoutBtn = document.getElementById('logoutBtn');
        
        // Application form elements
        const applicationForm = document.getElementById('applicationForm');
        const firstTimeJobSeekerCheckbox = document.getElementById('firstTimeJobSeeker');
        const additionalJobSeekerForm = document.getElementById('additionalJobSeekerForm');
        const lengthStayInput = document.getElementById('lengthStay');
        const stayUnitSelect = document.getElementById('stayUnit');
        const nationalitySelect = document.getElementById('nationality');
        const newApplicationBtn = document.getElementById('newApplicationBtn');
        
        // Image upload elements
        const imageUpload = document.getElementById('imageUpload');
        const uploadTrigger = document.getElementById('uploadTrigger');
        const changePhotoBtn = document.getElementById('changePhotoBtn');
        const imagePreview = document.getElementById('imagePreview');
        const fileName = document.getElementById('fileName');
        
        // Dashboard navigation buttons
        const applicationsManagementBtn = document.getElementById('applicationsManagementBtn');
        const residentRegistrationBtn = document.getElementById('residentRegistrationBtn');
        const certificateGenerationBtn = document.getElementById('certificateGenerationBtn');
        const reportsDashboardBtn = document.getElementById('reportsDashboardBtn');
        
        // Back buttons from sub-screens
        const backToDashboardFromApps = document.getElementById('backToDashboardFromApps');
        const backToDashboardFromRegistration = document.getElementById('backToDashboardFromRegistration');
        const backToDashboardFromCertificates = document.getElementById('backToDashboardFromCertificates');
        const backToDashboardFromReports = document.getElementById('backToDashboardFromReports');
        
        // Modal buttons
        const closeModalBtn = document.getElementById('closeModalBtn');
        const closeModal = document.getElementById('closeModal');
        
        // Demo credentials
        const validCredentials = [
            { username: 'admin', password: 'barangay2023', name: 'Administrator' },
            { username: 'staff', password: 'pilarvillage', name: 'Staff Member' }
        ];

        // Sample activity data
        const sampleActivity = [
            { time: '10:30 AM', activity: 'Certificate of Residency approved', user: 'Juan Dela Cruz', status: 'approved' },
            { time: '9:15 AM', activity: 'First Time Job Seeker application submitted', user: 'Maria Santos', status: 'pending' },
            { time: 'Yesterday', activity: 'Barangay Meeting scheduled', user: 'System', status: 'info' },
            { time: 'Nov 28', activity: 'Database backup completed', user: 'System', status: 'info' },
            { time: 'Nov 27', activity: 'Certificate of Indigency rejected', user: 'Pedro Garcia', status: 'rejected' }
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            populateNationalityDropdown();
            setupEventListeners();
            updateDashboardStats();
            populateApplicationsTable();
            populateRecentActivity();
            populateReportTable();
        });

        function setupEventListeners() {
            // Main navigation
            applicantBtn.addEventListener('click', () => {
                accessScreen.classList.add('hidden');
                applicantForm.classList.remove('hidden');
                resetApplicationForm();
            });
            
            memberBtn.addEventListener('click', () => {
                accessScreen.classList.add('hidden');
                loginScreen.classList.remove('hidden');
            });
            
            backToAccessFromLogin.addEventListener('click', () => {
                loginScreen.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            backToAccessFromApplicant.addEventListener('click', () => {
                applicantForm.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            cancelApplicantForm.addEventListener('click', () => {
                if (confirm('Are you sure you want to cancel? All entered data will be lost.')) {
                    applicantForm.classList.add('hidden');
                    accessScreen.classList.remove('hidden');
                }
            });
            
            // Thank you screen navigation
            newApplicationBtn.addEventListener('click', function() {
                thankYouScreen.classList.add('hidden');
                applicantForm.classList.remove('hidden');
                resetApplicationForm();
            });
            
            backToHomeFromThankYou.addEventListener('click', () => {
                thankYouScreen.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            // Login form
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('username').value.trim();
                const password = document.getElementById('password').value;
                
                const validUser = validCredentials.find(
                    cred => cred.username === username && cred.password === password
                );
                
                if (validUser) {
                    document.getElementById('loginError').style.display = 'none';
                    document.getElementById('loggedInUser').textContent = validUser.name;
                    loginScreen.classList.add('hidden');
                    memberDashboard.classList.remove('hidden');
                    this.reset();
                    updateDashboardStats();
                    populateApplicationsTable();
                } else {
                    document.getElementById('loginError').style.display = 'block';
                    document.getElementById('password').value = '';
                }
            });
            
            // Logout
            logoutBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            // Dashboard navigation
            applicationsManagementBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                applicationsManagementScreen.classList.remove('hidden');
                populateApplicationsTable();
            });
            
            residentRegistrationBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                residentRegistrationScreen.classList.remove('hidden');
            });
            
            certificateGenerationBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                certificateGenerationScreen.classList.remove('hidden');
            });
            
            reportsDashboardBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                reportsDashboardScreen.classList.remove('hidden');
            });
            
            // Back buttons
            backToDashboardFromApps.addEventListener('click', () => {
                applicationsManagementScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            backToDashboardFromRegistration.addEventListener('click', () => {
                residentRegistrationScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            backToDashboardFromCertificates.addEventListener('click', () => {
                certificateGenerationScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            backToDashboardFromReports.addEventListener('click', () => {
                reportsDashboardScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            // Application form event listeners
            // Image upload handling
            uploadTrigger.addEventListener('click', () => {
                imageUpload.click();
            });
            
            changePhotoBtn.addEventListener('click', () => {
                imageUpload.click();
            });
            
            imageUpload.addEventListener('change', function() {
                if (this.files && this.files[0]) {
                    const file = this.files[0];
                    
                    // Check file type
                    if (!file.type.match('image/png') && !file.type.match('image/jpeg')) {
                        alert('Please upload a PNG or JPG image file.');
                        this.value = '';
                        return;
                    }
                    
                    // Check file size (max 5MB)
                    if (file.size > 5 * 1024 * 1024) {
                        alert('File size should be less than 5MB.');
                        this.value = '';
                        return;
                    }
                    
                    // Display file name
                    fileName.textContent = `Selected file: ${file.name}`;
                    
                    // Preview image
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        imagePreview.src = e.target.result;
                        imagePreview.style.display = 'block';
                        
                        // Hide upload button and show change button
                        uploadTrigger.classList.add('hidden');
                        changePhotoBtn.classList.remove('hidden');
                    }
                    reader.readAsDataURL(file);
                }
            });
            
            // First Time Job Seeker Checkbox
            firstTimeJobSeekerCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    additionalJobSeekerForm.classList.remove('hidden');
                } else {
                    hideAdditionalForm();
                }
            });
            
            // School checkbox handlers
            document.querySelectorAll('.school-checkbox input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const schoolNameInput = document.getElementById(this.id + 'Name');
                    const courseInput = document.getElementById(this.id.replace('School', 'Course'));
                    
                    if (this.checked) {
                        schoolNameInput.classList.remove('hidden');
                        schoolNameInput.required = true;
                        
                        // Show course input for college or vocational school
                        if (courseInput) {
                            courseInput.classList.remove('hidden');
                            courseInput.required = true;
                        }
                    } else {
                        schoolNameInput.classList.add('hidden');
                        schoolNameInput.required = false;
                        schoolNameInput.value = '';
                        
                        if (courseInput) {
                            courseInput.classList.add('hidden');
                            courseInput.required = false;
                            courseInput.value = '';
                        }
                    }
                });
            });
            
            // Length of Stay validation
            stayUnitSelect.addEventListener('change', function() {
                if (this.value === 'months') {
                    lengthStayInput.min = 6;
                    if (lengthStayInput.value && parseInt(lengthStayInput.value) < 6) {
                        lengthStayInput.value = 6;
                    }
                } else {
                    lengthStayInput.min = 1;
                }
            });
            
            // CAPITAL LETTERS ENFORCEMENT
            // Function to check if text contains lowercase letters
            function hasLowercase(text) {
                return /[a-z]/.test(text);
            }
            
            // Function to validate capital letters for a field
            function validateCapitalLetters(inputElement, errorElementId) {
                const value = inputElement.value;
                const errorElement = document.getElementById(errorElementId);
                
                if (value && hasLowercase(value)) {
                    inputElement.classList.add('invalid-input');
                    errorElement.style.display = 'block';
                    return false;
                } else {
                    inputElement.classList.remove('invalid-input');
                    errorElement.style.display = 'none';
                    return true;
                }
            }
            
            // Real-time validation for all text fields
            const textInputs = [
                { id: 'lastName', errorId: 'lastNameError' },
                { id: 'firstName', errorId: 'firstNameError' },
                { id: 'middleName', errorId: 'middleNameError' },
                { id: 'blockLot', errorId: 'blockLotError' },
                { id: 'street', errorId: 'streetError' },
                { id: 'provincialAddress', errorId: 'provincialAddressError' },
                { id: 'birthPlace', errorId: 'birthPlaceError' },
                { id: 'elementarySchoolName', errorId: 'elementarySchoolError' },
                { id: 'juniorHighSchoolName', errorId: 'juniorHighSchoolError' },
                { id: 'seniorHighSchoolName', errorId: 'seniorHighSchoolError' },
                { id: 'collegeName', errorId: 'collegeNameError' },
                { id: 'collegeCourse', errorId: 'collegeCourseError' },
                { id: 'vocationalSchoolName', errorId: 'vocationalSchoolError' },
                { id: 'vocationalCourse', errorId: 'vocationalCourseError' }
            ];
            
            // Add event listeners for real-time validation
            textInputs.forEach(field => {
                const inputElement = document.getElementById(field.id);
                if (inputElement) {
                    inputElement.addEventListener('input', function() {
                        // Convert input to uppercase as user types
                        this.value = this.value.toUpperCase();
                        
                        // Validate capital letters
                        validateCapitalLetters(this, field.errorId);
                    });
                    
                    inputElement.addEventListener('blur', function() {
                        validateCapitalLetters(this, field.errorId);
                    });
                }
            });
            
            // For textarea elements (provincial address)
            const provincialAddress = document.getElementById('provincialAddress');
            provincialAddress.addEventListener('input', function() {
                this.value = this.value.toUpperCase();
                validateCapitalLetters(this, 'provincialAddressError');
            });
            
            provincialAddress.addEventListener('blur', function() {
                validateCapitalLetters(this, 'provincialAddressError');
            });
            
            // Form Submission with capital letters validation
            applicationForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Validate image upload
                if (!imagePreview.src || imagePreview.style.display === 'none') {
                    alert('Please upload a formal image of the applicant.');
                    uploadTrigger.focus();
                    return;
                }
                
                // Validate length of stay (minimum 6 months if months is selected)
                const lengthStay = lengthStayInput.value;
                const stayUnit = stayUnitSelect.value;
                
                if (stayUnit === 'months' && lengthStay < 6) {
                    alert("Minimum length of stay should be 6 months when selecting 'Months' as the unit.");
                    lengthStayInput.focus();
                    return;
                }
                
                // Validate capital letters for all text fields
                let allFieldsValid = true;
                textInputs.forEach(field => {
                    const inputElement = document.getElementById(field.id);
                    if (inputElement && inputElement.value.trim() !== '') {
                        if (!validateCapitalLetters(inputElement, field.errorId)) {
                            allFieldsValid = false;
                            inputElement.focus();
                        }
                    }
                });
                
                if (!allFieldsValid) {
                    alert("Please use CAPITAL LETTERS for all text fields.");
                    return;
                }
                
                // Validate first time job seeker additional info
                let jobSeekerData = null;
                if (firstTimeJobSeekerCheckbox.checked) {
                    const selectedSchools = document.querySelectorAll('.school-checkbox input[type="checkbox"]:checked');
                    if (selectedSchools.length === 0) {
                        alert("Please select at least one educational background for first time job seekers.");
                        return;
                    }
                    
                    // Check that school names are provided for selected schools
                    let allValid = true;
                    jobSeekerData = {};
                    
                    selectedSchools.forEach(schoolCheckbox => {
                        const schoolNameInput = document.getElementById(schoolCheckbox.id + 'Name');
                        if (!schoolNameInput.value.trim()) {
                            allValid = false;
                            schoolNameInput.focus();
                        } else {
                            const schoolType = schoolCheckbox.id.replace('School', '');
                            jobSeekerData[schoolType] = {
                                name: schoolNameInput.value.trim()
                            };
                            
                            // Add course if applicable
                            const courseInput = document.getElementById(schoolCheckbox.id.replace('School', 'Course'));
                            if (courseInput && courseInput.value.trim()) {
                                jobSeekerData[schoolType].course = courseInput.value.trim();
                            }
                        }
                    });
                    
                    if (!allValid) {
                        alert("Please provide the name of the school/institution for each selected educational background.");
                        return;
                    }
                }
                
                // Create applicant object with image data
                const applicant = {
                    id: Date.now(), // Simple ID generation
                    photo: imagePreview.src,
                    lastName: document.getElementById('lastName').value.toUpperCase(),
                    firstName: document.getElementById('firstName').value.toUpperCase(),
                    middleName: document.getElementById('middleName').value.toUpperCase(),
                    blockLot: document.getElementById('blockLot').value.toUpperCase(),
                    street: document.getElementById('street').value.toUpperCase(),
                    subdivision: document.getElementById('subdivision').value,
                    provincialAddress: document.getElementById('provincialAddress').value.toUpperCase(),
                    contactNumber: document.getElementById('contactNumber').value,
                    age: document.getElementById('age').value,
                    lengthStay: lengthStay + ' ' + stayUnit,
                    birthday: formatDate(document.getElementById('birthday').value),
                    birthPlace: document.getElementById('birthPlace').value.toUpperCase(),
                    nationality: document.getElementById('nationality').value,
                    sex: document.getElementById('sex').value,
                    civilStatus: document.getElementById('civilStatus').value,
                    purpose: document.getElementById('purpose').value,
                    isFirstTimeJobSeeker: firstTimeJobSeekerCheckbox.checked,
                    jobSeekerData: jobSeekerData,
                    status: 'Pending',
                    dateSubmitted: new Date().toLocaleDateString()
                };
                
                // Add to database
                applicantsDatabase.push(applicant);
                localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
                
                // Show thank you screen
                applicantForm.classList.add('hidden');
                thankYouScreen.classList.remove('hidden');
            });
            
            // Applications Management
            document.getElementById('applyFilters').addEventListener('click', applyFilters);
            document.getElementById('resetFilters').addEventListener('click', resetFilters);
            document.getElementById('exportApplications').addEventListener('click', () => {
                alert('Exporting applications to Excel...');
            });
            
            // Certificate Generation
            document.getElementById('certificateType').addEventListener('change', updateCertificatePreview);
            document.getElementById('certificateRecipient').addEventListener('input', showResidentSuggestions);
            document.getElementById('previewCertificate').addEventListener('click', updateCertificatePreview);
            document.getElementById('printCertificate').addEventListener('click', () => {
                window.print();
            });
            document.getElementById('saveCertificate').addEventListener('click', () => {
                alert('Certificate saved and generated successfully!');
            });
            
            // Reports
            document.getElementById('generateReport').addEventListener('click', generateReport);
            document.getElementById('exportReport').addEventListener('click', () => {
                alert('Report exported as PDF successfully!');
            });
            
            // Resident Registration
            document.getElementById('residentRegistrationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const resident = {
                    id: Date.now(),
                    lastName: document.getElementById('residentLastName').value.toUpperCase(),
                    firstName: document.getElementById('residentFirstName').value.toUpperCase(),
                    middleName: document.getElementById('residentMiddleName').value.toUpperCase(),
                    birthdate: document.getElementById('residentBirthdate').value,
                    age: document.getElementById('residentAge').value,
                    civilStatus: document.getElementById('residentCivilStatus').value,
                    contact: document.getElementById('residentContact').value,
                    email: document.getElementById('residentEmail').value,
                    occupation: document.getElementById('residentOccupation').value.toUpperCase(),
                    blockLot: document.getElementById('residentBlockLot').value.toUpperCase(),
                    street: document.getElementById('residentStreet').value.toUpperCase(),
                    subdivision: document.getElementById('residentSubdivision').value,
                    lengthStay: document.getElementById('residentLengthStay').value + ' ' + document.getElementById('residentStayUnit').value,
                    notes: document.getElementById('residentNotes').value,
                    dateRegistered: new Date().toLocaleDateString()
                };
                
                residentsDatabase.push(resident);
                localStorage.setItem('residentsDatabase', JSON.stringify(residentsDatabase));
                
                alert('Resident registered successfully!');
                this.reset();
                
                // Update dashboard stats
                updateDashboardStats();
            });
            
            // Modal close buttons
            closeModalBtn.addEventListener('click', () => {
                formViewModal.classList.add('hidden');
            });
            
            closeModal.addEventListener('click', () => {
                formViewModal.classList.add('hidden');
            });
            
            // Close modal when clicking outside
            formViewModal.addEventListener('click', (e) => {
                if (e.target === formViewModal) {
                    formViewModal.classList.add('hidden');
                }
            });
        }

        // Application Management Functions
        function populateApplicationsTable() {
            const tableBody = document.getElementById('applicationsTable');
            tableBody.innerHTML = '';
            
            if (applicantsDatabase.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `<td colspan="6" style="text-align: center; padding: 30px;">No applications found</td>`;
                tableBody.appendChild(row);
                return;
            }
            
            applicantsDatabase.forEach(app => {
                const row = document.createElement('tr');
                
                let statusClass = 'status-pending';
                if (app.status === 'Approved') statusClass = 'status-approved';
                if (app.status === 'Rejected') statusClass = 'status-rejected';
                
                row.innerHTML = `
                    <td>${app.id}</td>
                    <td>${app.lastName}, ${app.firstName} ${app.middleName || ''}</td>
                    <td>${app.purpose}</td>
                    <td>${app.dateSubmitted}</td>
                    <td><span class="status-badge ${statusClass}">${app.status.toUpperCase()}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn view-btn" onclick="viewApplicationDetails(${app.id})">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="action-btn approve-btn" onclick="approveApplication(${app.id})">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="action-btn reject-btn" onclick="rejectApplication(${app.id})">
                                <i class="fas fa-times"></i> Reject
                            </button>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // Update pagination info
            document.getElementById('paginationInfo').textContent = `Showing ${applicantsDatabase.length} applications`;
        }

        function viewApplicationDetails(appId) {
            const applicant = applicantsDatabase.find(app => app.id === appId);
            
            if (!applicant) {
                alert('Application not found!');
                return;
            }
            
            let jobSeekerInfo = '';
            if (applicant.isFirstTimeJobSeeker && applicant.jobSeekerData) {
                jobSeekerInfo = '<h3>Educational Background</h3>';
                for (const [key, data] of Object.entries(applicant.jobSeekerData)) {
                    jobSeekerInfo += `<p><strong>${key}:</strong> ${data.name}${data.course ? ` (${data.course})` : ''}</p>`;
                }
            }
            
            formViewContent.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <img src="${applicant.photo}" alt="Applicant Photo" style="width: 150px; height: 150px; object-fit: cover; border: 3px solid var(--blue-light); border-radius: 8px;">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Last Name</label>
                        <input type="text" value="${applicant.lastName}" readonly>
                    </div>
                    <div class="form-group">
                        <label>First Name</label>
                        <input type="text" value="${applicant.firstName}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Middle Name</label>
                        <input type="text" value="${applicant.middleName || ''}" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Block and Lot</label>
                        <input type="text" value="${applicant.blockLot}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Street</label>
                        <input type="text" value="${applicant.street}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Subdivision</label>
                        <input type="text" value="${applicant.subdivision}" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <label>Provincial Address</label>
                    <textarea rows="3" readonly>${applicant.provincialAddress}</textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Contact Number</label>
                        <input type="text" value="${applicant.contactNumber}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Age</label>
                        <input type="text" value="${applicant.age}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Length of Stay</label>
                        <input type="text" value="${applicant.lengthStay}" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Birthday</label>
                        <input type="text" value="${applicant.birthday}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Place of Birth</label>
                        <input type="text" value="${applicant.birthPlace}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Nationality</label>
                        <input type="text" value="${applicant.nationality}" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Sex</label>
                        <input type="text" value="${applicant.sex}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Civil Status</label>
                        <input type="text" value="${applicant.civilStatus}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Purpose</label>
                        <input type="text" value="${applicant.purpose}" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <label>First Time Job Seeker</label>
                    <input type="text" value="${applicant.isFirstTimeJobSeeker ? 'YES' : 'NO'}" readonly>
                </div>
                ${jobSeekerInfo}
                <div class="form-row">
                    <div class="form-group">
                        <label>Status</label>
                        <input type="text" value="${applicant.status}" readonly style="font-weight: bold; color: ${applicant.status === 'Approved' ? 'green' : applicant.status === 'Rejected' ? 'red' : 'orange'}">
                    </div>
                    <div class="form-group">
                        <label>Date Submitted</label>
                        <input type="text" value="${applicant.dateSubmitted}" readonly>
                    </div>
                </div>
            `;
            
            formViewModal.classList.remove('hidden');
        }

        function approveApplication(appId) {
            if (confirm('Approve this application?')) {
                const applicantIndex = applicantsDatabase.findIndex(app => app.id === appId);
                if (applicantIndex !== -1) {
                    applicantsDatabase[applicantIndex].status = 'Approved';
                    localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
                    populateApplicationsTable();
                    updateDashboardStats();
                    alert('Application approved successfully!');
                }
            }
        }

        function rejectApplication(appId) {
            if (confirm('Reject this application?')) {
                const applicantIndex = applicantsDatabase.findIndex(app => app.id === appId);
                if (applicantIndex !== -1) {
                    applicantsDatabase[applicantIndex].status = 'Rejected';
                    localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
                    populateApplicationsTable();
                    updateDashboardStats();
                    alert('Application rejected successfully!');
                }
            }
        }

        function applyFilters() {
            const typeFilter = document.getElementById('filterType').value;
            const statusFilter = document.getElementById('filterStatus').value;
            const dateFilter = document.getElementById('filterDate').value;
            
            // Filter applications based on criteria
            let filteredApplications = applicantsDatabase;
            
            if (typeFilter !== 'all') {
                filteredApplications = filteredApplications.filter(app => 
                    app.purpose.toLowerCase().includes(typeFilter.toLowerCase())
                );
            }
            
            if (statusFilter !== 'all') {
                filteredApplications = filteredApplications.filter(app => 
                    app.status.toLowerCase() === statusFilter.toLowerCase()
                );
            }
            
            if (dateFilter) {
                filteredApplications = filteredApplications.filter(app => 
                    app.dateSubmitted === dateFilter
                );
            }
            
            // Update table with filtered applications
            const tableBody = document.getElementById('applicationsTable');
            tableBody.innerHTML = '';
            
            filteredApplications.forEach(app => {
                const row = document.createElement('tr');
                
                let statusClass = 'status-pending';
                if (app.status === 'Approved') statusClass = 'status-approved';
                if (app.status === 'Rejected') statusClass = 'status-rejected';
                
                row.innerHTML = `
                    <td>${app.id}</td>
                    <td>${app.lastName}, ${app.firstName} ${app.middleName || ''}</td>
                    <td>${app.purpose}</td>
                    <td>${app.dateSubmitted}</td>
                    <td><span class="status-badge ${statusClass}">${app.status.toUpperCase()}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn view-btn" onclick="viewApplicationDetails(${app.id})">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="action-btn approve-btn" onclick="approveApplication(${app.id})">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="action-btn reject-btn" onclick="rejectApplication(${app.id})">
                                <i class="fas fa-times"></i> Reject
                            </button>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            if (filteredApplications.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `<td colspan="6" style="text-align: center; padding: 30px;">No applications match the selected filters</td>`;
                tableBody.appendChild(row);
            }
            
            document.getElementById('paginationInfo').textContent = `Showing ${filteredApplications.length} applications`;
        }

        function resetFilters() {
            document.getElementById('filterType').value = 'all';
            document.getElementById('filterStatus').value = 'all';
            document.getElementById('filterDate').value = '';
            populateApplicationsTable();
        }

        // Dashboard Functions
        function updateDashboardStats() {
            // Pending applications
            const pendingApps = applicantsDatabase.filter(app => app.status === 'Pending').length;
            document.getElementById('pendingApplications').textContent = pendingApps;
            
            // Processed today
            const today = new Date().toLocaleDateString();
            const processedToday = applicantsDatabase.filter(app => 
                app.dateSubmitted === today && app.status !== 'Pending'
            ).length;
            document.getElementById('processedToday').textContent = processedToday;
            
            // Total residents
            document.getElementById('totalResidents').textContent = residentsDatabase.length;
        }

        function populateRecentActivity() {
            const tableBody = document.getElementById('recentActivity');
            tableBody.innerHTML = '';
            
            sampleActivity.forEach(activity => {
                const row = document.createElement('tr');
                
                let statusBadge = '';
                if (activity.status === 'approved') {
                    statusBadge = '<span class="status-badge status-approved">APPROVED</span>';
                } else if (activity.status === 'rejected') {
                    statusBadge = '<span class="status-badge status-rejected">REJECTED</span>';
                } else {
                    statusBadge = '<span class="status-badge status-pending">INFO</span>';
                }
                
                row.innerHTML = `
                    <td>${activity.time}</td>
                    <td>${activity.activity}</td>
                    <td>${activity.user}</td>
                    <td>${statusBadge}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function populateReportTable() {
            const tableBody = document.getElementById('reportTable');
            tableBody.innerHTML = '';
            
            // Add sample report data
            for (let i = 1; i <= 10; i++) {
                const date = `2023-11-${i.toString().padStart(2, '0')}`;
                const types = ['Certificate of Residency', 'First Time Job Seeker', 'Certificate of Indigency', 'Business Permit'];
                const type = types[Math.floor(Math.random() * types.length)];
                const resident = applicantsDatabase[Math.floor(Math.random() * Math.min(applicantsDatabase.length, 5))] || { lastName: 'Sample', firstName: 'Applicant' };
                const statuses = ['Pending', 'Approved', 'Rejected'];
                const status = statuses[Math.floor(Math.random() * statuses.length)];
                const officers = ['Juan Dela Cruz', 'Maria Santos', 'Pedro Garcia'];
                const officer = officers[Math.floor(Math.random() * officers.length)];
                const time = `${Math.floor(Math.random() * 3) + 1} days`;
                
                let statusClass = 'status-pending';
                if (status === 'Approved') statusClass = 'status-approved';
                if (status === 'Rejected') statusClass = 'status-rejected';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${date}</td>
                    <td>${type}</td>
                    <td>${resident ? resident.lastName + ', ' + resident.firstName : 'Sample Applicant'}</td>
                    <td><span class="status-badge ${statusClass}">${status.toUpperCase()}</span></td>
                    <td>${officer}</td>
                    <td>${time}</td>
                `;
                
                tableBody.appendChild(row);
            }
        }

        // Certificate Generation Functions
        function updateCertificatePreview() {
            const type = document.getElementById('certificateType').value;
            const recipient = document.getElementById('certificateRecipient').value || '[RECIPIENT NAME]';
            const purpose = document.getElementById('certificatePurpose').value || '[PURPOSE]';
            const date = document.getElementById('certificateDate').value || new Date().toISOString().split('T')[0];
            
            // Update preview
            document.getElementById('previewCertificateType').textContent = 
                type === 'residency' ? 'CERTIFICATE OF RESIDENCY' :
                type === 'indigency' ? 'CERTIFICATE OF INDIGENCY' :
                type === 'goodmoral' ? 'CERTIFICATE OF GOOD MORAL CHARACTER' :
                type === 'employment' ? 'CERTIFICATE OF EMPLOYMENT' :
                type === 'nocriminal' ? 'NO CRIMINAL RECORD' :
                type === 'soloparent' ? 'SOLO PARENT CERTIFICATION' :
                'CERTIFICATE';
            
            document.getElementById('previewRecipient').textContent = recipient;
            document.getElementById('previewPurpose').textContent = purpose;
            document.getElementById('previewDate').textContent = formatDate(date);
            
            // Set sample address and length of stay
            document.getElementById('previewAddress').textContent = 'Block 5, Lot 12, Pilar Village';
            document.getElementById('previewLengthStay').textContent = '5 years';
        }

        function showResidentSuggestions() {
            const input = document.getElementById('certificateRecipient').value.toLowerCase();
            const suggestionsDiv = document.getElementById('residentSuggestions');
            
            if (input.length < 2) {
                suggestionsDiv.style.display = 'none';
                return;
            }
            
            const filtered = residentsDatabase.filter(r => 
                (r.lastName + ' ' + r.firstName).toLowerCase().includes(input)
            );
            
            if (filtered.length > 0) {
                suggestionsDiv.innerHTML = filtered.map(r => 
                    `<div style="padding: 5px; border-bottom: 1px solid #eee; cursor: pointer;" 
                          onclick="selectResident('${r.lastName}, ${r.firstName}', '${r.blockLot}, ${r.street}, ${r.subdivision}')">
                        ${r.lastName}, ${r.firstName} - ${r.blockLot}, ${r.street}, ${r.subdivision}
                    </div>`
                ).join('');
                suggestionsDiv.style.display = 'block';
            } else {
                suggestionsDiv.style.display = 'none';
            }
        }

        function selectResident(name, address) {
            document.getElementById('certificateRecipient').value = name;
            document.getElementById('residentSuggestions').style.display = 'none';
            // You could also populate address fields if needed
        }

        function generateReport() {
            const type = document.getElementById('reportType').value;
            const month = document.getElementById('reportMonth').value;
            const year = document.getElementById('reportYear').value;
            
            alert(`Generating ${type} report for ${getMonthName(month)} ${year}...\n\nIn a real system, this would fetch data from the database and update the report table.`);
        }

        // Helper Functions
        function resetApplicationForm() {
            applicationForm.reset();
            hideAdditionalForm();
            resetImageUpload();
            clearAllErrorMessages();
            
            // Initialize length stay validation
            stayUnitSelect.dispatchEvent(new Event('change'));
        }

        function hideAdditionalForm() {
            additionalJobSeekerForm.classList.add('hidden');
            
            // Uncheck all school checkboxes
            document.querySelectorAll('.school-checkbox input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            
            // Hide all school name inputs
            document.querySelectorAll('.school-name-input, .course-input').forEach(input => {
                input.classList.add('hidden');
                input.value = '';
                input.required = false;
            });
        }

        function resetImageUpload() {
            imagePreview.style.display = 'none';
            imagePreview.src = '';
            fileName.textContent = '';
            imageUpload.value = '';
            // Show upload button, hide change button
            uploadTrigger.classList.remove('hidden');
            changePhotoBtn.classList.add('hidden');
        }

        function clearAllErrorMessages() {
            const textInputs = [
                { id: 'lastName', errorId: 'lastNameError' },
                { id: 'firstName', errorId: 'firstNameError' },
                { id: 'middleName', errorId: 'middleNameError' },
                { id: 'blockLot', errorId: 'blockLotError' },
                { id: 'street', errorId: 'streetError' },
                { id: 'provincialAddress', errorId: 'provincialAddressError' },
                { id: 'birthPlace', errorId: 'birthPlaceError' },
                { id: 'elementarySchoolName', errorId: 'elementarySchoolError' },
                { id: 'juniorHighSchoolName', errorId: 'juniorHighSchoolError' },
                { id: 'seniorHighSchoolName', errorId: 'seniorHighSchoolError' },
                { id: 'collegeName', errorId: 'collegeNameError' },
                { id: 'collegeCourse', errorId: 'collegeCourseError' },
                { id: 'vocationalSchoolName', errorId: 'vocationalSchoolError' },
                { id: 'vocationalCourse', errorId: 'vocationalCourseError' }
            ];
            
            textInputs.forEach(field => {
                const inputElement = document.getElementById(field.id);
                const errorElement = document.getElementById(field.errorId);
                
                if (inputElement) {
                    inputElement.classList.remove('invalid-input');
                }
                
                if (errorElement) {
                    errorElement.style.display = 'none';
                }
            });
        }

        function populateNationalityDropdown() {
            // List of all nationalities/countries
            const nationalities = [
                "FILIPINO", "AFGHAN", "ALBANIAN", "ALGERIAN", "AMERICAN", "ANDORRAN", "ANGOLAN", 
                "ANTIGUAN", "ARGENTINE", "ARMENIAN", "AUSTRALIAN", "AUSTRIAN", "AZERBAIJANI", 
                "BAHAMIAN", "BAHRAINI", "BANGLADESHI", "BARBADIAN", "BELARUSIAN", "BELGIAN", 
                "BELIZEAN", "BENINESE", "BHUTANESE", "BOLIVIAN", "BOSNIAN", "BOTSWANAN", 
                "BRAZILIAN", "BRITISH", "BRUNEIAN", "BULGARIAN", "BURKINABE", "BURMESE", 
                "BURUNDIAN", "CAMBODIAN", "CAMEROONIAN", "CANADIAN", "CAPE VERDEAN", 
                "CENTRAL AFRICAN", "CHADIAN", "CHILEAN", "CHINESE", "COLOMBIAN", "COMORAN", 
                "CONGOLESE", "COSTA RICAN", "CROATIAN", "CUBAN", "CYPRIOT", "CZECH", 
                "DANISH", "DJIBOUTIAN", "DOMINICAN", "DUTCH", "EAST TIMORESE", "ECUADOREAN", 
                "EGYPTIAN", "EMIRATI", "EQUATORIAL GUINEAN", "ERITREAN", "ESTONIAN", 
                "ETHIOPIAN", "FIJIAN", "FINNISH", "FRENCH", "GABONESE", "GAMBIAN", 
                "GEORGIAN", "GERMAN", "GHANAIAN", "GREEK", "GRENADIAN", "GUATEMALAN", 
                "GUINEAN", "GUYANESE", "HAITIAN", "HONDURAN", "HUNGARIAN", "ICELANDIC", 
                "INDIAN", "INDONESIAN", "IRANIAN", "IRAQI", "IRISH", "ISRAELI", "ITALIAN", 
                "IVORIAN", "JAMAICAN", "JAPANESE", "JORDANIAN", "KAZAKH", "KENYAN", 
                "KIRIBATI", "KOREAN", "KOSOVAR", "KUWAITI", "KYRGYZ", "LAOTIAN", "LATVIAN", 
                "LEBANESE", "LIBERIAN", "LIBYAN", "LIECHTENSTEINER", "LITHUANIAN", 
                "LUXEMBOURGER", "MACEDONIAN", "MALAGASY", "MALAWIAN", "MALAYSIAN", 
                "MALDIVIAN", "MALIAN", "MALTESE", "MARSHALLESE", "MAURITANIAN", "MAURITIAN", 
                "MEXICAN", "MICRONESIAN", "MOLDOVAN", "MONACAN", "MONGOLIAN", "MONTENEGRIN", 
                "MOROCCAN", "MOSOTHO", "MOZAMBICAN", "NAMIBIAN", "NAURUAN", "NEPALESE", 
                "NEW ZEALANDER", "NICARAGUAN", "NIGERIAN", "NIGERIEN", "NIUEAN", "NORWEGIAN", 
                "OMANI", "PAKISTANI", "PALAUAN", "PALESTINIAN", "PANAMANIAN", "PAPUA NEW GUINEAN", 
                "PARAGUAYAN", "PERUVIAN", "POLISH", "PORTUGUESE", "QATARI", "ROMANIAN", 
                "RUSSIAN", "RWANDAN", "SAINT LUCIAN", "SALVADORAN", "SAMOAN", "SAN MARINESE", 
                "SAO TOMEAN", "SAUDI", "SCOTTISH", "SENEGALESE", "SERBIAN", "SEYCHELLOIS", 
                "SIERRA LEONEAN", "SINGAPOREAN", "SLOVAK", "SLOVENIAN", "SOLOMON ISLANDER", 
                "SOMALI", "SOUTH AFRICAN", "SOUTH KOREAN", "SOUTH SUDANESE", "SPANISH", 
                "SRI LANKAN", "SUDANESE", "SURINAMER", "SWAZI", "SWEDISH", "SWISS", 
                "SYRIAN", "TAIWANESE", "TAJIK", "TANZANIAN", "THAI", "TOGOLESE", "TONGAN", 
                "TRINIDADIAN", "TUNISIAN", "TURKISH", "TURKMEN", "TUVALUAN", "UGANDAN", 
                "UKRAINIAN", "URUGUAYAN", "UZBEK", "VANUATUAN", "VENEZUELAN", "VIETNAMESE", 
                "WELSH", "YEMENI", "ZAMBIAN", "ZIMBABWEAN"
            ];

            // Sort nationalities alphabetically but keep FILIPINO first
            nationalities.sort((a, b) => {
                if (a === "FILIPINO") return -1;
                if (b === "FILIPINO") return 1;
                return a.localeCompare(b);
            });

            // Populate nationality dropdown with ALL CAPS
            nationalities.forEach(nationality => {
                const option = document.createElement('option');
                option.value = nationality;
                option.textContent = nationality;
                nationalitySelect.appendChild(option);
            });

            // Set FILIPINO as selected by default
            setTimeout(() => {
                const filipinoOption = nationalitySelect.querySelector('option[value="FILIPINO"]');
                if (filipinoOption) {
                    filipinoOption.selected = true;
                }
            }, 100);
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('en-US', options);
        }

        function getMonthName(monthNumber) {
            const months = [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ];
            return months[parseInt(monthNumber) - 1] || '';
        }

        // Initialize certificate preview
        updateCertificatePreview();
        
        // Set today's date as default for certificate date
        document.getElementById('certificateDate').value = new Date().toISOString().split('T')[0];
        document.getElementById('residentBirthdate').value = new Date(new Date().setFullYear(new Date().getFullYear() - 30)).toISOString().split('T')[0];
    </script>
</body>
</html>
Key Features of the Combined System:
Integrated Navigation: The "Open as Applicant" button now takes users directly to the application form.

Complete Workflow:

Applicants fill out the form (with photo upload and capital letters enforcement)

After submission, application goes to "Pending" status

Applicants see a thank you screen with option to submit another application

Barangay Member Features:

Login with demo credentials (admin/barangay2023 or staff/pilarvillage)

Applications Management dashboard to view all submissions

Ability to approve or reject applications

View detailed application forms including uploaded photos

Data Persistence: All applications are stored in localStorage, so data persists between sessions.

Additional Features:

Resident registration

Certificate generation

Reports dashboard

Filtering and searching capabilities

Responsive Design: Works on both desktop and mobile devices.

The system now provides a complete workflow from application submission to management and processing by barangay staff.

This response is AI-generated, for reference only.
can you make it so that the names are in alphabetical order without changing anything that is part of the code:

                <div class="form-group">
                    <label for="purpose" class="required">Purpose of Application</label>
                    <select id="purpose" required>
                        <option value="" disabled selected>Select Purpose</option>
                        <option value="PROOF OF RESIDENCY">PROOF OF RESIDENCY</option>
                        <option value="PROOF OF INDIGENCY">PROOF OF INDIGENCY</option>
                        <option value="POSTAL ID REQUIREMENT">POSTAL ID REQUIREMENT</option>
                        <option value="PWD ID REQUIREMENT">PWD ID REQUIREMENT</option>
                        <option value="SENIOR CITIZEN ID REQUIREMENT">SENIOR CITIZEN ID REQUIREMENT</option>
                        <option value="MEDICAL ASSISTANCE/FINANCIAL">MEDICAL ASSISTANCE/FINANCIAL</option>
                        <option value="EDUCATIONAL ASSISTANCE">EDUCATIONAL ASSISTANCE</option>
                        <option value="GREENCARD APPLICATION/RENEWAL">GREENCARD APPLICATION/RENEWAL</option>
                        <option value="LOCAL EMPLOYMENT">LOCAL EMPLOYMENT</option>
                        <option value="SCHOOL REQUIREMENT">SCHOOL REQUIREMENT</option>
                        <option value="BANK REQUIREMENT">BANK REQUIREMENT</option>
                        <option value="LOAN APPLICATION">LOAN APPLICATION</option>
                        <option value="SOLO PARENT ID REQUIREMENT">SOLO PARENT ID REQUIREMENT</option>
                        <option value="PHILHEALTH APPLICATION">PHILHEALTH APPLICATION</option>
                        <option value="TIN ID APPLICATION">TIN ID APPLICATION</option>
                        <option value="GSIS REQUIREMENT">GSIS REQUIREMENT</option>
                        <option value="SSS REQUIREMENT">SSS REQUIREMENT</option>
                        <option value="MARRIAGE LICENSE APPLICATION">MARRIAGE LICENSE APPLICATION</option>
                        <option value="LATE REGISTRATION OF BIRTH">LATE REGISTRATION OF BIRTH</option>
                        <option value="DRIVER LICENSE APPLICATION">DRIVER LICENSE APPLICATION</option>
                        <option value="BUSINESS PERMIT APPLICATION">BUSINESS PERMIT APPLICATION</option>
                        <option value="FIRST TIME JOB SEEKER">FIRST TIME JOB SEEKER</option>
                        <option value="LIBRENG LIBING">LIBRENG LIBING</option>
                        <option value="CUTTING TREES">CUTTING TREES</option>
                        <option value="SOCIAL PENSION">SOCIAL PENSION</option>
                        <option value="ONENESS">ONENESS</option>
                        <option value="UNEMPLOYMENT">UNEMPLOYMENT</option>
                        <option value="NO DEROGATORY">NO DEROGATORY</option>
                        <option value="CERTIFICATE OF RESIDENCY">CERTIFICATE OF RESIDENCY</option>
                        <option value="GOOD MORAL">GOOD MORAL</option>
                        <option value="FIRE VICTIM">FIRE VICTIM</option>
                        <option value="CHANGE ADDRESS">CHANGE ADDRESS</option>
                        <option value="MAYNILAD/MERALCO">MAYNILAD/MERALCO</option>
                        <option value="COHABITATION">COHABITATION</option>
                    </select>
                </div>
I'll sort the purpose options alphabetically while keeping the code structure the same:

html
                <div class="form-group">
                    <label for="purpose" class="required">Purpose of Application</label>
                    <select id="purpose" required>
                        <option value="" disabled selected>Select Purpose</option>
                        <option value="BANK REQUIREMENT">BANK REQUIREMENT</option>
                        <option value="BUSINESS PERMIT APPLICATION">BUSINESS PERMIT APPLICATION</option>
                        <option value="CERTIFICATE OF RESIDENCY">CERTIFICATE OF RESIDENCY</option>
                        <option value="CHANGE ADDRESS">CHANGE ADDRESS</option>
                        <option value="COHABITATION">COHABITATION</option>
                        <option value="CUTTING TREES">CUTTING TREES</option>
                        <option value="DRIVER LICENSE APPLICATION">DRIVER LICENSE APPLICATION</option>
                        <option value="EDUCATIONAL ASSISTANCE">EDUCATIONAL ASSISTANCE</option>
                        <option value="FIRE VICTIM">FIRE VICTIM</option>
                        <option value="FIRST TIME JOB SEEKER">FIRST TIME JOB SEEKER</option>
                        <option value="GOOD MORAL">GOOD MORAL</option>
                        <option value="GREENCARD APPLICATION/RENEWAL">GREENCARD APPLICATION/RENEWAL</option>
                        <option value="GSIS REQUIREMENT">GSIS REQUIREMENT</option>
                        <option value="LATE REGISTRATION OF BIRTH">LATE REGISTRATION OF BIRTH</option>
                        <option value="LIBRENG LIBING">LIBRENG LIBING</option>
                        <option value="LOAN APPLICATION">LOAN APPLICATION</option>
                        <option value="LOCAL EMPLOYMENT">LOCAL EMPLOYMENT</option>
                        <option value="MARRIAGE LICENSE APPLICATION">MARRIAGE LICENSE APPLICATION</option>
                        <option value="MAYNILAD/MERALCO">MAYNILAD/MERALCO</option>
                        <option value="MEDICAL ASSISTANCE/FINANCIAL">MEDICAL ASSISTANCE/FINANCIAL</option>
                        <option value="NO DEROGATORY">NO DEROGATORY</option>
                        <option value="ONENESS">ONENESS</option>
                        <option value="PHILHEALTH APPLICATION">PHILHEALTH APPLICATION</option>
                        <option value="POSTAL ID REQUIREMENT">POSTAL ID REQUIREMENT</option>
                        <option value="PROOF OF INDIGENCY">PROOF OF INDIGENCY</option>
                        <option value="PROOF OF RESIDENCY">PROOF OF RESIDENCY</option>
                        <option value="PWD ID REQUIREMENT">PWD ID REQUIREMENT</option>
                        <option value="SCHOOL REQUIREMENT">SCHOOL REQUIREMENT</option>
                        <option value="SENIOR CITIZEN ID REQUIREMENT">SENIOR CITIZEN ID REQUIREMENT</option>
                        <option value="SOCIAL PENSION">SOCIAL PENSION</option>
                        <option value="SOLO PARENT ID REQUIREMENT">SOLO PARENT ID REQUIREMENT</option>
                        <option value="SSS REQUIREMENT">SSS REQUIREMENT</option>
                        <option value="TIN ID APPLICATION">TIN ID APPLICATION</option>
                        <option value="UNEMPLOYMENT">UNEMPLOYMENT</option>
                    </select>
                </div>
I've sorted all the purpose options alphabetically from A-Z while keeping:

The "Select Purpose" option as the first (disabled selected) option

All the same options with the same values

The exact same HTML structure

All the same CSS classes and attributes

The options are now in alphabetical order for easier navigation and selection.

image.png
PNG 53.96KB
image.png
PNG 44.47KB
First picture attached is the applicant form, and the second picture is the dashboard where the submitted forms appear. Can you tell me if these things that I will be listing are possible and are free to do, and that you just need to work for it, these aren't properly ordered by how they are related to each other so can you format your answer to in order by how they relate to each other:

- Have an html/css website that lets applicants input their information into a form that is received by the same website but is protected through secured procedures but can still be accessed just not easily accessible
- To be honest, I've already made the html/css but I want it to be changed. This "website" should be just html, meaning it doesn't have any server or domain, it's just html so it would be free. But even if it is just that, the form submitted by the applicant can be accessed by multiple computers and not just the 1st pc. Would that be possible with some other software? For example (just an example, if there are anything better, then that would be great) excel or spreadsheet, or google drive?
- Is it possible to save the information through some kind of "database" like as I said (only example, if there are anything better, then tell me) excel, gdrive, dropbox even if offline? And that even if offline, it can still be accessed by different computers? Or if not multiple, just 1 computer?
- Is it possible that the encoded information may be automatically transferred to a formatted PDF file (PDF File that we already formatted, meaning it is premade already) so that it would already be ready for printing, but may still be adjusted if there are some information encoded that are wrong? Would it require wifi or can be done offline?
- Is it possible that when a specific purpose is chosen, some fields would appear that the applicant would be required to fill out so that their document would be automatically filled out? But if for example, they want to get "document A" and have already inputted their name which is required under "document A", their name won't be asked again even if it is required for a "document B" that they also want to get? So that their requirements wouldn't be redundant and you only need to fill in just 1 and it would be sufficient for both documents?
- Is it possible if the applicant wants to get "document A", the document that would be formatted would be a premade "document A" that is ready to be filled in with the applicants information, and not be mistaken for any other document since I think there would be a lot of premade documents to be filled out depending on the purpose that the applicant chooses.
- If the applicant chooses multiple purposes, can it then format all the chosen documents that the applicant chose based on the information they gave in just 1 go and doesn't have to fill out the form multiple times?
- There are gonna be IDs for each document, which would be different per document. The IDs are to count how many of that specific document has already be made. So, for example "document A" is formatted like this "Year - How many document A has already been made" (26 - 01), and that "document B" ID would be different count but same format "Year - How many document B has already been made" (26 - 05)? Would it be possible for the IDs to be automated but can still be formatted later on before printing?
- If you can see the "approved" button in the dashboard, would it be possible if you press approved, a button to take you to the already formatted PDF with the applicant's information that is already ready for printing but can still be modified just in case there were any mistakes?
Looking at your requirements and the screenshots, I'll address each question in order:

1. Secure HTML/CSS Website (No Server/Domain)
Answer: Partially possible with limitations

You can create a secure HTML/CSS website with password protection, but it will have limitations:

You can password-protect pages using JavaScript encryption (not highly secure but works for basic protection)

Since it's just HTML/CSS (static files), you can't have traditional server-side security

To make it "not easily accessible" but accessible, you could:

Use JavaScript-based password protection

Store credentials in JavaScript or use browser's localStorage

However, anyone viewing the source code can potentially bypass this

2. Access Submitted Forms from Multiple Computers (Without Server)
Answer: Not possible with just HTML/CSS

If it's just HTML/CSS files (no server):

Form data only exists on the computer where it was submitted (in browser's localStorage)

Other computers cannot see this data unless you manually copy files

Better solution: Use Google Sheets or Airtable as a "database"

Recommended Free Solution: Google Sheets + Google Apps Script

Applicant fills form ‚Üí Data goes to Google Sheet

Multiple computers can access the Google Sheet

No server needed on your end

Free and works with your HTML/CSS frontend

3. Offline Database Accessible from Multiple Computers
Answer: Very challenging, but possible with workarounds

For true offline access across multiple computers:

Not really possible with standard web technologies

Each computer would have its own localStorage database

You'd need to manually sync files between computers

Alternative: Use Dropbox/Google Drive with local sync

Store a JSON/Excel file in cloud storage

Each computer syncs this file locally

Works "mostly offline" but needs occasional internet for sync

4. Auto-Populate Premade PDF Template
Answer: Yes, possible offline

You can use:

jsPDF (JavaScript library) - Works offline

PDF-LIB (JavaScript library) - Works offline

Can fill your premade PDF template with form data

No wifi needed once libraries are loaded

Can be done entirely in the browser

5. Conditional Fields Based on Purpose (Non-Redundant)
Answer: Yes, easily possible

Example flow:

javascript
// When purpose changes
if (purpose === "Document A") {
    showFieldsForDocumentA();
} else if (purpose === "Document B") {
    showFieldsForDocumentB();
}

// Common fields (name, address, etc.) filled once
// Used for all selected documents
Intelligent Field Management:

Store all entered information in a JavaScript object

When user selects multiple purposes, use the same data for all

Only ask for additional fields unique to each document

6. Different Premade Templates for Each Document
Answer: Yes, possible

You can have:

One premade PDF template per document type

JavaScript selects correct template based on purpose

Fill template with applicant's information

Generate ready-to-print PDF

7. Multiple Documents from One Submission
Answer: Yes, possible

Implementation:

javascript
function generateDocuments(applicantData, selectedPurposes) {
    selectedPurposes.forEach(purpose => {
        const template = getTemplateForPurpose(purpose);
        const pdf = fillTemplate(template, applicantData);
        // Generate PDF for this document
    });
}
8. Automated Document IDs with Separate Counters
Answer: Yes, possible

Implementation:

javascript
// In localStorage or Google Sheet
let docACounter = localStorage.getItem('docA_counter') || 0;
let docBCounter = localStorage.getItem('docB_counter') || 0;

function generateID(purpose) {
    const year = new Date().getFullYear().toString().slice(-2);
    
    if (purpose === "Document A") {
        docACounter++;
        localStorage.setItem('docA_counter', docACounter);
        return `${year}-${docACounter.toString().padStart(2, '0')}`;
    } else if (purpose === "Document B") {
        docBCounter++;
        localStorage.setItem('docB_counter', docBCounter);
        return `${year}-${docBCounter.toString().padStart(2, '0')}`;
    }
}
9. "Approve" Button ‚Üí Printable PDF with Editable Option
Answer: Yes, possible

Workflow:

Click "Approve" button in dashboard

Generate PDF with applicant's information

Show PDF preview in browser

Add "Edit before printing" option

Allow modifications through form fields

Regenerate PDF with corrections

Provide print/download buttons

Recommended Architecture for Your Project:
text
HTML/CSS Frontend (Your current files)
    ‚Üì
JavaScript Processing
    ‚Üì
Google Sheets (as database - free, accessible from multiple computers)
    ‚Üì
PDF Generation (jsPDF/PDF-LIB - works offline)
    ‚Üì
Printable PDFs (with optional editing)
What You'll Need to Add to Your Current Code:
Google Sheets Integration - For multi-computer access

PDF Library (jsPDF or PDF-LIB) - For document generation

Enhanced JavaScript - For conditional fields, document management

LocalStorage Fallback - For offline use (syncs when online)

Limitations to Consider:
Security: HTML/JavaScript security is limited

Multi-computer sync: Needs internet connection periodically

Data persistence: Relies on third-party services (Google) for true multi-access

Would you like me to implement any of these specific features into your current code? I can show you how to integrate Google Sheets for the multi-computer access or implement the PDF generation with your premade templates.

can you change the applicant view of the original code, but make sure that the "database" still functions as before, just change the information that are required to be inputted. You may use the original as a guide to create this new "application form" that I will ask you to create. Also, keep in mind my questions before, because if I forgot to add anything, tell me about it before you actually add it into the code, then if it is good, I'll tell you to add it, otherwise, just follow my instructions in this prompt. Also, before giving me the actual completed code that I can just copy and paste, clarify some things that you might be confused on so that I can explain it further. These are the instructions to create the new application form, but make sure that it still functions:

APPLICANT-VIEW (FORMS)
- Capitalize the ‚Äúguide or example‚Äù thing that is shown per field
- Automatically capitalize all the information inputted, so you may remove the ‚Äú USE CAPITAL LETTERS WHEN FILLING OUT THIS FORM‚Äù at the top of the form.
- Make everything required to be answered unless specified that it isn‚Äôt required.
- Make it so that only letters can be put in fields that require only words (example: name)
- Make it so that only numbers can be put in fields that require only numbers (example: age)
- Make it so that every field is required to be filled out
- Contact Number must be in this format ‚Äú09xx xxx xxxx‚Äù and must be 11 digits only. It should automatically format starting with the ‚Äú09‚Äù and so on.
- Automatically input the age after inputting the date of birth (if both are required)
- The purpose of the application should be in drop-down (that you can search for it, like when you type letters and that the most related would appear), wherein when you choose a requirement, fields where you can input the needed information would appear. And that you can choose multiple purposes in the drop-down list and that fields would appear requiring all the needed information for the purposes that the applicant chose. But some information shouldn‚Äôt be redundant, meaning if a field has already appeared before, it shouldn‚Äôt repeat again (for example, the applicant wants to get both documents A and B, after choosing both from the drop-down, fields would appear that require information for both documents (but of course separate them), and if something like ‚Äúage‚Äù was already required to be answered for document A, it shouldn‚Äôt appear again under the required information under document B since the applicant has already answered that before. But make it so that even though the applicant only answered the question once (under document A), the information inputted would still appear on the PDF for document B (the automated PDF won‚Äôt be done right now since it isn‚Äôt that ‚Äústep‚Äù yet though).

- Last Name
- First Name
- Middle Name (not required)

Purpose of Application (Drop-down list, the applicant can search and choose multiple, after choosing, fields that require information would appear)
- Barangay Clearance
- Sample 1
- Sample 2

If ‚Äúbarangay clearance‚Äù was chosen as one of the purposes of application, then these fields would appear:
- Address
~ Make it so that there is a format for the address which are drop down lists in which it is formatted like this subdivision (drop-down), street (drop-down, which depends on what subdivision (use the same as before) the applicant chose), and Block and Lot that the applicant types themselves (but it should be ‚ÄúBLOCK __, LOT __‚Äù)
- Birthdate
- Age (which is automatically filled in because of the birthdate)
- Gender (which is drop-down with choice of being MALE or FEMALE)
- Nationality (in which ‚ÄúFILIPINO‚Äù is automatically chosen, but all the other nationalities are also listed, with FILIPINO at the top)
- Place of birth (with the instructions as the same ‚ÄúCITY, PROVINCE‚Äù)
- Length of stay (which is the same as before, but with an option to choose ‚ÄúSINCE BIRTH‚Äù in the drop-down box including ‚ÄúMONTH‚Äù and ‚ÄúYEAR‚Äù, with still a minimum of 6 months)
-Purpose of Application (a different drop-down list, which appears when the purpose ‚Äúbarangay clearance‚Äù is chosen, the applicant can search and choose multiple, after choosing, the certificate of that specific purpose would also be ready for printing, along with the barangay clearance)
PROOF OF RESIDENCY
PROOF OF INDIGENCY
POSTAL ID REQUIREMENT
PWD ID REQUIREMENT
SENIOR CITIZEN ID REQUIREMENT
MEDICAL ASSISTANCE/FINANCIAL
EDUCATIONAL ASSISTANCE
GREENCARD APPLICATION/RENEWAL
LOCAL EMPLOYMENT
SCHOOL REQUIREMENT
BANK REQUIREMENT
LOAN APPLICATION
SOLO PARENT ID REQUIREMENT
PHILHEALTH APPLICATION
TIN ID APPLICATION
GSIS REQUIREMENT
SSS REQUIREMENT
MARRIAGE LICENSE APPLICATION
LATE REGISTRATION OF BIRTH
DRIVER LICENSE APPLICATION
BUSINESS PERMIT APPLICATION
FIRST TIME JOB SEEKER
LIBRENG LIBING
CUTTING TREES
SOCIAL PENSION
ONENESS
UNEMPLOYMENT
NO DEROGATORY
CERTIFICATE OF RESIDENCY
GOOD MORAL
FIRE VICTIM
CHANGE ADDRESS
MAYNILAD/MERALCO
COHABITATION


If ‚Äúsample 1‚Äù was chosen as one of the purposes of application, then these fields would appear:
- pogi ba si sean? (with drop-down, only ‚ÄúYES‚Äù or ‚ÄúNO‚Äù)
- pogi ba si jarred? (with drop-down, only ‚ÄúYES‚Äù or ‚ÄúNO‚Äù)


If ‚Äúsample 2‚Äù was chosen as one of the purposes of application, then these fields would appear:
- pogi ba si prince? (with drop-down, only ‚ÄúYES‚Äù or ‚ÄúNO‚Äù)
- pogi ba si clarisse? (with drop-down, only ‚ÄúYES‚Äù or ‚ÄúNO‚Äù)
- nang-iwan ba si dwayne? (with drop-down, only ‚ÄúYES‚Äù or ‚ÄúNO‚Äù)


Again, this is the old code that I want you to replace the application form with:
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barangay Pilar Village Services Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --blue-dark: #003380;
            --blue-medium: #0047AB;
            --blue-light: #0756CE;
            --red: #CE1126;
            --yellow: #FCD116;
            --green: #28a745;
            --orange: #fd7e14;
            --purple: #6f42c1;
            --gray-light: #f5f5f5;
            --gray-medium: #e0e0e0;
            --gray-dark: #333333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--gray-light);
            color: var(--gray-dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }

        @media (max-width: 1400px) {
            .container {
                max-width: 1200px;
            }
        }
        
        @media (max-width: 1200px) {
            .container {
                max-width: 1000px;
            }
        }
        
        @media (max-width: 992px) {
            .container {
                max-width: 800px;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                max-width: 95%;
                padding: 15px;
            }
        }

        header {
            background: linear-gradient(to right, var(--blue-dark), var(--blue-medium));
            color: white;
            padding: 20px 0;
            text-align: center;
            border-bottom: 5px solid var(--yellow);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }

        .logo {
            font-size: 2.5rem;
            margin-right: 15px;
            color: var(--yellow);
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .tagline {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Common screen styles */
        .screen {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-top: 30px;
        }

        h2 {
            color: var(--blue-dark);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--yellow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h3 {
            color: var(--blue-medium);
            margin: 20px 0 15px 0;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-btn i {
            font-size: 1.2rem;
        }

        .primary-btn {
            background-color: var(--blue-medium);
            color: white;
        }

        .primary-btn:hover {
            background-color: var(--blue-dark);
            transform: translateY(-2px);
        }

        .secondary-btn {
            background-color: var(--gray-medium);
            color: var(--gray-dark);
        }

        .secondary-btn:hover {
            background-color: #d0d0d0;
        }

        .danger-btn {
            background-color: var(--red);
            color: white;
        }

        .danger-btn:hover {
            background-color: #b31022;
        }

        .success-btn {
            background-color: var(--green);
            color: white;
        }

        .success-btn:hover {
            background-color: #218838;
        }

        .hidden {
            display: none !important;
        }

        /* Applicant Form Specific Styles */
        .applicant-form {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-top: 30px;
        }

        .thank-you-screen {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-top: 30px;
            text-align: center;
        }

        .capital-notice {
            background-color: #fff8e1;
            border-left: 5px solid var(--yellow);
            padding: 15px;
            margin-bottom: 25px;
            text-align: center;
            font-weight: bold;
            color: #333;
        }

        .capital-notice i {
            color: var(--red);
            margin-right: 10px;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .form-row .form-group {
            flex: 1;
            min-width: 250px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--blue-dark);
        }

        .required::after {
            content: " *";
            color: var(--red);
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--gray-medium);
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s;
            background-color: white;
        }

        /* Add uppercase styling to text inputs */
        input[type="text"], input[type="tel"], textarea {
            text-transform: uppercase;
        }

        input::placeholder, textarea::placeholder {
            color: #888;
            font-style: italic;
        }

        select {
            color: #333;
        }

        select option:first-child {
            color: #888;
            font-style: italic;
        }

        input:focus, select:focus, textarea:focus {
            border-color: var(--blue-light);
            outline: none;
            box-shadow: 0 0 0 3px rgba(7, 86, 206, 0.2);
        }

        /* Style for invalid input (when lowercase is detected) */
        .invalid-input {
            border-color: var(--red) !important;
            background-color: #fff0f0;
        }

        .error-message {
            color: var(--red);
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
        }

        .length-stay-container {
            display: flex;
            gap: 10px;
        }

        .length-stay-container input {
            flex: 3;
        }

        .length-stay-container select {
            flex: 1;
            min-width: 120px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }

        .checkbox-group label {
            margin-bottom: 0;
        }

        .additional-form {
            background-color: #f0f8ff;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid var(--blue-medium);
        }

        .additional-form h3 {
            color: var(--blue-dark);
            margin-bottom: 15px;
            text-align: center;
        }

        .school-checkbox {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #ccc;
        }

        .school-checkbox:last-child {
            border-bottom: none;
        }

        .submit-btn {
            background-color: var(--blue-medium);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
            width: 100%;
            max-width: 300px;
            text-decoration: none;
            display: inline-block;
        }

        .submit-btn:hover {
            background-color: var(--blue-dark);
            transform: scale(1.05);
        }

        .back-btn {
            background-color: var(--gray-medium);
            color: var(--gray-dark);
            margin-right: 15px;
        }

        .back-btn:hover {
            background-color: #b0b0b0;
        }

        .thank-you-screen h2 {
            color: var(--blue-dark);
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .thank-you-screen h3 {
            color: var(--blue-medium);
            font-size: 1.4rem;
            margin-bottom: 30px;
            font-weight: normal;
        }

        .thank-you-icon {
            font-size: 4rem;
            color: var(--blue-light);
            margin: 30px 0;
        }

        /* FIXED: Button container alignment for thank you screen */
        .thank-you-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        /* Image Upload Styles */
        .image-upload-container {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            border: 2px dashed var(--blue-medium);
            border-radius: 10px;
            background-color: #f9f9f9;
        }

        .image-preview {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border: 3px solid var(--blue-light);
            margin: 15px auto;
            display: none;
        }

        .upload-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .upload-btn, .change-btn {
            background-color: var(--blue-medium);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            display: inline-block;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .change-btn {
            background-color: var(--green);
        }

        .upload-btn:hover {
            background-color: var(--blue-dark);
        }

        .change-btn:hover {
            background-color: #218838;
        }

        /* Table Styles */
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th {
            background-color: var(--blue-dark);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--gray-medium);
        }

        tr:hover {
            background-color: rgba(7, 86, 206, 0.05);
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
        }

        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-approved {
            background-color: #d4edda;
            color: #155724;
        }

        .status-rejected {
            background-color: #f8d7da;
            color: #721c24;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .view-btn {
            background-color: var(--blue-light);
            color: white;
        }

        .approve-btn {
            background-color: var(--green);
            color: white;
        }

        .reject-btn {
            background-color: var(--red);
            color: white;
        }

        /* Dashboard Stats */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-top: 4px solid var(--blue-medium);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2.5rem;
            color: var(--blue-medium);
            margin-bottom: 15px;
        }

        .stat-card h3 {
            font-size: 2.2rem;
            color: var(--blue-dark);
            margin: 10px 0;
        }

        .stat-card p {
            color: var(--gray-dark);
            font-size: 0.95rem;
        }

        /* Charts */
        .chart-container {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }

        .chart-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        /* Certificate Preview */
        .certificate-preview {
            background-color: white;
            border: 2px solid var(--gray-medium);
            border-radius: 8px;
            padding: 40px;
            margin-top: 20px;
            min-height: 400px;
            position: relative;
            background-image: url('data:image/svg+xml;utf8,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><path d="M0,0 L100,0 L100,100 L0,100 Z" fill="none" stroke="%23FCD116" stroke-width="2" stroke-dasharray="5,5"/></svg>');
            background-size: 100px 100px;
        }

        .certificate-header {
            text-align: center;
            border-bottom: 3px double var(--blue-dark);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .certificate-header h2 {
            color: var(--blue-dark);
            font-size: 2.2rem;
            border: none;
            margin: 0;
            padding: 0;
        }

        .certificate-body {
            padding: 30px;
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .certificate-footer {
            position: absolute;
            bottom: 40px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
            padding-top: 30px;
            border-top: 1px solid var(--gray-medium);
        }

        .signature-box {
            text-align: center;
        }

        .signature-line {
            width: 200px;
            border-top: 1px solid var(--gray-dark);
            margin: 40px auto 10px;
        }

        /* Filter Controls */
        .filter-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            background-color: var(--gray-light);
            padding: 20px;
            border-radius: 8px;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .filter-btn {
            align-self: flex-end;
            padding: 10px 20px;
        }

        /* Form View Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            margin: 0;
            border: none;
            padding: 0;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-dark);
        }

        /* Footer */
        footer {
            background-color: var(--blue-dark);
            color: white;
            padding: 30px 0;
            margin-top: 40px;
            text-align: center;
        }

        .footer-content {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .footer-section {
            flex: 1;
            min-width: 300px;
            margin: 15px 0;
        }

        .footer-section h3 {
            color: var(--yellow);
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .footer-section p {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .footer-section i {
            margin-right: 10px;
            color: var(--yellow);
            min-width: 20px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .screen, .applicant-form, .thank-you-screen {
                padding: 20px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .nav-buttons {
                flex-direction: column;
            }
            
            .nav-btn {
                width: 100%;
                justify-content: center;
            }
            
            .chart-row {
                grid-template-columns: 1fr;
            }
            
            .certificate-footer {
                flex-direction: column;
                gap: 30px;
                position: static;
                margin-top: 40px;
            }
            
            .footer-content {
                flex-direction: column;
                text-align: center;
            }
            
            .thank-you-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .upload-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .upload-btn, .change-btn {
                width: 100%;
                max-width: 200px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.7rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo-container">
                <i class="fas fa-landmark logo"></i>
                <div>
                    <h1>Barangay Pilar Village Services Portal</h1>
                    <p class="tagline">Serving The Community With Integrity And Excellence</p>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Access Selection Screen -->
        <div id="accessScreen" class="screen">
            <h2>Welcome to the Barangay Pilar Village Services Portal</h2>
            <p>Please select your access type:</p>
            
            <div class="nav-buttons">
                <button class="nav-btn primary-btn" id="applicantBtn">
                    <i class="fas fa-user-edit"></i>
                    Open as Applicant
                </button>
                
                <button class="nav-btn primary-btn" id="memberBtn">
                    <i class="fas fa-user-lock"></i>
                    Open as Barangay Member
                </button>
            </div>
        </div>

        <!-- Login Screen for Barangay Members -->
        <div id="loginScreen" class="screen hidden">
            <h2>Barangay Member Login</h2>
            <p>Enter your credentials to access the barangay management system</p>
            
            <div id="loginError" class="error-message" style="background-color: #f8d7da; color: #721c24; padding: 12px; border-radius: 6px; margin-bottom: 20px; display: none;">
                <i class="fas fa-exclamation-circle"></i> Invalid username or password. Please try again.
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="username" class="required">Username</label>
                    <input type="text" id="username" placeholder="Enter your username" required>
                </div>
                
                <div class="form-group">
                    <label for="password" class="required">Password</label>
                    <input type="password" id="password" placeholder="Enter your password" required>
                </div>
                
                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="rememberMe">
                        <label for="rememberMe">Remember me</label>
                    </div>
                </div>
                
                <div class="nav-buttons">
                    <button type="button" class="nav-btn secondary-btn" id="backToAccessFromLogin">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <button type="submit" class="nav-btn primary-btn">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </div>
                
                <div style="margin-top: 20px; text-align: center; font-size: 0.9rem; color: var(--gray-dark);">
                    <p>Demo Credentials:</p>
                    <p><strong>Username:</strong> admin | <strong>Password:</strong> barangay2023</p>
                    <p><strong>Username:</strong> staff | <strong>Password:</strong> pilarvillage</p>
                </div>
            </form>
        </div>

        <!-- Application Form Screen -->
        <div id="applicantForm" class="applicant-form hidden">
            <h2>
                Application Form
                <button class="nav-btn secondary-btn" id="backToAccessFromApplicant">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </button>
            </h2>
            
            <div class="capital-notice">
                <i class="fas fa-exclamation-triangle"></i>
                USE CAPITAL LETTERS WHEN FILLING OUT THIS FORM
            </div>

            <form id="applicationForm">
                <!-- Image Upload Section -->
                <div class="image-upload-container">
                    <h3>Request of Formal Image of Applicant</h3>
                    <p><strong>Required: PNG or JPG format</strong></p>
                    <p><em>Applicant's face must be clearly visible</em></p>
                    
                    <img id="imagePreview" class="image-preview" alt="Applicant Photo Preview">
                    
                    <div>
                        <input type="file" id="imageUpload" accept=".png,.jpg,.jpeg" style="display: none;">
                        <div class="upload-buttons">
                            <!-- Initially show only upload button -->
                            <button type="button" class="upload-btn" id="uploadTrigger">
                                <i class="fas fa-camera"></i> Upload Photo
                            </button>
                            <!-- Change button is hidden initially -->
                            <button type="button" class="change-btn hidden" id="changePhotoBtn">
                                <i class="fas fa-sync-alt"></i> Change Photo
                            </button>
                        </div>
                    </div>
                    <p id="fileName" style="margin-top: 10px; color: var(--blue-dark);"></p>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="lastName" class="required">Last Name</label>
                        <input type="text" id="lastName" placeholder="Enter last name" required>
                        <div class="error-message" id="lastNameError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="firstName" class="required">First Name</label>
                        <input type="text" id="firstName" placeholder="Enter first name" required>
                        <div class="error-message" id="firstNameError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="middleName">Middle Name</label>
                        <input type="text" id="middleName" placeholder="Enter middle name">
                        <div class="error-message" id="middleNameError">Please use CAPITAL LETTERS only</div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="blockLot" class="required">Block and Lot</label>
                        <input type="text" id="blockLot" placeholder="e.g., BLOCK 5, LOT 12" required>
                        <div class="error-message" id="blockLotError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="street" class="required">Street</label>
                        <input type="text" id="street" placeholder="Enter street name" required>
                        <div class="error-message" id="streetError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="subdivision" class="required">Subdivision</label>
                        <select id="subdivision" required>
                            <option value="" disabled selected>Select Subdivision</option>
                            <option value="CYPRESS MANGGAHAN">CYPRESS MANGGAHAN</option>
                            <option value="CAMELLA HOMES CLASSIC">CAMELLA HOMES CLASSIC</option>
                            <option value="CLASSIC HOMES">CLASSIC HOMES</option>
                            <option value="CUEVAS COMPOUND">CUEVAS COMPOUND</option>
                            <option value="DAISY COMPOUND">DAISY COMPOUND</option>
                            <option value="GARDEN COMPOUND">GARDEN COMPOUND</option>
                            <option value="GLORIA COMPOUND">GLORIA COMPOUND</option>
                            <option value="MALIGAYA COMPOUND">MALIGAYA COMPOUND</option>
                            <option value="PAG-ASA COMPOUND">PAG-ASA COMPOUND</option>
                            <option value="SAMPAGUITA COMPOUND">SAMPAGUITA COMPOUND</option>
                            <option value="BF PILAR SOUTHVILLE">BF PILAR SOUTHVILLE</option>
                            <option value="TERESA COMPOUND">TERESA COMPOUND</option>
                            <option value="PILAR VILLAGE">PILAR VILLAGE</option>
                            <option value="TERESA PARK">TERESA PARK</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="provincialAddress" class="required">Provincial Address</label>
                    <textarea id="provincialAddress" rows="3" placeholder="Enter complete provincial address" required></textarea>
                    <div class="error-message" id="provincialAddressError">Please use CAPITAL LETTERS only</div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="contactNumber" class="required">Contact Number</label>
                        <input type="tel" id="contactNumber" placeholder="e.g., 09171234567" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="age" class="required">Age</label>
                        <input type="number" id="age" min="1" max="120" placeholder="Enter Age" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="lengthStay" class="required">Length of Stay (Minimum: 6 Months)</label>
                        <div class="length-stay-container">
                            <input type="number" id="lengthStay" min="1" placeholder="Enter Number" required>
                            <select id="stayUnit">
                                <option value="months">Months</option>
                                <option value="years">Years</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="birthday" class="required">Birthday</label>
                        <input type="date" id="birthday" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="birthPlace" class="required">Place of Birth</label>
                        <input type="text" id="birthPlace" placeholder="CITY, PROVINCE" required>
                        <div class="error-message" id="birthPlaceError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="nationality" class="required">Nationality</label>
                        <select id="nationality" required>
                            <option value="" disabled selected>Select Nationality</option>
                            <!-- Nationalities will be populated by JavaScript -->
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="sex" class="required">Sex</label>
                        <select id="sex" required>
                            <option value="" disabled selected>Select Sex</option>
                            <option value="MALE">MALE</option>
                            <option value="FEMALE">FEMALE</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="civilStatus" class="required">Civil Status</label>
                        <select id="civilStatus" required>
                            <option value="" disabled selected>Select Civil Status</option>
                            <option value="SINGLE">SINGLE</option>
                            <option value="MARRIED">MARRIED</option>
                            <option value="WIDOWED">WIDOWED</option>
                            <option value="LEGALLY SEPARATED">LEGALLY SEPARATED</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="purpose" class="required">Purpose of Application</label>
                    <select id="purpose" required>
                        <option value="" disabled selected>Select Purpose</option>
                        <option value="BANK REQUIREMENT">BANK REQUIREMENT</option>
                        <option value="BUSINESS PERMIT APPLICATION">BUSINESS PERMIT APPLICATION</option>
                        <option value="CERTIFICATE OF RESIDENCY">CERTIFICATE OF RESIDENCY</option>
                        <option value="CHANGE ADDRESS">CHANGE ADDRESS</option>
                        <option value="COHABITATION">COHABITATION</option>
                        <option value="CUTTING TREES">CUTTING TREES</option>
                        <option value="DRIVER LICENSE APPLICATION">DRIVER LICENSE APPLICATION</option>
                        <option value="EDUCATIONAL ASSISTANCE">EDUCATIONAL ASSISTANCE</option>
                        <option value="FIRE VICTIM">FIRE VICTIM</option>
                        <option value="FIRST TIME JOB SEEKER">FIRST TIME JOB SEEKER</option>
                        <option value="GOOD MORAL">GOOD MORAL</option>
                        <option value="GREENCARD APPLICATION/RENEWAL">GREENCARD APPLICATION/RENEWAL</option>
                        <option value="GSIS REQUIREMENT">GSIS REQUIREMENT</option>
                        <option value="LATE REGISTRATION OF BIRTH">LATE REGISTRATION OF BIRTH</option>
                        <option value="LIBRENG LIBING">LIBRENG LIBING</option>
                        <option value="LOAN APPLICATION">LOAN APPLICATION</option>
                        <option value="LOCAL EMPLOYMENT">LOCAL EMPLOYMENT</option>
                        <option value="MARRIAGE LICENSE APPLICATION">MARRIAGE LICENSE APPLICATION</option>
                        <option value="MAYNILAD/MERALCO">MAYNILAD/MERALCO</option>
                        <option value="MEDICAL ASSISTANCE/FINANCIAL">MEDICAL ASSISTANCE/FINANCIAL</option>
                        <option value="NO DEROGATORY">NO DEROGATORY</option>
                        <option value="ONENESS">ONENESS</option>
                        <option value="PHILHEALTH APPLICATION">PHILHEALTH APPLICATION</option>
                        <option value="POSTAL ID REQUIREMENT">POSTAL ID REQUIREMENT</option>
                        <option value="PROOF OF INDIGENCY">PROOF OF INDIGENCY</option>
                        <option value="PROOF OF RESIDENCY">PROOF OF RESIDENCY</option>
                        <option value="PWD ID REQUIREMENT">PWD ID REQUIREMENT</option>
                        <option value="SCHOOL REQUIREMENT">SCHOOL REQUIREMENT</option>
                        <option value="SENIOR CITIZEN ID REQUIREMENT">SENIOR CITIZEN ID REQUIREMENT</option>
                        <option value="SOCIAL PENSION">SOCIAL PENSION</option>
                        <option value="SOLO PARENT ID REQUIREMENT">SOLO PARENT ID REQUIREMENT</option>
                        <option value="SSS REQUIREMENT">SSS REQUIREMENT</option>
                        <option value="TIN ID APPLICATION">TIN ID APPLICATION</option>
                        <option value="UNEMPLOYMENT">UNEMPLOYMENT</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="firstTimeJobSeeker">
                        <label for="firstTimeJobSeeker">FIRST TIME JOB-SEEKER?</label>
                    </div>
                </div>
                
                <!-- Additional Form for First Time Job Seekers -->
                <div id="additionalJobSeekerForm" class="additional-form hidden">
                    <h3>ADDITIONAL INFO FOR FIRST TIME JOB-SEEKERS</h3>
                    <p>Please provide the name of the School or institution for each selected section:</p>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="elementarySchool">
                            <label for="elementarySchool">Elementary School</label>
                        </div>
                        <input type="text" id="elementarySchoolName" class="school-name-input hidden" placeholder="ENTER ELEMENTARY SCHOOL NAME">
                        <div class="error-message" id="elementarySchoolError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="juniorHighSchool">
                            <label for="juniorHighSchool">Junior High School</label>
                        </div>
                        <input type="text" id="juniorHighSchoolName" class="school-name-input hidden" placeholder="ENTER JUNIOR HIGH SCHOOL NAME">
                        <div class="error-message" id="juniorHighSchoolError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="seniorHighSchool">
                            <label for="seniorHighSchool">Senior High School</label>
                        </div>
                        <input type="text" id="seniorHighSchoolName" class="school-name-input hidden" placeholder="ENTER SENIOR HIGH SCHOOL NAME">
                        <div class="error-message" id="seniorHighSchoolError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="college">
                            <label for="college">College</label>
                        </div>
                        <input type="text" id="collegeName" class="school-name-input hidden" placeholder="ENTER COLLEGE NAME">
                        <div class="error-message" id="collegeNameError">Please use CAPITAL LETTERS only</div>
                        <input type="text" id="collegeCourse" class="course-input hidden" placeholder="ENTER COLLEGE COURSE" style="margin-top: 10px;">
                        <div class="error-message" id="collegeCourseError">Please use CAPITAL LETTERS only</div>
                    </div>
                    
                    <div class="school-checkbox">
                        <div class="checkbox-group">
                            <input type="checkbox" id="vocationalSchool">
                            <label for="vocationalSchool">Vocational School</label>
                        </div>
                        <input type="text" id="vocationalSchoolName" class="school-name-input hidden" placeholder="ENTER VOCATIONAL SCHOOL NAME">
                        <div class="error-message" id="vocationalSchoolError">Please use CAPITAL LETTERS only</div>
                        <input type="text" id="vocationalCourse" class="course-input hidden" placeholder="ENTER VOCATIONAL COURSE" style="margin-top: 10px;">
                        <div class="error-message" id="vocationalCourseError">Please use CAPITAL LETTERS only</div>
                    </div>
                </div>
                
                <div style="margin-top: 30px; text-align: center;">
                    <button type="button" class="submit-btn back-btn" id="cancelApplicantForm">Cancel</button>
                    <button type="submit" class="submit-btn">Submit Application</button>
                </div>
            </form>
        </div>

        <!-- Thank You Screen -->
        <div id="thankYouScreen" class="thank-you-screen hidden">
            <i class="fas fa-check-circle thank-you-icon"></i>
            <h2>THANK YOU FOR FILLING YOUR APPLICATION!</h2>
            <h3>We will contact you once your application status is completed.</h3>
            <p>Your application has been submitted successfully. A barangay representative will contact you within 3-5 working days.</p>
            <p>For inquiries, please contact Barangay Pilar Village Office at (02) 1234-5678.</p>
            
            <div class="thank-you-buttons">
                <button class="submit-btn" id="newApplicationBtn">
                    Submit Another Application
                </button>
                <button class="submit-btn back-btn" id="backToHomeFromThankYou">
                    Back to Home
                </button>
            </div>
        </div>

        <!-- Member Dashboard -->
        <div id="memberDashboard" class="screen hidden">
            <h2>
                Barangay Management Dashboard
                <button class="nav-btn danger-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </h2>
            
            <p>Welcome back, <strong id="loggedInUser">Administrator</strong>! Here's an overview of barangay activities.</p>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <i class="fas fa-file-alt"></i>
                    <h3 id="pendingApplications">0</h3>
                    <p>Pending Applications</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-check-circle"></i>
                    <h3 id="processedToday">0</h3>
                    <p>Processed Today</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <h3 id="totalResidents">0</h3>
                    <p>Total Residents</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-calendar-check"></i>
                    <h3 id="upcomingEvents">3</h3>
                    <p>Upcoming Events</p>
                </div>
            </div>
            
            <h3>Quick Actions</h3>
            <div class="nav-buttons">
                <button class="nav-btn primary-btn" id="applicationsManagementBtn">
                    <i class="fas fa-list-check"></i> Applications Management
                </button>
                
                <button class="nav-btn primary-btn" id="residentRegistrationBtn">
                    <i class="fas fa-user-plus"></i> Register New Resident
                </button>
                
                <button class="nav-btn primary-btn" id="certificateGenerationBtn">
                    <i class="fas fa-print"></i> Generate Certificates
                </button>
                
                <button class="nav-btn primary-btn" id="reportsDashboardBtn">
                    <i class="fas fa-chart-bar"></i> View Reports
                </button>
            </div>
            
            <h3 style="margin-top: 30px;">Recent Activity</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Activity</th>
                            <th>User</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="recentActivity">
                        <!-- Activity rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Applications Management Interface -->
        <div id="applicationsManagementScreen" class="screen hidden">
            <h2>
                Applications Management
                <button class="nav-btn secondary-btn" id="backToDashboardFromApps">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="filter-controls">
                <div class="filter-group">
                    <label>Application Type</label>
                    <select id="filterType">
                        <option value="all">All Types</option>
                        <option value="residency">Certificate of Residency</option>
                        <option value="indigency">Certificate of Indigency</option>
                        <option value="jobseeker">First Time Job Seeker</option>
                        <option value="business">Business Permit</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Status</label>
                    <select id="filterStatus">
                        <option value="all">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="approved">Approved</option>
                        <option value="rejected">Rejected</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Date Range</label>
                    <input type="date" id="filterDate">
                </div>
                
                <button class="nav-btn primary-btn filter-btn" id="applyFilters">
                    <i class="fas fa-filter"></i> Apply Filters
                </button>
                
                <button class="nav-btn secondary-btn filter-btn" id="resetFilters">
                    <i class="fas fa-redo"></i> Reset
                </button>
            </div>
            
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Applicant Name</th>
                            <th>Application Type</th>
                            <th>Date Submitted</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="applicationsTable">
                        <!-- Applications will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <div style="margin-top: 20px; display: flex; justify-content: space-between;">
                <div>
                    <button class="nav-btn secondary-btn" id="exportApplications">
                        <i class="fas fa-file-export"></i> Export to Excel
                    </button>
                </div>
                <div>
                    <span id="paginationInfo">Showing 0 applications</span>
                    <button class="nav-btn secondary-btn" id="prevPage"><i class="fas fa-chevron-left"></i></button>
                    <button class="nav-btn secondary-btn" id="nextPage"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
        </div>

        <!-- Resident Registration Form -->
        <div id="residentRegistrationScreen" class="screen hidden">
            <h2>
                Register New Resident
                <button class="nav-btn secondary-btn" id="backToDashboardFromRegistration">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <form id="residentRegistrationForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentLastName" class="required">Last Name</label>
                        <input type="text" id="residentLastName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentFirstName" class="required">First Name</label>
                        <input type="text" id="residentFirstName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentMiddleName">Middle Name</label>
                        <input type="text" id="residentMiddleName">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentBirthdate" class="required">Birthdate</label>
                        <input type="date" id="residentBirthdate" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentAge" class="required">Age</label>
                        <input type="number" id="residentAge" min="0" max="120" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentCivilStatus" class="required">Civil Status</label>
                        <select id="residentCivilStatus" required>
                            <option value="">Select Status</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                            <option value="Widowed">Widowed</option>
                            <option value="Separated">Separated</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentContact" class="required">Contact Number</label>
                        <input type="tel" id="residentContact" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentEmail">Email Address</label>
                        <input type="email" id="residentEmail">
                    </div>
                    
                    <div class="form-group">
                        <label for="residentOccupation">Occupation</label>
                        <input type="text" id="residentOccupation">
                    </div>
                </div>
                
                <h3>Address Information</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentBlockLot" class="required">Block and Lot</label>
                        <input type="text" id="residentBlockLot" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentStreet" class="required">Street</label>
                        <input type="text" id="residentStreet" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentSubdivision" class="required">Subdivision</label>
                        <select id="residentSubdivision" required>
                            <option value="">Select Subdivision</option>
                            <option value="PILAR VILLAGE">PILAR VILLAGE</option>
                            <option value="CYPRESS MANGGAHAN">CYPRESS MANGGAHAN</option>
                            <option value="TERESA PARK">TERESA PARK</option>
                            <option value="BF PILAR SOUTHVILLE">BF PILAR SOUTHVILLE</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentLengthStay" class="required">Length of Stay</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="number" id="residentLengthStay" style="flex: 3;" required>
                            <select id="residentStayUnit" style="flex: 1;">
                                <option value="months">Months</option>
                                <option value="years">Years</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="residentNotes">Additional Notes</label>
                    <textarea id="residentNotes" rows="3"></textarea>
                </div>
                
                <div class="nav-buttons">
                    <button type="reset" class="nav-btn secondary-btn">
                        <i class="fas fa-redo"></i> Clear Form
                    </button>
                    <button type="submit" class="nav-btn success-btn">
                        <i class="fas fa-save"></i> Register Resident
                    </button>
                </div>
            </form>
        </div>

        <!-- Certificate Generation Module -->
        <div id="certificateGenerationScreen" class="screen hidden">
            <h2>
                Certificate Generation
                <button class="nav-btn secondary-btn" id="backToDashboardFromCertificates">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="certificateType" class="required">Certificate Type</label>
                    <select id="certificateType" required>
                        <option value="">Select Certificate Type</option>
                        <option value="residency">Certificate of Residency</option>
                        <option value="indigency">Certificate of Indigency</option>
                        <option value="goodmoral">Certificate of Good Moral Character</option>
                        <option value="employment">Certificate of Employment</option>
                        <option value="nocriminal">No Criminal Record</option>
                        <option value="soloparent">Solo Parent Certification</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="certificateRecipient" class="required">Recipient Name</label>
                    <input type="text" id="certificateRecipient" placeholder="Search resident name..." required>
                    <div id="residentSuggestions" style="margin-top: 5px; display: none;">
                        <!-- Suggestions will be populated here -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="certificatePurpose" class="required">Purpose</label>
                    <input type="text" id="certificatePurpose" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="certificateDate">Certificate Date</label>
                    <input type="date" id="certificateDate">
                </div>
                
                <div class="form-group">
                    <label for="certificateValidity">Validity (Days)</label>
                    <input type="number" id="certificateValidity" min="1" max="365" value="30">
                </div>
                
                <div class="form-group">
                    <label for="certificateNumber">Certificate Number</label>
                    <input type="text" id="certificateNumber" value="BPV-2023-" readonly>
                </div>
            </div>
            
            <div class="form-group">
                <label for="certificateRemarks">Additional Remarks</label>
                <textarea id="certificateRemarks" rows="3" placeholder="Any additional information for the certificate..."></textarea>
            </div>
            
            <div class="certificate-preview">
                <div class="certificate-header">
                    <h2 id="previewCertificateType">CERTIFICATE OF RESIDENCY</h2>
                    <p>Republic of the Philippines<br>Province of Cavite<br>Barangay Pilar Village</p>
                </div>
                
                <div class="certificate-body">
                    <p>TO WHOM IT MAY CONCERN:</p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        This is to certify that <strong id="previewRecipient">[RECIPIENT NAME]</strong>, 
                        of legal age, is a bona fide resident of <strong id="previewAddress">[ADDRESS]</strong>, 
                        Barangay Pilar Village, and has been residing therein for <strong id="previewLengthStay">[LENGTH]</strong>.
                    </p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        This certification is issued upon the request of the above-named person for <strong id="previewPurpose">[PURPOSE]</strong> 
                        and whatever legal purpose it may serve.
                    </p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        Issued this <strong id="previewDate">[DATE]</strong> at Barangay Pilar Village.
                    </p>
                </div>
                
                <div class="certificate-footer">
                    <div class="signature-box">
                        <div class="signature-line"></div>
                        <p><strong>HON. JUAN DELA CRUZ</strong><br>Barangay Captain</p>
                    </div>
                    
                    <div class="signature-box">
                        <div class="signature-line"></div>
                        <p><strong>MARIA SANTOS</strong><br>Barangay Secretary</p>
                    </div>
                </div>
            </div>
            
            <div class="nav-buttons" style="margin-top: 30px;">
                <button class="nav-btn secondary-btn" id="previewCertificate">
                    <i class="fas fa-eye"></i> Update Preview
                </button>
                <button class="nav-btn primary-btn" id="printCertificate">
                    <i class="fas fa-print"></i> Print Certificate
                </button>
                <button class="nav-btn success-btn" id="saveCertificate">
                    <i class="fas fa-save"></i> Save & Generate
                </button>
            </div>
        </div>

        <!-- Reports Dashboard -->
        <div id="reportsDashboardScreen" class="screen hidden">
            <h2>
                Reports Dashboard
                <button class="nav-btn secondary-btn" id="backToDashboardFromReports">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <i class="fas fa-file-alt"></i>
                    <h3>156</h3>
                    <p>Applications This Month</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <h3>42</h3>
                    <p>New Residents This Year</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-certificate"></i>
                    <h3>89</h3>
                    <p>Certificates Issued</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-money-bill-wave"></i>
                    <h3>‚Ç±24,580</h3>
                    <p>Revenue This Month</p>
                </div>
            </div>
            
            <h3>Application Statistics</h3>
            <div class="chart-row">
                <div class="chart-container">
                    <h4>Applications by Type</h4>
                    <div style="height: 300px; display: flex; align-items: flex-end; justify-content: space-around; margin-top: 20px;">
                        <div style="text-align: center;">
                            <div style="height: 200px; width: 40px; background-color: var(--blue-medium); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Residency</div>
                            <div style="font-weight: bold;">45%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 150px; width: 40px; background-color: var(--green); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Indigency</div>
                            <div style="font-weight: bold;">25%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 100px; width: 40px; background-color: var(--orange); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Job Seeker</div>
                            <div style="font-weight: bold;">15%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 80px; width: 40px; background-color: var(--purple); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Business</div>
                            <div style="font-weight: bold;">10%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 50px; width: 40px; background-color: var(--red); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Others</div>
                            <div style="font-weight: bold;">5%</div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h4>Applications by Status</h4>
                    <div style="height: 300px; display: flex; align-items: center; justify-content: center; margin-top: 20px;">
                        <div style="width: 200px; height: 200px; border-radius: 50%; background: conic-gradient(var(--green) 0% 65%, var(--yellow) 65% 85%, var(--red) 85% 100%);"></div>
                    </div>
                    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--green); margin-right: 5px;"></span> Approved (65%)</div>
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--yellow); margin-right: 5px;"></span> Pending (20%)</div>
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--red); margin-right: 5px;"></span> Rejected (15%)</div>
                    </div>
                </div>
            </div>
            
            <h3>Monthly Report</h3>
            <div class="filter-controls">
                <div class="filter-group">
                    <label>Report Type</label>
                    <select id="reportType">
                        <option value="applications">Applications Report</option>
                        <option value="residents">Residents Report</option>
                        <option value="financial">Financial Report</option>
                        <option value="certificates">Certificates Report</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Month</label>
                    <select id="reportMonth">
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Year</label>
                    <select id="reportYear">
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                    </select>
                </div>
                
                <button class="nav-btn primary-btn filter-btn" id="generateReport">
                    <i class="fas fa-chart-bar"></i> Generate Report
                </button>
                
                <button class="nav-btn success-btn filter-btn" id="exportReport">
                    <i class="fas fa-download"></i> Export as PDF
                </button>
            </div>
            
            <div class="table-container" style="margin-top: 20px;">
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Application Type</th>
                            <th>Applicant</th>
                            <th>Status</th>
                            <th>Processed By</th>
                            <th>Processing Time</th>
                        </tr>
                    </thead>
                    <tbody id="reportTable">
                        <!-- Report data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Form View Modal -->
        <div id="formViewModal" class="modal-overlay hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Application Details</h2>
                    <button class="close-modal" id="closeModalBtn">&times;</button>
                </div>
                <div id="formViewContent">
                    <!-- Form content will be populated here -->
                </div>
                <div style="margin-top: 20px; text-align: center;">
                    <button class="nav-btn secondary-btn" id="closeModal">Close</button>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3><i class="fas fa-map-marker-alt"></i> Visit Us!</h3>
                <p>C2C5+FCQ, Aguirre Corner Sapphire, Pilar, Las Pi√±as, 1740 Metro Manila</p>
            </div>
            <div class="footer-section">
                <h3><i class="fas fa-phone-alt"></i> Contact Us!</h3>
                <p>0927 342 5375</p>
                <p>Office Hours: Mon-Fri 8:00 AM - 5:00 PM</p>
            </div>
            <div class="footer-section">
                <h3><i class="fas fa-info-circle"></i> About</h3>
                <p>Barangay Pilar Village Services Portal</p>
                <p>Official online service platform</p>
            </div>
        </div>
    </footer>

    <script>
        // Data Management
        let applicantsDatabase = JSON.parse(localStorage.getItem('applicantsDatabase')) || [];
        let residentsDatabase = JSON.parse(localStorage.getItem('residentsDatabase')) || [];
        
        // Initialize sample data if empty
        if (applicantsDatabase.length === 0) {
            const sampleApplicant = {
                id: Date.now(),
                photo: 'https://via.placeholder.com/120x120/0756CE/FFFFFF?text=Sample+Photo',
                lastName: 'SANTOS',
                firstName: 'JUAN',
                middleName: 'DELA CRUZ',
                blockLot: 'BLOCK 5, LOT 12',
                street: 'SAPPHIRE STREET',
                subdivision: 'PILAR VILLAGE',
                provincialAddress: 'BRGY. SAN ISIDRO, ABUCAY, BATAAN',
                contactNumber: '09171234567',
                age: '25',
                lengthStay: '2 years',
                birthday: 'January 15, 1999',
                birthPlace: 'MANILA, METRO MANILA',
                nationality: 'Filipino',
                sex: 'Male',
                civilStatus: 'Single',
                purpose: 'PROOF OF RESIDENCY',
                isFirstTimeJobSeeker: true,
                jobSeekerData: {
                    elementary: { name: 'Pilar Elementary School' },
                    juniorHigh: { name: 'Pilar National High School' },
                    seniorHigh: { name: 'Pilar Senior High School' },
                    college: { name: 'University of the Philippines', course: 'Business Administration' }
                },
                status: 'Pending',
                dateSubmitted: new Date().toLocaleDateString()
            };
            
            applicantsDatabase.push(sampleApplicant);
            localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
        }
        
        if (residentsDatabase.length === 0) {
            const sampleResidents = [
                { id: 1, lastName: 'DELA CRUZ', firstName: 'JUAN', middleName: 'SANTOS', birthdate: '1990-05-15', age: 33, civilStatus: 'Single', contact: '09123456789', email: 'juan@example.com', occupation: 'Teacher', blockLot: 'BLOCK 5, LOT 12', street: 'SAPPHIRE STREET', subdivision: 'PILAR VILLAGE', lengthStay: '5 years', notes: '' },
                { id: 2, lastName: 'SANTOS', firstName: 'MARIA', middleName: 'REYES', birthdate: '1985-08-22', age: 38, civilStatus: 'Married', contact: '09234567890', email: 'maria@example.com', occupation: 'Nurse', blockLot: 'BLOCK 3, LOT 8', street: 'DIAMOND STREET', subdivision: 'TERESA PARK', lengthStay: '10 years', notes: '' }
            ];
            
            residentsDatabase = sampleResidents;
            localStorage.setItem('residentsDatabase', JSON.stringify(residentsDatabase));
        }

        // DOM Elements
        const accessScreen = document.getElementById('accessScreen');
        const loginScreen = document.getElementById('loginScreen');
        const applicantForm = document.getElementById('applicantForm');
        const thankYouScreen = document.getElementById('thankYouScreen');
        const memberDashboard = document.getElementById('memberDashboard');
        const applicationsManagementScreen = document.getElementById('applicationsManagementScreen');
        const residentRegistrationScreen = document.getElementById('residentRegistrationScreen');
        const certificateGenerationScreen = document.getElementById('certificateGenerationScreen');
        const reportsDashboardScreen = document.getElementById('reportsDashboardScreen');
        const formViewModal = document.getElementById('formViewModal');
        const formViewContent = document.getElementById('formViewContent');
        
        // Buttons
        const applicantBtn = document.getElementById('applicantBtn');
        const memberBtn = document.getElementById('memberBtn');
        const backToAccessFromLogin = document.getElementById('backToAccessFromLogin');
        const backToAccessFromApplicant = document.getElementById('backToAccessFromApplicant');
        const cancelApplicantForm = document.getElementById('cancelApplicantForm');
        const backToHomeFromThankYou = document.getElementById('backToHomeFromThankYou');
        const logoutBtn = document.getElementById('logoutBtn');
        
        // Application form elements
        const applicationForm = document.getElementById('applicationForm');
        const firstTimeJobSeekerCheckbox = document.getElementById('firstTimeJobSeeker');
        const additionalJobSeekerForm = document.getElementById('additionalJobSeekerForm');
        const lengthStayInput = document.getElementById('lengthStay');
        const stayUnitSelect = document.getElementById('stayUnit');
        const nationalitySelect = document.getElementById('nationality');
        const newApplicationBtn = document.getElementById('newApplicationBtn');
        
        // Image upload elements
        const imageUpload = document.getElementById('imageUpload');
        const uploadTrigger = document.getElementById('uploadTrigger');
        const changePhotoBtn = document.getElementById('changePhotoBtn');
        const imagePreview = document.getElementById('imagePreview');
        const fileName = document.getElementById('fileName');
        
        // Dashboard navigation buttons
        const applicationsManagementBtn = document.getElementById('applicationsManagementBtn');
        const residentRegistrationBtn = document.getElementById('residentRegistrationBtn');
        const certificateGenerationBtn = document.getElementById('certificateGenerationBtn');
        const reportsDashboardBtn = document.getElementById('reportsDashboardBtn');
        
        // Back buttons from sub-screens
        const backToDashboardFromApps = document.getElementById('backToDashboardFromApps');
        const backToDashboardFromRegistration = document.getElementById('backToDashboardFromRegistration');
        const backToDashboardFromCertificates = document.getElementById('backToDashboardFromCertificates');
        const backToDashboardFromReports = document.getElementById('backToDashboardFromReports');
        
        // Modal buttons
        const closeModalBtn = document.getElementById('closeModalBtn');
        const closeModal = document.getElementById('closeModal');
        
        // Demo credentials
        const validCredentials = [
            { username: 'admin', password: 'barangay2023', name: 'Administrator' },
            { username: 'staff', password: 'pilarvillage', name: 'Staff Member' }
        ];

        // Sample activity data
        const sampleActivity = [
            { time: '10:30 AM', activity: 'Certificate of Residency approved', user: 'Juan Dela Cruz', status: 'approved' },
            { time: '9:15 AM', activity: 'First Time Job Seeker application submitted', user: 'Maria Santos', status: 'pending' },
            { time: 'Yesterday', activity: 'Barangay Meeting scheduled', user: 'System', status: 'info' },
            { time: 'Nov 28', activity: 'Database backup completed', user: 'System', status: 'info' },
            { time: 'Nov 27', activity: 'Certificate of Indigency rejected', user: 'Pedro Garcia', status: 'rejected' }
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            populateNationalityDropdown();
            setupEventListeners();
            updateDashboardStats();
            populateApplicationsTable();
            populateRecentActivity();
            populateReportTable();
        });

        function setupEventListeners() {
            // Main navigation
            applicantBtn.addEventListener('click', () => {
                accessScreen.classList.add('hidden');
                applicantForm.classList.remove('hidden');
                resetApplicationForm();
            });
            
            memberBtn.addEventListener('click', () => {
                accessScreen.classList.add('hidden');
                loginScreen.classList.remove('hidden');
            });
            
            backToAccessFromLogin.addEventListener('click', () => {
                loginScreen.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            backToAccessFromApplicant.addEventListener('click', () => {
                applicantForm.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            cancelApplicantForm.addEventListener('click', () => {
                if (confirm('Are you sure you want to cancel? All entered data will be lost.')) {
                    applicantForm.classList.add('hidden');
                    accessScreen.classList.remove('hidden');
                }
            });
            
            // Thank you screen navigation
            newApplicationBtn.addEventListener('click', function() {
                thankYouScreen.classList.add('hidden');
                applicantForm.classList.remove('hidden');
                resetApplicationForm();
            });
            
            backToHomeFromThankYou.addEventListener('click', () => {
                thankYouScreen.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            // Login form
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('username').value.trim();
                const password = document.getElementById('password').value;
                
                const validUser = validCredentials.find(
                    cred => cred.username === username && cred.password === password
                );
                
                if (validUser) {
                    document.getElementById('loginError').style.display = 'none';
                    document.getElementById('loggedInUser').textContent = validUser.name;
                    loginScreen.classList.add('hidden');
                    memberDashboard.classList.remove('hidden');
                    this.reset();
                    updateDashboardStats();
                    populateApplicationsTable();
                } else {
                    document.getElementById('loginError').style.display = 'block';
                    document.getElementById('password').value = '';
                }
            });
            
            // Logout
            logoutBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            // Dashboard navigation
            applicationsManagementBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                applicationsManagementScreen.classList.remove('hidden');
                populateApplicationsTable();
            });
            
            residentRegistrationBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                residentRegistrationScreen.classList.remove('hidden');
            });
            
            certificateGenerationBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                certificateGenerationScreen.classList.remove('hidden');
            });
            
            reportsDashboardBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                reportsDashboardScreen.classList.remove('hidden');
            });
            
            // Back buttons
            backToDashboardFromApps.addEventListener('click', () => {
                applicationsManagementScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            backToDashboardFromRegistration.addEventListener('click', () => {
                residentRegistrationScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            backToDashboardFromCertificates.addEventListener('click', () => {
                certificateGenerationScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            backToDashboardFromReports.addEventListener('click', () => {
                reportsDashboardScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            // Application form event listeners
            // Image upload handling
            uploadTrigger.addEventListener('click', () => {
                imageUpload.click();
            });
            
            changePhotoBtn.addEventListener('click', () => {
                imageUpload.click();
            });
            
            imageUpload.addEventListener('change', function() {
                if (this.files && this.files[0]) {
                    const file = this.files[0];
                    
                    // Check file type
                    if (!file.type.match('image/png') && !file.type.match('image/jpeg')) {
                        alert('Please upload a PNG or JPG image file.');
                        this.value = '';
                        return;
                    }
                    
                    // Check file size (max 5MB)
                    if (file.size > 5 * 1024 * 1024) {
                        alert('File size should be less than 5MB.');
                        this.value = '';
                        return;
                    }
                    
                    // Display file name
                    fileName.textContent = `Selected file: ${file.name}`;
                    
                    // Preview image
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        imagePreview.src = e.target.result;
                        imagePreview.style.display = 'block';
                        
                        // Hide upload button and show change button
                        uploadTrigger.classList.add('hidden');
                        changePhotoBtn.classList.remove('hidden');
                    }
                    reader.readAsDataURL(file);
                }
            });
            
            // First Time Job Seeker Checkbox
            firstTimeJobSeekerCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    additionalJobSeekerForm.classList.remove('hidden');
                } else {
                    hideAdditionalForm();
                }
            });
            
            // School checkbox handlers
            document.querySelectorAll('.school-checkbox input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const schoolNameInput = document.getElementById(this.id + 'Name');
                    const courseInput = document.getElementById(this.id.replace('School', 'Course'));
                    
                    if (this.checked) {
                        schoolNameInput.classList.remove('hidden');
                        schoolNameInput.required = true;
                        
                        // Show course input for college or vocational school
                        if (courseInput) {
                            courseInput.classList.remove('hidden');
                            courseInput.required = true;
                        }
                    } else {
                        schoolNameInput.classList.add('hidden');
                        schoolNameInput.required = false;
                        schoolNameInput.value = '';
                        
                        if (courseInput) {
                            courseInput.classList.add('hidden');
                            courseInput.required = false;
                            courseInput.value = '';
                        }
                    }
                });
            });
            
            // Length of Stay validation
            stayUnitSelect.addEventListener('change', function() {
                if (this.value === 'months') {
                    lengthStayInput.min = 6;
                    if (lengthStayInput.value && parseInt(lengthStayInput.value) < 6) {
                        lengthStayInput.value = 6;
                    }
                } else {
                    lengthStayInput.min = 1;
                }
            });
            
            // CAPITAL LETTERS ENFORCEMENT
            // Function to check if text contains lowercase letters
            function hasLowercase(text) {
                return /[a-z]/.test(text);
            }
            
            // Function to validate capital letters for a field
            function validateCapitalLetters(inputElement, errorElementId) {
                const value = inputElement.value;
                const errorElement = document.getElementById(errorElementId);
                
                if (value && hasLowercase(value)) {
                    inputElement.classList.add('invalid-input');
                    errorElement.style.display = 'block';
                    return false;
                } else {
                    inputElement.classList.remove('invalid-input');
                    errorElement.style.display = 'none';
                    return true;
                }
            }
            
            // Real-time validation for all text fields
            const textInputs = [
                { id: 'lastName', errorId: 'lastNameError' },
                { id: 'firstName', errorId: 'firstNameError' },
                { id: 'middleName', errorId: 'middleNameError' },
                { id: 'blockLot', errorId: 'blockLotError' },
                { id: 'street', errorId: 'streetError' },
                { id: 'provincialAddress', errorId: 'provincialAddressError' },
                { id: 'birthPlace', errorId: 'birthPlaceError' },
                { id: 'elementarySchoolName', errorId: 'elementarySchoolError' },
                { id: 'juniorHighSchoolName', errorId: 'juniorHighSchoolError' },
                { id: 'seniorHighSchoolName', errorId: 'seniorHighSchoolError' },
                { id: 'collegeName', errorId: 'collegeNameError' },
                { id: 'collegeCourse', errorId: 'collegeCourseError' },
                { id: 'vocationalSchoolName', errorId: 'vocationalSchoolError' },
                { id: 'vocationalCourse', errorId: 'vocationalCourseError' }
            ];
            
            // Add event listeners for real-time validation
            textInputs.forEach(field => {
                const inputElement = document.getElementById(field.id);
                if (inputElement) {
                    inputElement.addEventListener('input', function() {
                        // Convert input to uppercase as user types
                        this.value = this.value.toUpperCase();
                        
                        // Validate capital letters
                        validateCapitalLetters(this, field.errorId);
                    });
                    
                    inputElement.addEventListener('blur', function() {
                        validateCapitalLetters(this, field.errorId);
                    });
                }
            });
            
            // For textarea elements (provincial address)
            const provincialAddress = document.getElementById('provincialAddress');
            provincialAddress.addEventListener('input', function() {
                this.value = this.value.toUpperCase();
                validateCapitalLetters(this, 'provincialAddressError');
            });
            
            provincialAddress.addEventListener('blur', function() {
                validateCapitalLetters(this, 'provincialAddressError');
            });
            
            // Form Submission with capital letters validation
            applicationForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Validate image upload
                if (!imagePreview.src || imagePreview.style.display === 'none') {
                    alert('Please upload a formal image of the applicant.');
                    uploadTrigger.focus();
                    return;
                }
                
                // Validate length of stay (minimum 6 months if months is selected)
                const lengthStay = lengthStayInput.value;
                const stayUnit = stayUnitSelect.value;
                
                if (stayUnit === 'months' && lengthStay < 6) {
                    alert("Minimum length of stay should be 6 months when selecting 'Months' as the unit.");
                    lengthStayInput.focus();
                    return;
                }
                
                // Validate capital letters for all text fields
                let allFieldsValid = true;
                textInputs.forEach(field => {
                    const inputElement = document.getElementById(field.id);
                    if (inputElement && inputElement.value.trim() !== '') {
                        if (!validateCapitalLetters(inputElement, field.errorId)) {
                            allFieldsValid = false;
                            inputElement.focus();
                        }
                    }
                });
                
                if (!allFieldsValid) {
                    alert("Please use CAPITAL LETTERS for all text fields.");
                    return;
                }
                
                // Validate first time job seeker additional info
                let jobSeekerData = null;
                if (firstTimeJobSeekerCheckbox.checked) {
                    const selectedSchools = document.querySelectorAll('.school-checkbox input[type="checkbox"]:checked');
                    if (selectedSchools.length === 0) {
                        alert("Please select at least one educational background for first time job seekers.");
                        return;
                    }
                    
                    // Check that school names are provided for selected schools
                    let allValid = true;
                    jobSeekerData = {};
                    
                    selectedSchools.forEach(schoolCheckbox => {
                        const schoolNameInput = document.getElementById(schoolCheckbox.id + 'Name');
                        if (!schoolNameInput.value.trim()) {
                            allValid = false;
                            schoolNameInput.focus();
                        } else {
                            const schoolType = schoolCheckbox.id.replace('School', '');
                            jobSeekerData[schoolType] = {
                                name: schoolNameInput.value.trim()
                            };
                            
                            // Add course if applicable
                            const courseInput = document.getElementById(schoolCheckbox.id.replace('School', 'Course'));
                            if (courseInput && courseInput.value.trim()) {
                                jobSeekerData[schoolType].course = courseInput.value.trim();
                            }
                        }
                    });
                    
                    if (!allValid) {
                        alert("Please provide the name of the school/institution for each selected educational background.");
                        return;
                    }
                }
                
                // Create applicant object with image data
                const applicant = {
                    id: Date.now(), // Simple ID generation
                    photo: imagePreview.src,
                    lastName: document.getElementById('lastName').value.toUpperCase(),
                    firstName: document.getElementById('firstName').value.toUpperCase(),
                    middleName: document.getElementById('middleName').value.toUpperCase(),
                    blockLot: document.getElementById('blockLot').value.toUpperCase(),
                    street: document.getElementById('street').value.toUpperCase(),
                    subdivision: document.getElementById('subdivision').value,
                    provincialAddress: document.getElementById('provincialAddress').value.toUpperCase(),
                    contactNumber: document.getElementById('contactNumber').value,
                    age: document.getElementById('age').value,
                    lengthStay: lengthStay + ' ' + stayUnit,
                    birthday: formatDate(document.getElementById('birthday').value),
                    birthPlace: document.getElementById('birthPlace').value.toUpperCase(),
                    nationality: document.getElementById('nationality').value,
                    sex: document.getElementById('sex').value,
                    civilStatus: document.getElementById('civilStatus').value,
                    purpose: document.getElementById('purpose').value,
                    isFirstTimeJobSeeker: firstTimeJobSeekerCheckbox.checked,
                    jobSeekerData: jobSeekerData,
                    status: 'Pending',
                    dateSubmitted: new Date().toLocaleDateString()
                };
                
                // Add to database
                applicantsDatabase.push(applicant);
                localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
                
                // Show thank you screen
                applicantForm.classList.add('hidden');
                thankYouScreen.classList.remove('hidden');
            });
            
            // Applications Management
            document.getElementById('applyFilters').addEventListener('click', applyFilters);
            document.getElementById('resetFilters').addEventListener('click', resetFilters);
            document.getElementById('exportApplications').addEventListener('click', () => {
                alert('Exporting applications to Excel...');
            });
            
            // Certificate Generation
            document.getElementById('certificateType').addEventListener('change', updateCertificatePreview);
            document.getElementById('certificateRecipient').addEventListener('input', showResidentSuggestions);
            document.getElementById('previewCertificate').addEventListener('click', updateCertificatePreview);
            document.getElementById('printCertificate').addEventListener('click', () => {
                window.print();
            });
            document.getElementById('saveCertificate').addEventListener('click', () => {
                alert('Certificate saved and generated successfully!');
            });
            
            // Reports
            document.getElementById('generateReport').addEventListener('click', generateReport);
            document.getElementById('exportReport').addEventListener('click', () => {
                alert('Report exported as PDF successfully!');
            });
            
            // Resident Registration
            document.getElementById('residentRegistrationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const resident = {
                    id: Date.now(),
                    lastName: document.getElementById('residentLastName').value.toUpperCase(),
                    firstName: document.getElementById('residentFirstName').value.toUpperCase(),
                    middleName: document.getElementById('residentMiddleName').value.toUpperCase(),
                    birthdate: document.getElementById('residentBirthdate').value,
                    age: document.getElementById('residentAge').value,
                    civilStatus: document.getElementById('residentCivilStatus').value,
                    contact: document.getElementById('residentContact').value,
                    email: document.getElementById('residentEmail').value,
                    occupation: document.getElementById('residentOccupation').value.toUpperCase(),
                    blockLot: document.getElementById('residentBlockLot').value.toUpperCase(),
                    street: document.getElementById('residentStreet').value.toUpperCase(),
                    subdivision: document.getElementById('residentSubdivision').value,
                    lengthStay: document.getElementById('residentLengthStay').value + ' ' + document.getElementById('residentStayUnit').value,
                    notes: document.getElementById('residentNotes').value,
                    dateRegistered: new Date().toLocaleDateString()
                };
                
                residentsDatabase.push(resident);
                localStorage.setItem('residentsDatabase', JSON.stringify(residentsDatabase));
                
                alert('Resident registered successfully!');
                this.reset();
                
                // Update dashboard stats
                updateDashboardStats();
            });
            
            // Modal close buttons
            closeModalBtn.addEventListener('click', () => {
                formViewModal.classList.add('hidden');
            });
            
            closeModal.addEventListener('click', () => {
                formViewModal.classList.add('hidden');
            });
            
            // Close modal when clicking outside
            formViewModal.addEventListener('click', (e) => {
                if (e.target === formViewModal) {
                    formViewModal.classList.add('hidden');
                }
            });
        }

        // Application Management Functions
        function populateApplicationsTable() {
            const tableBody = document.getElementById('applicationsTable');
            tableBody.innerHTML = '';
            
            if (applicantsDatabase.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `<td colspan="6" style="text-align: center; padding: 30px;">No applications found</td>`;
                tableBody.appendChild(row);
                return;
            }
            
            applicantsDatabase.forEach(app => {
                const row = document.createElement('tr');
                
                let statusClass = 'status-pending';
                if (app.status === 'Approved') statusClass = 'status-approved';
                if (app.status === 'Rejected') statusClass = 'status-rejected';
                
                row.innerHTML = `
                    <td>${app.id}</td>
                    <td>${app.lastName}, ${app.firstName} ${app.middleName || ''}</td>
                    <td>${app.purpose}</td>
                    <td>${app.dateSubmitted}</td>
                    <td><span class="status-badge ${statusClass}">${app.status.toUpperCase()}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn view-btn" onclick="viewApplicationDetails(${app.id})">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="action-btn approve-btn" onclick="approveApplication(${app.id})">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="action-btn reject-btn" onclick="rejectApplication(${app.id})">
                                <i class="fas fa-times"></i> Reject
                            </button>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // Update pagination info
            document.getElementById('paginationInfo').textContent = `Showing ${applicantsDatabase.length} applications`;
        }

        function viewApplicationDetails(appId) {
            const applicant = applicantsDatabase.find(app => app.id === appId);
            
            if (!applicant) {
                alert('Application not found!');
                return;
            }
            
            let jobSeekerInfo = '';
            if (applicant.isFirstTimeJobSeeker && applicant.jobSeekerData) {
                jobSeekerInfo = '<h3>Educational Background</h3>';
                for (const [key, data] of Object.entries(applicant.jobSeekerData)) {
                    jobSeekerInfo += `<p><strong>${key}:</strong> ${data.name}${data.course ? ` (${data.course})` : ''}</p>`;
                }
            }
            
            formViewContent.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <img src="${applicant.photo}" alt="Applicant Photo" style="width: 150px; height: 150px; object-fit: cover; border: 3px solid var(--blue-light); border-radius: 8px;">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Last Name</label>
                        <input type="text" value="${applicant.lastName}" readonly>
                    </div>
                    <div class="form-group">
                        <label>First Name</label>
                        <input type="text" value="${applicant.firstName}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Middle Name</label>
                        <input type="text" value="${applicant.middleName || ''}" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Block and Lot</label>
                        <input type="text" value="${applicant.blockLot}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Street</label>
                        <input type="text" value="${applicant.street}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Subdivision</label>
                        <input type="text" value="${applicant.subdivision}" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <label>Provincial Address</label>
                    <textarea rows="3" readonly>${applicant.provincialAddress}</textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Contact Number</label>
                        <input type="text" value="${applicant.contactNumber}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Age</label>
                        <input type="text" value="${applicant.age}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Length of Stay</label>
                        <input type="text" value="${applicant.lengthStay}" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Birthday</label>
                        <input type="text" value="${applicant.birthday}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Place of Birth</label>
                        <input type="text" value="${applicant.birthPlace}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Nationality</label>
                        <input type="text" value="${applicant.nationality}" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Sex</label>
                        <input type="text" value="${applicant.sex}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Civil Status</label>
                        <input type="text" value="${applicant.civilStatus}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Purpose</label>
                        <input type="text" value="${applicant.purpose}" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <label>First Time Job Seeker</label>
                    <input type="text" value="${applicant.isFirstTimeJobSeeker ? 'YES' : 'NO'}" readonly>
                </div>
                ${jobSeekerInfo}
                <div class="form-row">
                    <div class="form-group">
                        <label>Status</label>
                        <input type="text" value="${applicant.status}" readonly style="font-weight: bold; color: ${applicant.status === 'Approved' ? 'green' : applicant.status === 'Rejected' ? 'red' : 'orange'}">
                    </div>
                    <div class="form-group">
                        <label>Date Submitted</label>
                        <input type="text" value="${applicant.dateSubmitted}" readonly>
                    </div>
                </div>
            `;
            
            formViewModal.classList.remove('hidden');
        }

        function approveApplication(appId) {
            if (confirm('Approve this application?')) {
                const applicantIndex = applicantsDatabase.findIndex(app => app.id === appId);
                if (applicantIndex !== -1) {
                    applicantsDatabase[applicantIndex].status = 'Approved';
                    localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
                    populateApplicationsTable();
                    updateDashboardStats();
                    alert('Application approved successfully!');
                }
            }
        }

        function rejectApplication(appId) {
            if (confirm('Reject this application?')) {
                const applicantIndex = applicantsDatabase.findIndex(app => app.id === appId);
                if (applicantIndex !== -1) {
                    applicantsDatabase[applicantIndex].status = 'Rejected';
                    localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
                    populateApplicationsTable();
                    updateDashboardStats();
                    alert('Application rejected successfully!');
                }
            }
        }

        function applyFilters() {
            const typeFilter = document.getElementById('filterType').value;
            const statusFilter = document.getElementById('filterStatus').value;
            const dateFilter = document.getElementById('filterDate').value;
            
            // Filter applications based on criteria
            let filteredApplications = applicantsDatabase;
            
            if (typeFilter !== 'all') {
                filteredApplications = filteredApplications.filter(app => 
                    app.purpose.toLowerCase().includes(typeFilter.toLowerCase())
                );
            }
            
            if (statusFilter !== 'all') {
                filteredApplications = filteredApplications.filter(app => 
                    app.status.toLowerCase() === statusFilter.toLowerCase()
                );
            }
            
            if (dateFilter) {
                filteredApplications = filteredApplications.filter(app => 
                    app.dateSubmitted === dateFilter
                );
            }
            
            // Update table with filtered applications
            const tableBody = document.getElementById('applicationsTable');
            tableBody.innerHTML = '';
            
            filteredApplications.forEach(app => {
                const row = document.createElement('tr');
                
                let statusClass = 'status-pending';
                if (app.status === 'Approved') statusClass = 'status-approved';
                if (app.status === 'Rejected') statusClass = 'status-rejected';
                
                row.innerHTML = `
                    <td>${app.id}</td>
                    <td>${app.lastName}, ${app.firstName} ${app.middleName || ''}</td>
                    <td>${app.purpose}</td>
                    <td>${app.dateSubmitted}</td>
                    <td><span class="status-badge ${statusClass}">${app.status.toUpperCase()}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn view-btn" onclick="viewApplicationDetails(${app.id})">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="action-btn approve-btn" onclick="approveApplication(${app.id})">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="action-btn reject-btn" onclick="rejectApplication(${app.id})">
                                <i class="fas fa-times"></i> Reject
                            </button>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            if (filteredApplications.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `<td colspan="6" style="text-align: center; padding: 30px;">No applications match the selected filters</td>`;
                tableBody.appendChild(row);
            }
            
            document.getElementById('paginationInfo').textContent = `Showing ${filteredApplications.length} applications`;
        }

        function resetFilters() {
            document.getElementById('filterType').value = 'all';
            document.getElementById('filterStatus').value = 'all';
            document.getElementById('filterDate').value = '';
            populateApplicationsTable();
        }

        // Dashboard Functions
        function updateDashboardStats() {
            // Pending applications
            const pendingApps = applicantsDatabase.filter(app => app.status === 'Pending').length;
            document.getElementById('pendingApplications').textContent = pendingApps;
            
            // Processed today
            const today = new Date().toLocaleDateString();
            const processedToday = applicantsDatabase.filter(app => 
                app.dateSubmitted === today && app.status !== 'Pending'
            ).length;
            document.getElementById('processedToday').textContent = processedToday;
            
            // Total residents
            document.getElementById('totalResidents').textContent = residentsDatabase.length;
        }

        function populateRecentActivity() {
            const tableBody = document.getElementById('recentActivity');
            tableBody.innerHTML = '';
            
            sampleActivity.forEach(activity => {
                const row = document.createElement('tr');
                
                let statusBadge = '';
                if (activity.status === 'approved') {
                    statusBadge = '<span class="status-badge status-approved">APPROVED</span>';
                } else if (activity.status === 'rejected') {
                    statusBadge = '<span class="status-badge status-rejected">REJECTED</span>';
                } else {
                    statusBadge = '<span class="status-badge status-pending">INFO</span>';
                }
                
                row.innerHTML = `
                    <td>${activity.time}</td>
                    <td>${activity.activity}</td>
                    <td>${activity.user}</td>
                    <td>${statusBadge}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function populateReportTable() {
            const tableBody = document.getElementById('reportTable');
            tableBody.innerHTML = '';
            
            // Add sample report data
            for (let i = 1; i <= 10; i++) {
                const date = `2023-11-${i.toString().padStart(2, '0')}`;
                const types = ['Certificate of Residency', 'First Time Job Seeker', 'Certificate of Indigency', 'Business Permit'];
                const type = types[Math.floor(Math.random() * types.length)];
                const resident = applicantsDatabase[Math.floor(Math.random() * Math.min(applicantsDatabase.length, 5))] || { lastName: 'Sample', firstName: 'Applicant' };
                const statuses = ['Pending', 'Approved', 'Rejected'];
                const status = statuses[Math.floor(Math.random() * statuses.length)];
                const officers = ['Juan Dela Cruz', 'Maria Santos', 'Pedro Garcia'];
                const officer = officers[Math.floor(Math.random() * officers.length)];
                const time = `${Math.floor(Math.random() * 3) + 1} days`;
                
                let statusClass = 'status-pending';
                if (status === 'Approved') statusClass = 'status-approved';
                if (status === 'Rejected') statusClass = 'status-rejected';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${date}</td>
                    <td>${type}</td>
                    <td>${resident ? resident.lastName + ', ' + resident.firstName : 'Sample Applicant'}</td>
                    <td><span class="status-badge ${statusClass}">${status.toUpperCase()}</span></td>
                    <td>${officer}</td>
                    <td>${time}</td>
                `;
                
                tableBody.appendChild(row);
            }
        }

        // Certificate Generation Functions
        function updateCertificatePreview() {
            const type = document.getElementById('certificateType').value;
            const recipient = document.getElementById('certificateRecipient').value || '[RECIPIENT NAME]';
            const purpose = document.getElementById('certificatePurpose').value || '[PURPOSE]';
            const date = document.getElementById('certificateDate').value || new Date().toISOString().split('T')[0];
            
            // Update preview
            document.getElementById('previewCertificateType').textContent = 
                type === 'residency' ? 'CERTIFICATE OF RESIDENCY' :
                type === 'indigency' ? 'CERTIFICATE OF INDIGENCY' :
                type === 'goodmoral' ? 'CERTIFICATE OF GOOD MORAL CHARACTER' :
                type === 'employment' ? 'CERTIFICATE OF EMPLOYMENT' :
                type === 'nocriminal' ? 'NO CRIMINAL RECORD' :
                type === 'soloparent' ? 'SOLO PARENT CERTIFICATION' :
                'CERTIFICATE';
            
            document.getElementById('previewRecipient').textContent = recipient;
            document.getElementById('previewPurpose').textContent = purpose;
            document.getElementById('previewDate').textContent = formatDate(date);
            
            // Set sample address and length of stay
            document.getElementById('previewAddress').textContent = 'Block 5, Lot 12, Pilar Village';
            document.getElementById('previewLengthStay').textContent = '5 years';
        }

        function showResidentSuggestions() {
            const input = document.getElementById('certificateRecipient').value.toLowerCase();
            const suggestionsDiv = document.getElementById('residentSuggestions');
            
            if (input.length < 2) {
                suggestionsDiv.style.display = 'none';
                return;
            }
            
            const filtered = residentsDatabase.filter(r => 
                (r.lastName + ' ' + r.firstName).toLowerCase().includes(input)
            );
            
            if (filtered.length > 0) {
                suggestionsDiv.innerHTML = filtered.map(r => 
                    `<div style="padding: 5px; border-bottom: 1px solid #eee; cursor: pointer;" 
                          onclick="selectResident('${r.lastName}, ${r.firstName}', '${r.blockLot}, ${r.street}, ${r.subdivision}')">
                        ${r.lastName}, ${r.firstName} - ${r.blockLot}, ${r.street}, ${r.subdivision}
                    </div>`
                ).join('');
                suggestionsDiv.style.display = 'block';
            } else {
                suggestionsDiv.style.display = 'none';
            }
        }

        function selectResident(name, address) {
            document.getElementById('certificateRecipient').value = name;
            document.getElementById('residentSuggestions').style.display = 'none';
            // You could also populate address fields if needed
        }

        function generateReport() {
            const type = document.getElementById('reportType').value;
            const month = document.getElementById('reportMonth').value;
            const year = document.getElementById('reportYear').value;
            
            alert(`Generating ${type} report for ${getMonthName(month)} ${year}...\n\nIn a real system, this would fetch data from the database and update the report table.`);
        }

        // Helper Functions
        function resetApplicationForm() {
            applicationForm.reset();
            hideAdditionalForm();
            resetImageUpload();
            clearAllErrorMessages();
            
            // Initialize length stay validation
            stayUnitSelect.dispatchEvent(new Event('change'));
        }

        function hideAdditionalForm() {
            additionalJobSeekerForm.classList.add('hidden');
            
            // Uncheck all school checkboxes
            document.querySelectorAll('.school-checkbox input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            
            // Hide all school name inputs
            document.querySelectorAll('.school-name-input, .course-input').forEach(input => {
                input.classList.add('hidden');
                input.value = '';
                input.required = false;
            });
        }

        function resetImageUpload() {
            imagePreview.style.display = 'none';
            imagePreview.src = '';
            fileName.textContent = '';
            imageUpload.value = '';
            // Show upload button, hide change button
            uploadTrigger.classList.remove('hidden');
            changePhotoBtn.classList.add('hidden');
        }

        function clearAllErrorMessages() {
            const textInputs = [
                { id: 'lastName', errorId: 'lastNameError' },
                { id: 'firstName', errorId: 'firstNameError' },
                { id: 'middleName', errorId: 'middleNameError' },
                { id: 'blockLot', errorId: 'blockLotError' },
                { id: 'street', errorId: 'streetError' },
                { id: 'provincialAddress', errorId: 'provincialAddressError' },
                { id: 'birthPlace', errorId: 'birthPlaceError' },
                { id: 'elementarySchoolName', errorId: 'elementarySchoolError' },
                { id: 'juniorHighSchoolName', errorId: 'juniorHighSchoolError' },
                { id: 'seniorHighSchoolName', errorId: 'seniorHighSchoolError' },
                { id: 'collegeName', errorId: 'collegeNameError' },
                { id: 'collegeCourse', errorId: 'collegeCourseError' },
                { id: 'vocationalSchoolName', errorId: 'vocationalSchoolError' },
                { id: 'vocationalCourse', errorId: 'vocationalCourseError' }
            ];
            
            textInputs.forEach(field => {
                const inputElement = document.getElementById(field.id);
                const errorElement = document.getElementById(field.errorId);
                
                if (inputElement) {
                    inputElement.classList.remove('invalid-input');
                }
                
                if (errorElement) {
                    errorElement.style.display = 'none';
                }
            });
        }

        function populateNationalityDropdown() {
            // List of all nationalities/countries
            const nationalities = [
                "FILIPINO", "AFGHAN", "ALBANIAN", "ALGERIAN", "AMERICAN", "ANDORRAN", "ANGOLAN", 
                "ANTIGUAN", "ARGENTINE", "ARMENIAN", "AUSTRALIAN", "AUSTRIAN", "AZERBAIJANI", 
                "BAHAMIAN", "BAHRAINI", "BANGLADESHI", "BARBADIAN", "BELARUSIAN", "BELGIAN", 
                "BELIZEAN", "BENINESE", "BHUTANESE", "BOLIVIAN", "BOSNIAN", "BOTSWANAN", 
                "BRAZILIAN", "BRITISH", "BRUNEIAN", "BULGARIAN", "BURKINABE", "BURMESE", 
                "BURUNDIAN", "CAMBODIAN", "CAMEROONIAN", "CANADIAN", "CAPE VERDEAN", 
                "CENTRAL AFRICAN", "CHADIAN", "CHILEAN", "CHINESE", "COLOMBIAN", "COMORAN", 
                "CONGOLESE", "COSTA RICAN", "CROATIAN", "CUBAN", "CYPRIOT", "CZECH", 
                "DANISH", "DJIBOUTIAN", "DOMINICAN", "DUTCH", "EAST TIMORESE", "ECUADOREAN", 
                "EGYPTIAN", "EMIRATI", "EQUATORIAL GUINEAN", "ERITREAN", "ESTONIAN", 
                "ETHIOPIAN", "FIJIAN", "FINNISH", "FRENCH", "GABONESE", "GAMBIAN", 
                "GEORGIAN", "GERMAN", "GHANAIAN", "GREEK", "GRENADIAN", "GUATEMALAN", 
                "GUINEAN", "GUYANESE", "HAITIAN", "HONDURAN", "HUNGARIAN", "ICELANDIC", 
                "INDIAN", "INDONESIAN", "IRANIAN", "IRAQI", "IRISH", "ISRAELI", "ITALIAN", 
                "IVORIAN", "JAMAICAN", "JAPANESE", "JORDANIAN", "KAZAKH", "KENYAN", 
                "KIRIBATI", "KOREAN", "KOSOVAR", "KUWAITI", "KYRGYZ", "LAOTIAN", "LATVIAN", 
                "LEBANESE", "LIBERIAN", "LIBYAN", "LIECHTENSTEINER", "LITHUANIAN", 
                "LUXEMBOURGER", "MACEDONIAN", "MALAGASY", "MALAWIAN", "MALAYSIAN", 
                "MALDIVIAN", "MALIAN", "MALTESE", "MARSHALLESE", "MAURITANIAN", "MAURITIAN", 
                "MEXICAN", "MICRONESIAN", "MOLDOVAN", "MONACAN", "MONGOLIAN", "MONTENEGRIN", 
                "MOROCCAN", "MOSOTHO", "MOZAMBICAN", "NAMIBIAN", "NAURUAN", "NEPALESE", 
                "NEW ZEALANDER", "NICARAGUAN", "NIGERIAN", "NIGERIEN", "NIUEAN", "NORWEGIAN", 
                "OMANI", "PAKISTANI", "PALAUAN", "PALESTINIAN", "PANAMANIAN", "PAPUA NEW GUINEAN", 
                "PARAGUAYAN", "PERUVIAN", "POLISH", "PORTUGUESE", "QATARI", "ROMANIAN", 
                "RUSSIAN", "RWANDAN", "SAINT LUCIAN", "SALVADORAN", "SAMOAN", "SAN MARINESE", 
                "SAO TOMEAN", "SAUDI", "SCOTTISH", "SENEGALESE", "SERBIAN", "SEYCHELLOIS", 
                "SIERRA LEONEAN", "SINGAPOREAN", "SLOVAK", "SLOVENIAN", "SOLOMON ISLANDER", 
                "SOMALI", "SOUTH AFRICAN", "SOUTH KOREAN", "SOUTH SUDANESE", "SPANISH", 
                "SRI LANKAN", "SUDANESE", "SURINAMER", "SWAZI", "SWEDISH", "SWISS", 
                "SYRIAN", "TAIWANESE", "TAJIK", "TANZANIAN", "THAI", "TOGOLESE", "TONGAN", 
                "TRINIDADIAN", "TUNISIAN", "TURKISH", "TURKMEN", "TUVALUAN", "UGANDAN", 
                "UKRAINIAN", "URUGUAYAN", "UZBEK", "VANUATUAN", "VENEZUELAN", "VIETNAMESE", 
                "WELSH", "YEMENI", "ZAMBIAN", "ZIMBABWEAN"
            ];

            // Sort nationalities alphabetically but keep FILIPINO first
            nationalities.sort((a, b) => {
                if (a === "FILIPINO") return -1;
                if (b === "FILIPINO") return 1;
                return a.localeCompare(b);
            });

            // Populate nationality dropdown with ALL CAPS
            nationalities.forEach(nationality => {
                const option = document.createElement('option');
                option.value = nationality;
                option.textContent = nationality;
                nationalitySelect.appendChild(option);
            });

            // Set FILIPINO as selected by default
            setTimeout(() => {
                const filipinoOption = nationalitySelect.querySelector('option[value="FILIPINO"]');
                if (filipinoOption) {
                    filipinoOption.selected = true;
                }
            }, 100);
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('en-US', options);
        }

        function getMonthName(monthNumber) {
            const months = [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ];
            return months[parseInt(monthNumber) - 1] || '';
        }

        // Initialize certificate preview
        updateCertificatePreview();
        
        // Set today's date as default for certificate date
        document.getElementById('certificateDate').value = new Date().toISOString().split('T')[0];
        document.getElementById('residentBirthdate').value = new Date(new Date().setFullYear(new Date().getFullYear() - 30)).toISOString().split('T')[0];
    </script>
</body>
</html>
I'll create a new application form based on your requirements. Before I provide the complete code, let me clarify a few points from your instructions:

Clarifications Needed:
Searchable Drop-down: You mentioned "the purpose of the application should be in drop-down (that you can search for it, like when you type letters and that the most related would appear)". Do you want:

A regular select dropdown with search functionality using a library like Select2?

Or a custom searchable dropdown that filters options as you type?

Multiple Selection: You said "you can choose multiple purposes in the drop-down list". Should this be:

A multi-select dropdown where users can select multiple options?

Or they can only choose one main purpose, but then get additional purposes for barangay clearance?

Address Format: For "Block and Lot" you mentioned "BLOCK __, LOT __" format. Should this:

Be two separate fields (Block input and Lot input)?

Or one field with automatic formatting?

Street Dropdown Dependency: You said "street (drop-down, which depends on what subdivision...)". Do you have a list of streets for each subdivision that I should include?

Certificate Purposes: You listed 34 certificate purposes under barangay clearance. Should these be selectable individually, or grouped somehow?

Age Calculation: For "automatically input the age after inputting the date of birth", should this:

Be calculated automatically and disabled for editing?

Or calculated but still editable?

Image Upload: You didn't mention the image upload section. Should I keep it or remove it?

Database Structure: Since you want the database to still function as before, I need to understand how the new fields map to the old database structure. The old database stores:

purpose (single value)

Various address fields

Personal information

With the new structure where users can select multiple purposes and get different fields for each, how should this be stored?

What I'll Do Based on My Understanding:
Remove the "USE CAPITAL LETTERS" warning banner

Automatically capitalize all input

Make all fields required (except middle name)

Add input validation (letters only, numbers only)

Format phone number as "09xx xxx xxxx"

Auto-calculate age from birthdate

Create searchable, multi-select dropdown for main purposes

Show conditional fields based on selected purposes

Prevent redundant fields (don't ask for same info twice)

Keep the database functionality intact by mapping new fields appropriately

Should I proceed with these assumptions? Once you confirm, I'll provide the complete updated code with the new application form while keeping all other parts (dashboard, login, etc.) working as before.

1. I want it so that when they type letters, the options that have those letters in them would appear. For example, if the applicant would want a barangay clearance, they would type "ba", and if they have already typed that, only the purposes with "ba" would appear. Which is kind of similar to google search bar, just with this one already having choices.
2. I want it in a way that they can select multiple things in that drop-down. For example, they search for "ba" and ticks "barangay clearance", then they can also search for "1" and also tick "sample 1".
3. I think it would be better if they are separated. Block "field to put number, and number only", then Lot "field to put number and number only".
4. For the subdivisions, those are the correct lists of subdivisions in Pilar, but I currently don't have the correct list for the streets, so maybe you can just create sample streets for now.
5. Can you make it just like the first drop-down in which they can search for it and also be able to select multiple?
6. For the age, it shouldn't be editable anymore.
7. Remove the image upload thing in the applications form.
8. Can you make it so that even if applicants choose multiple purposes in just 1 form that they answer, the way it saves should make it separate. For example, the applicant chose to do 2 documents which are documents A and B in just 1 application form, application A requires age as an information to be put, but since it shouldn't be redundant, the age field wouldn't appear on document B even if it is also required. But, in the database, it should be that there are 2 separate forms that the applicant answered, as if they really did answer 2 different forms, but the document B that the applicant answered also has the "age" included when you view it in the database.

Also, can you capitalize all input except for the barangay member login?

Do you have any more clarifications? If so, you can now send me the complete code that I can just copy and paste. But if not, don't send the code yet and just clarify more.
Perfect! Now I understand everything clearly. Let me implement the new application form with all your requirements. Here are my final clarifications before I provide the code:

Final Clarifications:
Multi-purpose selection: When applicants select multiple purposes (like "barangay clearance" AND "sample 1"), they will see fields for BOTH purposes combined (with no redundancy). The database will store these as separate entries, each containing all necessary information.

Certificate purposes under barangay clearance: You mentioned 34 certificate purposes that appear when "barangay clearance" is selected. Should these also be a searchable multi-select dropdown?

Address fields: I'll create:

Subdivision (dropdown with your list)

Street (dropdown with sample streets for each subdivision)

Block (number only field)

Lot (number only field)

Phone formatting: I'll format as "09xx xxx xxxx" automatically as they type.

Age calculation: Non-editable, auto-calculated from birthdate.

Database structure: Each selected purpose will create a separate entry in the database with all filled information.

Capitalization: All input will be automatically capitalized (except barangay member login).

Searchable dropdowns: I'll use a custom implementation that filters options as you type (no external libraries needed).

Implementation Approach:
Remove image upload section

Create searchable multi-select dropdown for main purposes

Show/hide conditional fields based on selected purposes

Auto-format phone number

Auto-calculate age

Validate all inputs properly

Store each selected purpose as a separate database entry

Keep all other functionality (dashboard, login, etc.) working

The database will store multiple entries when multiple purposes are selected, making it appear as if the applicant filled out multiple forms.

Do you want me to proceed with this implementation? If yes, I'll provide the complete updated code with the new application form.

1. YES, that's exactly what I want.
2. Yes, searchable and multi-select dropdown, just like the other previous dropdown.
3. YES, exactly
4. Yep
5. Yess
6. Yes
7. YESS
8. Yepp

alright, you may now proceed
Complete Updated Barangay Pilar Village Services Portal
Here's the complete updated code with the new application form based on all your requirements:

html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barangay Pilar Village Services Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --blue-dark: #003380;
            --blue-medium: #0047AB;
            --blue-light: #0756CE;
            --red: #CE1126;
            --yellow: #FCD116;
            --green: #28a745;
            --orange: #fd7e14;
            --purple: #6f42c1;
            --gray-light: #f5f5f5;
            --gray-medium: #e0e0e0;
            --gray-dark: #333333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--gray-light);
            color: var(--gray-dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }

        @media (max-width: 1400px) {
            .container {
                max-width: 1200px;
            }
        }
        
        @media (max-width: 1200px) {
            .container {
                max-width: 1000px;
            }
        }
        
        @media (max-width: 992px) {
            .container {
                max-width: 800px;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                max-width: 95%;
                padding: 15px;
            }
        }

        header {
            background: linear-gradient(to right, var(--blue-dark), var(--blue-medium));
            color: white;
            padding: 20px 0;
            text-align: center;
            border-bottom: 5px solid var(--yellow);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }

        .logo {
            font-size: 2.5rem;
            margin-right: 15px;
            color: var(--yellow);
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .tagline {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Common screen styles */
        .screen {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-top: 30px;
        }

        h2 {
            color: var(--blue-dark);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--yellow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h3 {
            color: var(--blue-medium);
            margin: 20px 0 15px 0;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-btn i {
            font-size: 1.2rem;
        }

        .primary-btn {
            background-color: var(--blue-medium);
            color: white;
        }

        .primary-btn:hover {
            background-color: var(--blue-dark);
            transform: translateY(-2px);
        }

        .secondary-btn {
            background-color: var(--gray-medium);
            color: var(--gray-dark);
        }

        .secondary-btn:hover {
            background-color: #d0d0d0;
        }

        .danger-btn {
            background-color: var(--red);
            color: white;
        }

        .danger-btn:hover {
            background-color: #b31022;
        }

        .success-btn {
            background-color: var(--green);
            color: white;
        }

        .success-btn:hover {
            background-color: #218838;
        }

        .hidden {
            display: none !important;
        }

        /* Applicant Form Specific Styles */
        .applicant-form {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-top: 30px;
        }

        .thank-you-screen {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-top: 30px;
            text-align: center;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .form-row .form-group {
            flex: 1;
            min-width: 250px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--blue-dark);
        }

        .required::after {
            content: " *";
            color: var(--red);
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--gray-medium);
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s;
            background-color: white;
        }

        /* Add uppercase styling to text inputs */
        input[type="text"], input[type="tel"], textarea, .custom-select-input {
            text-transform: uppercase;
        }

        input::placeholder, textarea::placeholder {
            color: #888;
            font-style: italic;
        }

        select {
            color: #333;
        }

        select option:first-child {
            color: #888;
            font-style: italic;
        }

        input:focus, select:focus, textarea:focus, .custom-select-input:focus {
            border-color: var(--blue-light);
            outline: none;
            box-shadow: 0 0 0 3px rgba(7, 86, 206, 0.2);
        }

        /* Style for invalid input */
        .invalid-input {
            border-color: var(--red) !important;
            background-color: #fff0f0;
        }

        .error-message {
            color: var(--red);
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
        }

        .length-stay-container {
            display: flex;
            gap: 10px;
        }

        .length-stay-container input {
            flex: 3;
        }

        .length-stay-container select {
            flex: 1;
            min-width: 120px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }

        .checkbox-group label {
            margin-bottom: 0;
        }

        .additional-form {
            background-color: #f0f8ff;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid var(--blue-medium);
        }

        .additional-form h3 {
            color: var(--blue-dark);
            margin-bottom: 15px;
            text-align: center;
        }

        .submit-btn {
            background-color: var(--blue-medium);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
            width: 100%;
            max-width: 300px;
            text-decoration: none;
            display: inline-block;
        }

        .submit-btn:hover {
            background-color: var(--blue-dark);
            transform: scale(1.05);
        }

        .back-btn {
            background-color: var(--gray-medium);
            color: var(--gray-dark);
            margin-right: 15px;
        }

        .back-btn:hover {
            background-color: #b0b0b0;
        }

        .thank-you-screen h2 {
            color: var(--blue-dark);
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .thank-you-screen h3 {
            color: var(--blue-medium);
            font-size: 1.4rem;
            margin-bottom: 30px;
            font-weight: normal;
        }

        .thank-you-icon {
            font-size: 4rem;
            color: var(--blue-light);
            margin: 30px 0;
        }

        /* FIXED: Button container alignment for thank you screen */
        .thank-you-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        /* Custom Select Styles */
        .custom-select-container {
            position: relative;
            margin-bottom: 20px;
        }

        .custom-select-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--gray-medium);
            border-radius: 6px;
            font-size: 1rem;
            background-color: white;
            cursor: pointer;
        }

        .custom-select-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            max-height: 300px;
            overflow-y: auto;
            background-color: white;
            border: 2px solid var(--gray-medium);
            border-top: none;
            border-radius: 0 0 6px 6px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            z-index: 100;
            display: none;
        }

        .custom-select-option {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--gray-light);
            transition: background-color 0.2s;
        }

        .custom-select-option:hover {
            background-color: var(--gray-light);
        }

        .custom-select-option.selected {
            background-color: rgba(7, 86, 206, 0.1);
            color: var(--blue-dark);
            font-weight: 600;
        }

        .custom-select-option.selected::after {
            content: " ‚úì";
            color: var(--green);
            float: right;
        }

        .custom-select-selected {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .selected-tag {
            background-color: var(--blue-light);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .selected-tag .remove-tag {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0;
            margin-left: 5px;
        }

        /* Purpose-specific sections */
        .purpose-section {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid var(--blue-medium);
        }

        .purpose-section h3 {
            color: var(--blue-dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .purpose-section h3 i {
            color: var(--blue-medium);
        }

        /* Block and Lot container */
        .block-lot-container {
            display: flex;
            gap: 20px;
        }

        .block-lot-container .form-group {
            flex: 1;
        }

        /* Table Styles */
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th {
            background-color: var(--blue-dark);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--gray-medium);
        }

        tr:hover {
            background-color: rgba(7, 86, 206, 0.05);
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
        }

        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-approved {
            background-color: #d4edda;
            color: #155724;
        }

        .status-rejected {
            background-color: #f8d7da;
            color: #721c24;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .view-btn {
            background-color: var(--blue-light);
            color: white;
        }

        .approve-btn {
            background-color: var(--green);
            color: white;
        }

        .reject-btn {
            background-color: var(--red);
            color: white;
        }

        /* Dashboard Stats */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-top: 4px solid var(--blue-medium);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2.5rem;
            color: var(--blue-medium);
            margin-bottom: 15px;
        }

        .stat-card h3 {
            font-size: 2.2rem;
            color: var(--blue-dark);
            margin: 10px 0;
        }

        .stat-card p {
            color: var(--gray-dark);
            font-size: 0.95rem;
        }

        /* Certificate Preview */
        .certificate-preview {
            background-color: white;
            border: 2px solid var(--gray-medium);
            border-radius: 8px;
            padding: 40px;
            margin-top: 20px;
            min-height: 400px;
            position: relative;
            background-image: url('data:image/svg+xml;utf8,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><path d="M0,0 L100,0 L100,100 L0,100 Z" fill="none" stroke="%23FCD116" stroke-width="2" stroke-dasharray="5,5"/></svg>');
            background-size: 100px 100px;
        }

        .certificate-header {
            text-align: center;
            border-bottom: 3px double var(--blue-dark);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .certificate-header h2 {
            color: var(--blue-dark);
            font-size: 2.2rem;
            border: none;
            margin: 0;
            padding: 0;
        }

        .certificate-body {
            padding: 30px;
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .certificate-footer {
            position: absolute;
            bottom: 40px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
            padding-top: 30px;
            border-top: 1px solid var(--gray-medium);
        }

        .signature-box {
            text-align: center;
        }

        .signature-line {
            width: 200px;
            border-top: 1px solid var(--gray-dark);
            margin: 40px auto 10px;
        }

        /* Filter Controls */
        .filter-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            background-color: var(--gray-light);
            padding: 20px;
            border-radius: 8px;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .filter-btn {
            align-self: flex-end;
            padding: 10px 20px;
        }

        /* Form View Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            margin: 0;
            border: none;
            padding: 0;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-dark);
        }

        /* Footer */
        footer {
            background-color: var(--blue-dark);
            color: white;
            padding: 30px 0;
            margin-top: 40px;
            text-align: center;
        }

        .footer-content {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .footer-section {
            flex: 1;
            min-width: 300px;
            margin: 15px 0;
        }

        .footer-section h3 {
            color: var(--yellow);
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .footer-section p {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .footer-section i {
            margin-right: 10px;
            color: var(--yellow);
            min-width: 20px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .screen, .applicant-form, .thank-you-screen {
                padding: 20px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .block-lot-container {
                flex-direction: column;
                gap: 0;
            }
            
            .nav-buttons {
                flex-direction: column;
            }
            
            .nav-btn {
                width: 100%;
                justify-content: center;
            }
            
            .footer-content {
                flex-direction: column;
                text-align: center;
            }
            
            .thank-you-buttons {
                flex-direction: column;
                align-items: center;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.7rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo-container">
                <i class="fas fa-landmark logo"></i>
                <div>
                    <h1>Barangay Pilar Village Services Portal</h1>
                    <p class="tagline">Serving The Community With Integrity And Excellence</p>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Access Selection Screen -->
        <div id="accessScreen" class="screen">
            <h2>Welcome to the Barangay Pilar Village Services Portal</h2>
            <p>Please select your access type:</p>
            
            <div class="nav-buttons">
                <button class="nav-btn primary-btn" id="applicantBtn">
                    <i class="fas fa-user-edit"></i>
                    Open as Applicant
                </button>
                
                <button class="nav-btn primary-btn" id="memberBtn">
                    <i class="fas fa-user-lock"></i>
                    Open as Barangay Member
                </button>
            </div>
        </div>

        <!-- Login Screen for Barangay Members -->
        <div id="loginScreen" class="screen hidden">
            <h2>Barangay Member Login</h2>
            <p>Enter your credentials to access the barangay management system</p>
            
            <div id="loginError" class="error-message" style="background-color: #f8d7da; color: #721c24; padding: 12px; border-radius: 6px; margin-bottom: 20px; display: none;">
                <i class="fas fa-exclamation-circle"></i> Invalid username or password. Please try again.
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="username" class="required">Username</label>
                    <input type="text" id="username" placeholder="Enter your username" required style="text-transform: none;">
                </div>
                
                <div class="form-group">
                    <label for="password" class="required">Password</label>
                    <input type="password" id="password" placeholder="Enter your password" required style="text-transform: none;">
                </div>
                
                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="rememberMe">
                        <label for="rememberMe">Remember me</label>
                    </div>
                </div>
                
                <div class="nav-buttons">
                    <button type="button" class="nav-btn secondary-btn" id="backToAccessFromLogin">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <button type="submit" class="nav-btn primary-btn">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </div>
                
                <div style="margin-top: 20px; text-align: center; font-size: 0.9rem; color: var(--gray-dark);">
                    <p>Demo Credentials:</p>
                    <p><strong>Username:</strong> admin | <strong>Password:</strong> barangay2023</p>
                    <p><strong>Username:</strong> staff | <strong>Password:</strong> pilarvillage</p>
                </div>
            </form>
        </div>

        <!-- Application Form Screen -->
        <div id="applicantForm" class="applicant-form hidden">
            <h2>
                Application Form
                <button class="nav-btn secondary-btn" id="backToAccessFromApplicant">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </button>
            </h2>

            <form id="applicationForm">
                <!-- Personal Information -->
                <h3>Personal Information</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="lastName" class="required">Last Name</label>
                        <input type="text" id="lastName" placeholder="ENTER LAST NAME" required>
                        <div class="error-message" id="lastNameError">Please enter letters only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="firstName" class="required">First Name</label>
                        <input type="text" id="firstName" placeholder="ENTER FIRST NAME" required>
                        <div class="error-message" id="firstNameError">Please enter letters only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="middleName">Middle Name</label>
                        <input type="text" id="middleName" placeholder="ENTER MIDDLE NAME">
                        <div class="error-message" id="middleNameError">Please enter letters only</div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="contactNumber" class="required">Contact Number</label>
                        <input type="tel" id="contactNumber" placeholder="0912 345 6789" required>
                        <div class="error-message" id="contactNumberError">Please enter a valid 11-digit phone number starting with 09</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="birthday" class="required">Birthday</label>
                        <input type="date" id="birthday" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="age" class="required">Age</label>
                        <input type="text" id="age" placeholder="AGE" readonly style="background-color: #f5f5f5;">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="birthPlace" class="required">Place of Birth</label>
                        <input type="text" id="birthPlace" placeholder="CITY, PROVINCE" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="nationality" class="required">Nationality</label>
                        <select id="nationality" required>
                            <option value="" disabled selected>SELECT NATIONALITY</option>
                            <!-- Nationalities will be populated by JavaScript -->
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="sex" class="required">Sex</label>
                        <select id="sex" required>
                            <option value="" disabled selected>SELECT SEX</option>
                            <option value="MALE">MALE</option>
                            <option value="FEMALE">FEMALE</option>
                        </select>
                    </div>
                </div>

                <!-- Purpose of Application -->
                <div class="form-group">
                    <label class="required">Purpose of Application</label>
                    <div class="custom-select-container" id="purposeSelectContainer">
                        <input type="text" class="custom-select-input" id="purposeSearch" placeholder="TYPE TO SEARCH FOR PURPOSES...">
                        <div class="custom-select-dropdown" id="purposeDropdown">
                            <!-- Options will be populated by JavaScript -->
                        </div>
                        <div class="custom-select-selected" id="selectedPurposes">
                            <!-- Selected purposes will appear here -->
                        </div>
                    </div>
                </div>

                <!-- Purpose-specific sections will be dynamically added here -->
                <div id="purposeSections"></div>

                <!-- Submit Button -->
                <div style="margin-top: 30px; text-align: center;">
                    <button type="button" class="submit-btn back-btn" id="cancelApplicantForm">Cancel</button>
                    <button type="submit" class="submit-btn">Submit Application</button>
                </div>
            </form>
        </div>

        <!-- Thank You Screen -->
        <div id="thankYouScreen" class="thank-you-screen hidden">
            <i class="fas fa-check-circle thank-you-icon"></i>
            <h2>THANK YOU FOR FILLING YOUR APPLICATION!</h2>
            <h3>We will contact you once your application status is completed.</h3>
            <p>Your application has been submitted successfully. A barangay representative will contact you within 3-5 working days.</p>
            <p>For inquiries, please contact Barangay Pilar Village Office at (02) 1234-5678.</p>
            
            <div class="thank-you-buttons">
                <button class="submit-btn" id="newApplicationBtn">
                    Submit Another Application
                </button>
                <button class="submit-btn back-btn" id="backToHomeFromThankYou">
                    Back to Home
                </button>
            </div>
        </div>

        <!-- Member Dashboard -->
        <div id="memberDashboard" class="screen hidden">
            <h2>
                Barangay Management Dashboard
                <button class="nav-btn danger-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </h2>
            
            <p>Welcome back, <strong id="loggedInUser">Administrator</strong>! Here's an overview of barangay activities.</p>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <i class="fas fa-file-alt"></i>
                    <h3 id="pendingApplications">0</h3>
                    <p>Pending Applications</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-check-circle"></i>
                    <h3 id="processedToday">0</h3>
                    <p>Processed Today</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <h3 id="totalResidents">0</h3>
                    <p>Total Residents</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-calendar-check"></i>
                    <h3 id="upcomingEvents">3</h3>
                    <p>Upcoming Events</p>
                </div>
            </div>
            
            <h3>Quick Actions</h3>
            <div class="nav-buttons">
                <button class="nav-btn primary-btn" id="applicationsManagementBtn">
                    <i class="fas fa-list-check"></i> Applications Management
                </button>
                
                <button class="nav-btn primary-btn" id="residentRegistrationBtn">
                    <i class="fas fa-user-plus"></i> Register New Resident
                </button>
                
                <button class="nav-btn primary-btn" id="certificateGenerationBtn">
                    <i class="fas fa-print"></i> Generate Certificates
                </button>
                
                <button class="nav-btn primary-btn" id="reportsDashboardBtn">
                    <i class="fas fa-chart-bar"></i> View Reports
                </button>
            </div>
            
            <h3 style="margin-top: 30px;">Recent Activity</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Activity</th>
                            <th>User</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="recentActivity">
                        <!-- Activity rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Applications Management Interface -->
        <div id="applicationsManagementScreen" class="screen hidden">
            <h2>
                Applications Management
                <button class="nav-btn secondary-btn" id="backToDashboardFromApps">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="filter-controls">
                <div class="filter-group">
                    <label>Application Type</label>
                    <select id="filterType">
                        <option value="all">All Types</option>
                        <option value="barangay_clearance">Barangay Clearance</option>
                        <option value="sample_1">Sample 1</option>
                        <option value="sample_2">Sample 2</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Status</label>
                    <select id="filterStatus">
                        <option value="all">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="approved">Approved</option>
                        <option value="rejected">Rejected</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Date Range</label>
                    <input type="date" id="filterDate">
                </div>
                
                <button class="nav-btn primary-btn filter-btn" id="applyFilters">
                    <i class="fas fa-filter"></i> Apply Filters
                </button>
                
                <button class="nav-btn secondary-btn filter-btn" id="resetFilters">
                    <i class="fas fa-redo"></i> Reset
                </button>
            </div>
            
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Applicant Name</th>
                            <th>Application Type</th>
                            <th>Date Submitted</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="applicationsTable">
                        <!-- Applications will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <div style="margin-top: 20px; display: flex; justify-content: space-between;">
                <div>
                    <button class="nav-btn secondary-btn" id="exportApplications">
                        <i class="fas fa-file-export"></i> Export to Excel
                    </button>
                </div>
                <div>
                    <span id="paginationInfo">Showing 0 applications</span>
                    <button class="nav-btn secondary-btn" id="prevPage"><i class="fas fa-chevron-left"></i></button>
                    <button class="nav-btn secondary-btn" id="nextPage"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
        </div>

        <!-- Resident Registration Form -->
        <div id="residentRegistrationScreen" class="screen hidden">
            <h2>
                Register New Resident
                <button class="nav-btn secondary-btn" id="backToDashboardFromRegistration">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <form id="residentRegistrationForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentLastName" class="required">Last Name</label>
                        <input type="text" id="residentLastName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentFirstName" class="required">First Name</label>
                        <input type="text" id="residentFirstName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentMiddleName">Middle Name</label>
                        <input type="text" id="residentMiddleName">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentBirthdate" class="required">Birthdate</label>
                        <input type="date" id="residentBirthdate" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentAge" class="required">Age</label>
                        <input type="number" id="residentAge" min="0" max="120" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentCivilStatus" class="required">Civil Status</label>
                        <select id="residentCivilStatus" required>
                            <option value="">Select Status</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                            <option value="Widowed">Widowed</option>
                            <option value="Separated">Separated</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentContact" class="required">Contact Number</label>
                        <input type="tel" id="residentContact" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentEmail">Email Address</label>
                        <input type="email" id="residentEmail">
                    </div>
                    
                    <div class="form-group">
                        <label for="residentOccupation">Occupation</label>
                        <input type="text" id="residentOccupation">
                    </div>
                </div>
                
                <h3>Address Information</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentBlockLot" class="required">Block and Lot</label>
                        <input type="text" id="residentBlockLot" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentStreet" class="required">Street</label>
                        <input type="text" id="residentStreet" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentSubdivision" class="required">Subdivision</label>
                        <select id="residentSubdivision" required>
                            <option value="">Select Subdivision</option>
                            <option value="PILAR VILLAGE">PILAR VILLAGE</option>
                            <option value="CYPRESS MANGGAHAN">CYPRESS MANGGAHAN</option>
                            <option value="TERESA PARK">TERESA PARK</option>
                            <option value="BF PILAR SOUTHVILLE">BF PILAR SOUTHVILLE</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentLengthStay" class="required">Length of Stay</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="number" id="residentLengthStay" style="flex: 3;" required>
                            <select id="residentStayUnit" style="flex: 1;">
                                <option value="months">Months</option>
                                <option value="years">Years</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="residentNotes">Additional Notes</label>
                    <textarea id="residentNotes" rows="3"></textarea>
                </div>
                
                <div class="nav-buttons">
                    <button type="reset" class="nav-btn secondary-btn">
                        <i class="fas fa-redo"></i> Clear Form
                    </button>
                    <button type="submit" class="nav-btn success-btn">
                        <i class="fas fa-save"></i> Register Resident
                    </button>
                </div>
            </form>
        </div>

        <!-- Certificate Generation Module -->
        <div id="certificateGenerationScreen" class="screen hidden">
            <h2>
                Certificate Generation
                <button class="nav-btn secondary-btn" id="backToDashboardFromCertificates">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="certificateType" class="required">Certificate Type</label>
                    <select id="certificateType" required>
                        <option value="">Select Certificate Type</option>
                        <option value="residency">Certificate of Residency</option>
                        <option value="indigency">Certificate of Indigency</option>
                        <option value="goodmoral">Certificate of Good Moral Character</option>
                        <option value="employment">Certificate of Employment</option>
                        <option value="nocriminal">No Criminal Record</option>
                        <option value="soloparent">Solo Parent Certification</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="certificateRecipient" class="required">Recipient Name</label>
                    <input type="text" id="certificateRecipient" placeholder="Search resident name..." required>
                    <div id="residentSuggestions" style="margin-top: 5px; display: none;">
                        <!-- Suggestions will be populated here -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="certificatePurpose" class="required">Purpose</label>
                    <input type="text" id="certificatePurpose" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="certificateDate">Certificate Date</label>
                    <input type="date" id="certificateDate">
                </div>
                
                <div class="form-group">
                    <label for="certificateValidity">Validity (Days)</label>
                    <input type="number" id="certificateValidity" min="1" max="365" value="30">
                </div>
                
                <div class="form-group">
                    <label for="certificateNumber">Certificate Number</label>
                    <input type="text" id="certificateNumber" value="BPV-2023-" readonly>
                </div>
            </div>
            
            <div class="form-group">
                <label for="certificateRemarks">Additional Remarks</label>
                <textarea id="certificateRemarks" rows="3" placeholder="Any additional information for the certificate..."></textarea>
            </div>
            
            <div class="certificate-preview">
                <div class="certificate-header">
                    <h2 id="previewCertificateType">CERTIFICATE OF RESIDENCY</h2>
                    <p>Republic of the Philippines<br>Province of Cavite<br>Barangay Pilar Village</p>
                </div>
                
                <div class="certificate-body">
                    <p>TO WHOM IT MAY CONCERN:</p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        This is to certify that <strong id="previewRecipient">[RECIPIENT NAME]</strong>, 
                        of legal age, is a bona fide resident of <strong id="previewAddress">[ADDRESS]</strong>, 
                        Barangay Pilar Village, and has been residing therein for <strong id="previewLengthStay">[LENGTH]</strong>.
                    </p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        This certification is issued upon the request of the above-named person for <strong id="previewPurpose">[PURPOSE]</strong> 
                        and whatever legal purpose it may serve.
                    </p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        Issued this <strong id="previewDate">[DATE]</strong> at Barangay Pilar Village.
                    </p>
                </div>
                
                <div class="certificate-footer">
                    <div class="signature-box">
                        <div class="signature-line"></div>
                        <p><strong>HON. JUAN DELA CRUZ</strong><br>Barangay Captain</p>
                    </div>
                    
                    <div class="signature-box">
                        <div class="signature-line"></div>
                        <p><strong>MARIA SANTOS</strong><br>Barangay Secretary</p>
                    </div>
                </div>
            </div>
            
            <div class="nav-buttons" style="margin-top: 30px;">
                <button class="nav-btn secondary-btn" id="previewCertificate">
                    <i class="fas fa-eye"></i> Update Preview
                </button>
                <button class="nav-btn primary-btn" id="printCertificate">
                    <i class="fas fa-print"></i> Print Certificate
                </button>
                <button class="nav-btn success-btn" id="saveCertificate">
                    <i class="fas fa-save"></i> Save & Generate
                </button>
            </div>
        </div>

        <!-- Reports Dashboard -->
        <div id="reportsDashboardScreen" class="screen hidden">
            <h2>
                Reports Dashboard
                <button class="nav-btn secondary-btn" id="backToDashboardFromReports">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <i class="fas fa-file-alt"></i>
                    <h3>156</h3>
                    <p>Applications This Month</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <h3>42</h3>
                    <p>New Residents This Year</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-certificate"></i>
                    <h3>89</h3>
                    <p>Certificates Issued</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-money-bill-wave"></i>
                    <h3>‚Ç±24,580</h3>
                    <p>Revenue This Month</p>
                </div>
            </div>
            
            <h3>Application Statistics</h3>
            <div class="chart-row">
                <div class="chart-container">
                    <h4>Applications by Type</h4>
                    <div style="height: 300px; display: flex; align-items: flex-end; justify-content: space-around; margin-top: 20px;">
                        <div style="text-align: center;">
                            <div style="height: 200px; width: 40px; background-color: var(--blue-medium); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Residency</div>
                            <div style="font-weight: bold;">45%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 150px; width: 40px; background-color: var(--green); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Indigency</div>
                            <div style="font-weight: bold;">25%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 100px; width: 40px; background-color: var(--orange); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Job Seeker</div>
                            <div style="font-weight: bold;">15%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 80px; width: 40px; background-color: var(--purple); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Business</div>
                            <div style="font-weight: bold;">10%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 50px; width: 40px; background-color: var(--red); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Others</div>
                            <div style="font-weight: bold;">5%</div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h4>Applications by Status</h4>
                    <div style="height: 300px; display: flex; align-items: center; justify-content: center; margin-top: 20px;">
                        <div style="width: 200px; height: 200px; border-radius: 50%; background: conic-gradient(var(--green) 0% 65%, var(--yellow) 65% 85%, var(--red) 85% 100%);"></div>
                    </div>
                    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--green); margin-right: 5px;"></span> Approved (65%)</div>
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--yellow); margin-right: 5px;"></span> Pending (20%)</div>
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--red); margin-right: 5px;"></span> Rejected (15%)</div>
                    </div>
                </div>
            </div>
            
            <h3>Monthly Report</h3>
            <div class="filter-controls">
                <div class="filter-group">
                    <label>Report Type</label>
                    <select id="reportType">
                        <option value="applications">Applications Report</option>
                        <option value="residents">Residents Report</option>
                        <option value="financial">Financial Report</option>
                        <option value="certificates">Certificates Report</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Month</label>
                    <select id="reportMonth">
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Year</label>
                    <select id="reportYear">
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                    </select>
                </div>
                
                <button class="nav-btn primary-btn filter-btn" id="generateReport">
                    <i class="fas fa-chart-bar"></i> Generate Report
                </button>
                
                <button class="nav-btn success-btn filter-btn" id="exportReport">
                    <i class="fas fa-download"></i> Export as PDF
                </button>
            </div>
            
            <div class="table-container" style="margin-top: 20px;">
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Application Type</th>
                            <th>Applicant</th>
                            <th>Status</th>
                            <th>Processed By</th>
                            <th>Processing Time</th>
                        </tr>
                    </thead>
                    <tbody id="reportTable">
                        <!-- Report data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Form View Modal -->
        <div id="formViewModal" class="modal-overlay hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Application Details</h2>
                    <button class="close-modal" id="closeModalBtn">&times;</button>
                </div>
                <div id="formViewContent">
                    <!-- Form content will be populated here -->
                </div>
                <div style="margin-top: 20px; text-align: center;">
                    <button class="nav-btn secondary-btn" id="closeModal">Close</button>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3><i class="fas fa-map-marker-alt"></i> Visit Us!</h3>
                <p>C2C5+FCQ, Aguirre Corner Sapphire, Pilar, Las Pi√±as, 1740 Metro Manila</p>
            </div>
            <div class="footer-section">
                <h3><i class="fas fa-phone-alt"></i> Contact Us!</h3>
                <p>0927 342 5375</p>
                <p>Office Hours: Mon-Fri 8:00 AM - 5:00 PM</p>
            </div>
            <div class="footer-section">
                <h3><i class="fas fa-info-circle"></i> About</h3>
                <p>Barangay Pilar Village Services Portal</p>
                <p>Official online service platform</p>
            </div>
        </div>
    </footer>

    <script>
        // Data Management
        let applicantsDatabase = JSON.parse(localStorage.getItem('applicantsDatabase')) || [];
        let residentsDatabase = JSON.parse(localStorage.getItem('residentsDatabase')) || [];
        
        // Initialize sample data if empty
        if (applicantsDatabase.length === 0) {
            const sampleApplicant = {
                id: Date.now(),
                lastName: 'SANTOS',
                firstName: 'JUAN',
                middleName: 'DELA CRUZ',
                contactNumber: '09171234567',
                birthday: '1999-01-15',
                age: '25',
                birthPlace: 'MANILA, METRO MANILA',
                nationality: 'FILIPINO',
                sex: 'MALE',
                purpose: 'BARANGAY CLEARANCE',
                subdivision: 'PILAR VILLAGE',
                street: 'SAPPHIRE STREET',
                block: '5',
                lot: '12',
                lengthStay: '2',
                stayUnit: 'YEARS',
                certificatePurposes: ['PROOF OF RESIDENCY'],
                barangayClearanceData: {
                    purpose: 'PROOF OF RESIDENCY'
                },
                status: 'Pending',
                dateSubmitted: new Date().toLocaleDateString(),
                isMultiPurpose: false
            };
            
            applicantsDatabase.push(sampleApplicant);
            localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
        }
        
        if (residentsDatabase.length === 0) {
            const sampleResidents = [
                { id: 1, lastName: 'DELA CRUZ', firstName: 'JUAN', middleName: 'SANTOS', birthdate: '1990-05-15', age: 33, civilStatus: 'Single', contact: '09123456789', email: 'juan@example.com', occupation: 'Teacher', blockLot: 'BLOCK 5, LOT 12', street: 'SAPPHIRE STREET', subdivision: 'PILAR VILLAGE', lengthStay: '5 years', notes: '' },
                { id: 2, lastName: 'SANTOS', firstName: 'MARIA', middleName: 'REYES', birthdate: '1985-08-22', age: 38, civilStatus: 'Married', contact: '09234567890', email: 'maria@example.com', occupation: 'Nurse', blockLot: 'BLOCK 3, LOT 8', street: 'DIAMOND STREET', subdivision: 'TERESA PARK', lengthStay: '10 years', notes: '' }
            ];
            
            residentsDatabase = sampleResidents;
            localStorage.setItem('residentsDatabase', JSON.stringify(residentsDatabase));
        }

        // Application Purposes
        const applicationPurposes = [
            { id: 'barangay_clearance', name: 'BARANGAY CLEARANCE' },
            { id: 'sample_1', name: 'SAMPLE 1' },
            { id: 'sample_2', name: 'SAMPLE 2' }
        ];

        // Certificate Purposes (for barangay clearance)
        const certificatePurposes = [
            "PROOF OF RESIDENCY",
            "PROOF OF INDIGENCY",
            "POSTAL ID REQUIREMENT",
            "PWD ID REQUIREMENT",
            "SENIOR CITIZEN ID REQUIREMENT",
            "MEDICAL ASSISTANCE/FINANCIAL",
            "EDUCATIONAL ASSISTANCE",
            "GREENCARD APPLICATION/RENEWAL",
            "LOCAL EMPLOYMENT",
            "SCHOOL REQUIREMENT",
            "BANK REQUIREMENT",
            "LOAN APPLICATION",
            "SOLO PARENT ID REQUIREMENT",
            "PHILHEALTH APPLICATION",
            "TIN ID APPLICATION",
            "GSIS REQUIREMENT",
            "SSS REQUIREMENT",
            "MARRIAGE LICENSE APPLICATION",
            "LATE REGISTRATION OF BIRTH",
            "DRIVER LICENSE APPLICATION",
            "BUSINESS PERMIT APPLICATION",
            "FIRST TIME JOB SEEKER",
            "LIBRENG LIBING",
            "CUTTING TREES",
            "SOCIAL PENSION",
            "ONENESS",
            "UNEMPLOYMENT",
            "NO DEROGATORY",
            "CERTIFICATE OF RESIDENCY",
            "GOOD MORAL",
            "FIRE VICTIM",
            "CHANGE ADDRESS",
            "MAYNILAD/MERALCO",
            "COHABITATION"
        ];

        // Subdivisions and Streets
        const subdivisions = [
            "CYPRESS MANGGAHAN",
            "CAMELLA HOMES CLASSIC",
            "CLASSIC HOMES",
            "CUEVAS COMPOUND",
            "DAISY COMPOUND",
            "GARDEN COMPOUND",
            "GLORIA COMPOUND",
            "MALIGAYA COMPOUND",
            "PAG-ASA COMPOUND",
            "SAMPAGUITA COMPOUND",
            "BF PILAR SOUTHVILLE",
            "TERESA COMPOUND",
            "PILAR VILLAGE",
            "TERESA PARK"
        ];

        // Sample streets for each subdivision
        const streetsBySubdivision = {
            "PILAR VILLAGE": ["SAPPHIRE STREET", "DIAMOND STREET", "RUBY STREET", "EMERALD STREET"],
            "TERESA PARK": ["ROSE STREET", "LILY STREET", "DAISY STREET", "TULIP STREET"],
            "CYPRESS MANGGAHAN": ["CYPRESS STREET", "MANGGAHAN STREET", "NARRA STREET", "ACACIA STREET"],
            "BF PILAR SOUTHVILLE": ["SOUTHVILLE STREET", "BF HOMES STREET", "PILAR STREET", "MAIN STREET"],
            "CAMELLA HOMES CLASSIC": ["CAMELLA STREET", "CLASSIC STREET", "HOMES STREET", "GARDEN STREET"],
            "CLASSIC HOMES": ["CLASSIC AVENUE", "HOMES LANE", "TRADITION STREET", "LEGACY STREET"],
            "CUEVAS COMPOUND": ["CUEVAS STREET", "FAMILY STREET", "COMPOUND ROAD", "MAIN AVENUE"],
            "DAISY COMPOUND": ["DAISY LANE", "FLOWER STREET", "GARDEN ROAD", "NATURE STREET"],
            "GARDEN COMPOUND": ["GARDEN LANE", "FLORAL STREET", "NATURE ROAD", "BLOOM STREET"],
            "GLORIA COMPOUND": ["GLORIA STREET", "HOPE STREET", "FAITH STREET", "JOY STREET"],
            "MALIGAYA COMPOUND": ["MALIGAYA STREET", "HAPPINESS ROAD", "JOY LANE", "BLISS STREET"],
            "PAG-ASA COMPOUND": ["PAG-ASA STREET", "HOPE LANE", "FAITH ROAD", "CHARITY STREET"],
            "SAMPAGUITA COMPOUND": ["SAMPAGUITA STREET", "FLOWER LANE", "FRAGRANCE ROAD", "BLOOM STREET"],
            "TERESA COMPOUND": ["TERESA STREET", "SAINT LANE", "HOLY ROAD", "BLESSED STREET"]
        };

        // DOM Elements
        const accessScreen = document.getElementById('accessScreen');
        const loginScreen = document.getElementById('loginScreen');
        const applicantForm = document.getElementById('applicantForm');
        const thankYouScreen = document.getElementById('thankYouScreen');
        const memberDashboard = document.getElementById('memberDashboard');
        const applicationsManagementScreen = document.getElementById('applicationsManagementScreen');
        const residentRegistrationScreen = document.getElementById('residentRegistrationScreen');
        const certificateGenerationScreen = document.getElementById('certificateGenerationScreen');
        const reportsDashboardScreen = document.getElementById('reportsDashboardScreen');
        const formViewModal = document.getElementById('formViewModal');
        const formViewContent = document.getElementById('formViewContent');
        
        // Buttons
        const applicantBtn = document.getElementById('applicantBtn');
        const memberBtn = document.getElementById('memberBtn');
        const backToAccessFromLogin = document.getElementById('backToAccessFromLogin');
        const backToAccessFromApplicant = document.getElementById('backToAccessFromApplicant');
        const cancelApplicantForm = document.getElementById('cancelApplicantForm');
        const backToHomeFromThankYou = document.getElementById('backToHomeFromThankYou');
        const logoutBtn = document.getElementById('logoutBtn');
        
        // Application form elements
        const applicationForm = document.getElementById('applicationForm');
        const purposeSearch = document.getElementById('purposeSearch');
        const purposeDropdown = document.getElementById('purposeDropdown');
        const selectedPurposes = document.getElementById('selectedPurposes');
        const purposeSections = document.getElementById('purposeSections');
        const newApplicationBtn = document.getElementById('newApplicationBtn');
        
        // Personal information fields
        const lastName = document.getElementById('lastName');
        const firstName = document.getElementById('firstName');
        const middleName = document.getElementById('middleName');
        const contactNumber = document.getElementById('contactNumber');
        const birthday = document.getElementById('birthday');
        const age = document.getElementById('age');
        const birthPlace = document.getElementById('birthPlace');
        const nationality = document.getElementById('nationality');
        const sex = document.getElementById('sex');
        
        // Dashboard navigation buttons
        const applicationsManagementBtn = document.getElementById('applicationsManagementBtn');
        const residentRegistrationBtn = document.getElementById('residentRegistrationBtn');
        const certificateGenerationBtn = document.getElementById('certificateGenerationBtn');
        const reportsDashboardBtn = document.getElementById('reportsDashboardBtn');
        
        // Back buttons from sub-screens
        const backToDashboardFromApps = document.getElementById('backToDashboardFromApps');
        const backToDashboardFromRegistration = document.getElementById('backToDashboardFromRegistration');
        const backToDashboardFromCertificates = document.getElementById('backToDashboardFromCertificates');
        const backToDashboardFromReports = document.getElementById('backToDashboardFromReports');
        
        // Modal buttons
        const closeModalBtn = document.getElementById('closeModalBtn');
        const closeModal = document.getElementById('closeModal');
        
        // Demo credentials
        const validCredentials = [
            { username: 'admin', password: 'barangay2023', name: 'Administrator' },
            { username: 'staff', password: 'pilarvillage', name: 'Staff Member' }
        ];

        // Sample activity data
        const sampleActivity = [
            { time: '10:30 AM', activity: 'Certificate of Residency approved', user: 'Juan Dela Cruz', status: 'approved' },
            { time: '9:15 AM', activity: 'First Time Job Seeker application submitted', user: 'Maria Santos', status: 'pending' },
            { time: 'Yesterday', activity: 'Barangay Meeting scheduled', user: 'System', status: 'info' },
            { time: 'Nov 28', activity: 'Database backup completed', user: 'System', status: 'info' },
            { time: 'Nov 27', activity: 'Certificate of Indigency rejected', user: 'Pedro Garcia', status: 'rejected' }
        ];

        // Variables
        let selectedApplicationPurposes = [];
        let certificatePurposeSelects = {};

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            populateNationalityDropdown();
            populatePurposeDropdown();
            setupEventListeners();
            updateDashboardStats();
            populateApplicationsTable();
            populateRecentActivity();
            populateReportTable();
            
            // Set today's date as max for birthday
            const today = new Date().toISOString().split('T')[0];
            birthday.max = today;
        });

        function setupEventListeners() {
            // Main navigation
            applicantBtn.addEventListener('click', () => {
                accessScreen.classList.add('hidden');
                applicantForm.classList.remove('hidden');
                resetApplicationForm();
            });
            
            memberBtn.addEventListener('click', () => {
                accessScreen.classList.add('hidden');
                loginScreen.classList.remove('hidden');
            });
            
            backToAccessFromLogin.addEventListener('click', () => {
                loginScreen.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            backToAccessFromApplicant.addEventListener('click', () => {
                applicantForm.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            cancelApplicantForm.addEventListener('click', () => {
                if (confirm('Are you sure you want to cancel? All entered data will be lost.')) {
                    applicantForm.classList.add('hidden');
                    accessScreen.classList.remove('hidden');
                }
            });
            
            // Thank you screen navigation
            newApplicationBtn.addEventListener('click', function() {
                thankYouScreen.classList.add('hidden');
                applicantForm.classList.remove('hidden');
                resetApplicationForm();
            });
            
            backToHomeFromThankYou.addEventListener('click', () => {
                thankYouScreen.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            // Login form
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('username').value.trim();
                const password = document.getElementById('password').value;
                
                const validUser = validCredentials.find(
                    cred => cred.username === username && cred.password === password
                );
                
                if (validUser) {
                    document.getElementById('loginError').style.display = 'none';
                    document.getElementById('loggedInUser').textContent = validUser.name;
                    loginScreen.classList.add('hidden');
                    memberDashboard.classList.remove('hidden');
                    this.reset();
                    updateDashboardStats();
                    populateApplicationsTable();
                } else {
                    document.getElementById('loginError').style.display = 'block';
                    document.getElementById('password').value = '';
                }
            });
            
            // Logout
            logoutBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                accessScreen.classList.remove('hidden');
            });
            
            // Dashboard navigation
            applicationsManagementBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                applicationsManagementScreen.classList.remove('hidden');
                populateApplicationsTable();
            });
            
            residentRegistrationBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                residentRegistrationScreen.classList.remove('hidden');
            });
            
            certificateGenerationBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                certificateGenerationScreen.classList.remove('hidden');
            });
            
            reportsDashboardBtn.addEventListener('click', () => {
                memberDashboard.classList.add('hidden');
                reportsDashboardScreen.classList.remove('hidden');
            });
            
            // Back buttons
            backToDashboardFromApps.addEventListener('click', () => {
                applicationsManagementScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            backToDashboardFromRegistration.addEventListener('click', () => {
                residentRegistrationScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            backToDashboardFromCertificates.addEventListener('click', () => {
                certificateGenerationScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            backToDashboardFromReports.addEventListener('click', () => {
                reportsDashboardScreen.classList.add('hidden');
                memberDashboard.classList.remove('hidden');
            });
            
            // Application form event listeners
            
            // Auto-capitalize all text inputs
            document.querySelectorAll('input[type="text"], textarea').forEach(input => {
                if (input.id !== 'username' && input.id !== 'password') {
                    input.addEventListener('input', function() {
                        this.value = this.value.toUpperCase();
                    });
                }
            });
            
            // Letters-only validation for name fields
            [lastName, firstName, middleName, birthPlace].forEach(field => {
                field.addEventListener('input', function() {
                    this.value = this.value.replace(/[^A-Z\s]/gi, '');
                });
            });
            
            // Phone number formatting
            contactNumber.addEventListener('input', function() {
                let value = this.value.replace(/\D/g, '');
                
                // Format as 09xx xxx xxxx
                if (value.length > 0) {
                    if (!value.startsWith('09')) {
                        value = '09' + value.substring(2);
                    }
                    
                    if (value.length > 2) {
                        value = value.substring(0, 4) + ' ' + value.substring(4);
                    }
                    if (value.length > 7) {
                        value = value.substring(0, 8) + ' ' + value.substring(8);
                    }
                    if (value.length > 12) {
                        value = value.substring(0, 12);
                    }
                }
                
                this.value = value;
            });
            
            // Age calculation from birthday
            birthday.addEventListener('change', function() {
                if (this.value) {
                    const birthDate = new Date(this.value);
                    const today = new Date();
                    let calculatedAge = today.getFullYear() - birthDate.getFullYear();
                    const monthDiff = today.getMonth() - birthDate.getMonth();
                    
                    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                        calculatedAge--;
                    }
                    
                    age.value = calculatedAge;
                }
            });
            
            // Custom select functionality
            purposeSearch.addEventListener('focus', function() {
                purposeDropdown.style.display = 'block';
                filterPurposeOptions('');
            });
            
            purposeSearch.addEventListener('input', function() {
                filterPurposeOptions(this.value);
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!purposeSearch.contains(e.target) && !purposeDropdown.contains(e.target)) {
                    purposeDropdown.style.display = 'none';
                }
            });
            
            // Form Submission
            applicationForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Validate required fields
                if (!validateForm()) {
                    return;
                }
                
                // Get all form data
                const formData = getFormData();
                
                // Create separate database entries for each selected purpose
                selectedApplicationPurposes.forEach(purpose => {
                    const applicant = {
                        id: Date.now() + Math.random(), // Unique ID for each entry
                        lastName: formData.lastName,
                        firstName: formData.firstName,
                        middleName: formData.middleName,
                        contactNumber: formData.contactNumber,
                        birthday: formData.birthday,
                        age: formData.age,
                        birthPlace: formData.birthPlace,
                        nationality: formData.nationality,
                        sex: formData.sex,
                        purpose: purpose.name,
                        status: 'Pending',
                        dateSubmitted: new Date().toLocaleDateString(),
                        isMultiPurpose: selectedApplicationPurposes.length > 1
                    };
                    
                    // Add purpose-specific data
                    if (purpose.id === 'barangay_clearance') {
                        applicant.subdivision = formData.subdivision;
                        applicant.street = formData.street;
                        applicant.block = formData.block;
                        applicant.lot = formData.lot;
                        applicant.lengthStay = formData.lengthStay;
                        applicant.stayUnit = formData.stayUnit;
                        applicant.certificatePurposes = formData.certificatePurposes || [];
                        applicant.barangayClearanceData = formData.barangayClearanceData;
                    } else if (purpose.id === 'sample_1') {
                        applicant.sample1Data = formData.sample1Data;
                    } else if (purpose.id === 'sample_2') {
                        applicant.sample2Data = formData.sample2Data;
                    }
                    
                    // Add to database
                    applicantsDatabase.push(applicant);
                });
                
                localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
                
                // Show thank you screen
                applicantForm.classList.add('hidden');
                thankYouScreen.classList.remove('hidden');
            });
            
            // Applications Management
            document.getElementById('applyFilters').addEventListener('click', applyFilters);
            document.getElementById('resetFilters').addEventListener('click', resetFilters);
            document.getElementById('exportApplications').addEventListener('click', () => {
                alert('Exporting applications to Excel...');
            });
            
            // Certificate Generation
            document.getElementById('certificateType').addEventListener('change', updateCertificatePreview);
            document.getElementById('certificateRecipient').addEventListener('input', showResidentSuggestions);
            document.getElementById('previewCertificate').addEventListener('click', updateCertificatePreview);
            document.getElementById('printCertificate').addEventListener('click', () => {
                window.print();
            });
            document.getElementById('saveCertificate').addEventListener('click', () => {
                alert('Certificate saved and generated successfully!');
            });
            
            // Reports
            document.getElementById('generateReport').addEventListener('click', generateReport);
            document.getElementById('exportReport').addEventListener('click', () => {
                alert('Report exported as PDF successfully!');
            });
            
            // Resident Registration
            document.getElementById('residentRegistrationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const resident = {
                    id: Date.now(),
                    lastName: document.getElementById('residentLastName').value.toUpperCase(),
                    firstName: document.getElementById('residentFirstName').value.toUpperCase(),
                    middleName: document.getElementById('residentMiddleName').value.toUpperCase(),
                    birthdate: document.getElementById('residentBirthdate').value,
                    age: document.getElementById('residentAge').value,
                    civilStatus: document.getElementById('residentCivilStatus').value,
                    contact: document.getElementById('residentContact').value,
                    email: document.getElementById('residentEmail').value,
                    occupation: document.getElementById('residentOccupation').value.toUpperCase(),
                    blockLot: document.getElementById('residentBlockLot').value.toUpperCase(),
                    street: document.getElementById('residentStreet').value.toUpperCase(),
                    subdivision: document.getElementById('residentSubdivision').value,
                    lengthStay: document.getElementById('residentLengthStay').value + ' ' + document.getElementById('residentStayUnit').value,
                    notes: document.getElementById('residentNotes').value,
                    dateRegistered: new Date().toLocaleDateString()
                };
                
                residentsDatabase.push(resident);
                localStorage.setItem('residentsDatabase', JSON.stringify(residentsDatabase));
                
                alert('Resident registered successfully!');
                this.reset();
                
                // Update dashboard stats
                updateDashboardStats();
            });
            
            // Modal close buttons
            closeModalBtn.addEventListener('click', () => {
                formViewModal.classList.add('hidden');
            });
            
            closeModal.addEventListener('click', () => {
                formViewModal.classList.add('hidden');
            });
            
            // Close modal when clicking outside
            formViewModal.addEventListener('click', (e) => {
                if (e.target === formViewModal) {
                    formViewModal.classList.add('hidden');
                }
            });
        }

        // Custom Select Functions
        function populatePurposeDropdown() {
            purposeDropdown.innerHTML = '';
            applicationPurposes.forEach(purpose => {
                const option = document.createElement('div');
                option.className = 'custom-select-option';
                option.dataset.value = purpose.id;
                option.textContent = purpose.name;
                option.addEventListener('click', function() {
                    togglePurposeSelection(purpose);
                });
                purposeDropdown.appendChild(option);
            });
        }

        function filterPurposeOptions(searchTerm) {
            const options = purposeDropdown.querySelectorAll('.custom-select-option');
            const term = searchTerm.toUpperCase();
            
            options.forEach(option => {
                const text = option.textContent.toUpperCase();
                if (text.includes(term)) {
                    option.style.display = 'block';
                } else {
                    option.style.display = 'none';
                }
            });
        }

        function togglePurposeSelection(purpose) {
            const index = selectedApplicationPurposes.findIndex(p => p.id === purpose.id);
            
            if (index === -1) {
                // Add purpose
                selectedApplicationPurposes.push(purpose);
                updateSelectedPurposesDisplay();
                showPurposeSection(purpose);
            } else {
                // Remove purpose
                selectedApplicationPurposes.splice(index, 1);
                updateSelectedPurposesDisplay();
                hidePurposeSection(purpose.id);
            }
            
            // Update dropdown option selection
            const option = purposeDropdown.querySelector(`[data-value="${purpose.id}"]`);
            if (option) {
                if (index === -1) {
                    option.classList.add('selected');
                } else {
                    option.classList.remove('selected');
                }
            }
        }

        function updateSelectedPurposesDisplay() {
            selectedPurposes.innerHTML = '';
            selectedApplicationPurposes.forEach(purpose => {
                const tag = document.createElement('div');
                tag.className = 'selected-tag';
                tag.innerHTML = `
                    ${purpose.name}
                    <button type="button" class="remove-tag" data-value="${purpose.id}">&times;</button>
                `;
                selectedPurposes.appendChild(tag);
            });
            
            // Add event listeners to remove buttons
            selectedPurposes.querySelectorAll('.remove-tag').forEach(button => {
                button.addEventListener('click', function() {
                    const purposeId = this.dataset.value;
                    const purpose = applicationPurposes.find(p => p.id === purposeId);
                    if (purpose) {
                        togglePurposeSelection(purpose);
                    }
                });
            });
        }

        function showPurposeSection(purpose) {
            let sectionHTML = '';
            
            if (purpose.id === 'barangay_clearance') {
                sectionHTML = `
                    <div class="purpose-section" id="section_${purpose.id}">
                        <h3><i class="fas fa-file-contract"></i> BARANGAY CLEARANCE REQUIREMENTS</h3>
                        
                        <!-- Address Section -->
                        <div class="form-row">
                            <div class="form-group">
                                <label for="subdivision" class="required">Subdivision</label>
                                <select id="subdivision" required>
                                    <option value="" disabled selected>SELECT SUBDIVISION</option>
                                    ${subdivisions.map(sub => `<option value="${sub}">${sub}</option>`).join('')}
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="street" class="required">Street</label>
                                <select id="street" required disabled>
                                    <option value="" disabled selected>SELECT STREET</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="block-lot-container">
                            <div class="form-group">
                                <label for="block" class="required">Block</label>
                                <input type="text" id="block" placeholder="ENTER BLOCK NUMBER" required pattern="[0-9]+" title="Numbers only">
                                <div class="error-message" id="blockError">Please enter numbers only</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="lot" class="required">Lot</label>
                                <input type="text" id="lot" placeholder="ENTER LOT NUMBER" required pattern="[0-9]+" title="Numbers only">
                                <div class="error-message" id="lotError">Please enter numbers only</div>
                            </div>
                        </div>
                        
                        <!-- Length of Stay -->
                        <div class="form-group">
                            <label for="lengthStay" class="required">Length of Stay (Minimum: 6 Months)</label>
                            <div class="length-stay-container">
                                <input type="number" id="lengthStay" min="1" placeholder="ENTER NUMBER" required>
                                <select id="stayUnit" required>
                                    <option value="" disabled selected>SELECT UNIT</option>
                                    <option value="SINCE BIRTH">SINCE BIRTH</option>
                                    <option value="MONTHS">MONTHS</option>
                                    <option value="YEARS">YEARS</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Certificate Purposes -->
                        <div class="form-group">
                            <label class="required">Certificate Purpose (Choose one or more)</label>
                            <div class="custom-select-container" id="certificatePurposeSelectContainer">
                                <input type="text" class="custom-select-input" id="certificatePurposeSearch" placeholder="TYPE TO SEARCH FOR CERTIFICATE PURPOSES...">
                                <div class="custom-select-dropdown" id="certificatePurposeDropdown">
                                    ${certificatePurposes.map(cert => `<div class="custom-select-option" data-value="${cert}">${cert}</div>`).join('')}
                                </div>
                                <div class="custom-select-selected" id="selectedCertificatePurposes"></div>
                            </div>
                        </div>
                    </div>
                `;
            } else if (purpose.id === 'sample_1') {
                sectionHTML = `
                    <div class="purpose-section" id="section_${purpose.id}">
                        <h3><i class="fas fa-question-circle"></i> SAMPLE 1 REQUIREMENTS</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="sample1Question1" class="required">POGI BA SI SEAN?</label>
                                <select id="sample1Question1" required>
                                    <option value="" disabled selected>SELECT ANSWER</option>
                                    <option value="YES">YES</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="sample1Question2" class="required">POGI BA SI JARRED?</label>
                                <select id="sample1Question2" required>
                                    <option value="" disabled selected>SELECT ANSWER</option>
                                    <option value="YES">YES</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                        </div>
                    </div>
                `;
            } else if (purpose.id === 'sample_2') {
                sectionHTML = `
                    <div class="purpose-section" id="section_${purpose.id}">
                        <h3><i class="fas fa-question-circle"></i> SAMPLE 2 REQUIREMENTS</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="sample2Question1" class="required">POGI BA SI PRINCE?</label>
                                <select id="sample2Question1" required>
                                    <option value="" disabled selected>SELECT ANSWER</option>
                                    <option value="YES">YES</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="sample2Question2" class="required">POGI BA SI CLARISSE?</label>
                                <select id="sample2Question2" required>
                                    <option value="" disabled selected>SELECT ANSWER</option>
                                    <option value="YES">YES</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="sample2Question3" class="required">NANG-IWAN BA SI DWAYNE?</label>
                                <select id="sample2Question3" required>
                                    <option value="" disabled selected>SELECT ANSWER</option>
                                    <option value="YES">YES</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            purposeSections.insertAdjacentHTML('beforeend', sectionHTML);
            
            // Initialize purpose-specific functionality
            if (purpose.id === 'barangay_clearance') {
                initializeBarangayClearanceSection();
            }
        }

        function hidePurposeSection(purposeId) {
            const section = document.getElementById(`section_${purposeId}`);
            if (section) {
                section.remove();
            }
        }

        function initializeBarangayClearanceSection() {
            // Subdivision change event
            const subdivisionSelect = document.getElementById('subdivision');
            const streetSelect = document.getElementById('street');
            
            subdivisionSelect.addEventListener('change', function() {
                streetSelect.disabled = !this.value;
                streetSelect.innerHTML = '<option value="" disabled selected>SELECT STREET</option>';
                
                if (this.value && streetsBySubdivision[this.value]) {
                    streetsBySubdivision[this.value].forEach(street => {
                        const option = document.createElement('option');
                        option.value = street;
                        option.textContent = street;
                        streetSelect.appendChild(option);
                    });
                }
            });
            
            // Block and lot validation (numbers only)
            const blockInput = document.getElementById('block');
            const lotInput = document.getElementById('lot');
            
            blockInput.addEventListener('input', function() {
                this.value = this.value.replace(/\D/g, '');
            });
            
            lotInput.addEventListener('input', function() {
                this.value = this.value.replace(/\D/g, '');
            });
            
            // Length stay validation
            const lengthStayInput = document.getElementById('lengthStay');
            const stayUnitSelect = document.getElementById('stayUnit');
            
            stayUnitSelect.addEventListener('change', function() {
                if (this.value === 'MONTHS') {
                    lengthStayInput.min = 6;
                    if (lengthStayInput.value && parseInt(lengthStayInput.value) < 6) {
                        lengthStayInput.value = 6;
                    }
                } else {
                    lengthStayInput.min = 1;
                }
            });
            
            // Initialize certificate purpose select
            initializeCertificatePurposeSelect();
        }

        function initializeCertificatePurposeSelect() {
            const certificatePurposeSearch = document.getElementById('certificatePurposeSearch');
            const certificatePurposeDropdown = document.getElementById('certificatePurposeDropdown');
            const selectedCertificatePurposes = document.getElementById('selectedCertificatePurposes');
            
            let selectedCertPurposes = [];
            
            // Filter certificate purposes
            certificatePurposeSearch.addEventListener('input', function() {
                const term = this.value.toUpperCase();
                const options = certificatePurposeDropdown.querySelectorAll('.custom-select-option');
                
                options.forEach(option => {
                    const text = option.textContent.toUpperCase();
                    if (text.includes(term)) {
                        option.style.display = 'block';
                    } else {
                        option.style.display = 'none';
                    }
                });
            });
            
            // Show dropdown on focus
            certificatePurposeSearch.addEventListener('focus', function() {
                certificatePurposeDropdown.style.display = 'block';
                filterCertificatePurposeOptions('');
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!certificatePurposeSearch.contains(e.target) && !certificatePurposeDropdown.contains(e.target)) {
                    certificatePurposeDropdown.style.display = 'none';
                }
            });
            
            // Handle certificate purpose selection
            certificatePurposeDropdown.querySelectorAll('.custom-select-option').forEach(option => {
                option.addEventListener('click', function() {
                    const value = this.dataset.value;
                    const index = selectedCertPurposes.indexOf(value);
                    
                    if (index === -1) {
                        selectedCertPurposes.push(value);
                        this.classList.add('selected');
                    } else {
                        selectedCertPurposes.splice(index, 1);
                        this.classList.remove('selected');
                    }
                    
                    updateSelectedCertificatePurposesDisplay();
                });
            });
            
            function filterCertificatePurposeOptions(searchTerm) {
                const options = certificatePurposeDropdown.querySelectorAll('.custom-select-option');
                const term = searchTerm.toUpperCase();
                
                options.forEach(option => {
                    const text = option.textContent.toUpperCase();
                    if (text.includes(term)) {
                        option.style.display = 'block';
                    } else {
                        option.style.display = 'none';
                    }
                });
            }
            
            function updateSelectedCertificatePurposesDisplay() {
                selectedCertificatePurposes.innerHTML = '';
                selectedCertPurposes.forEach(purpose => {
                    const tag = document.createElement('div');
                    tag.className = 'selected-tag';
                    tag.innerHTML = `
                        ${purpose}
                        <button type="button" class="remove-tag" data-value="${purpose}">&times;</button>
                    `;
                    selectedCertificatePurposes.appendChild(tag);
                });
                
                // Add event listeners to remove buttons
                selectedCertificatePurposes.querySelectorAll('.remove-tag').forEach(button => {
                    button.addEventListener('click', function() {
                        const purposeValue = this.dataset.value;
                        const index = selectedCertPurposes.indexOf(purposeValue);
                        if (index !== -1) {
                            selectedCertPurposes.splice(index, 1);
                            updateSelectedCertificatePurposesDisplay();
                            
                            // Update dropdown selection
                            const option = certificatePurposeDropdown.querySelector(`[data-value="${purposeValue}"]`);
                            if (option) {
                                option.classList.remove('selected');
                            }
                        }
                    });
                });
            }
            
            // Store reference for form submission
            certificatePurposeSelects.barangay_clearance = {
                selected: selectedCertPurposes,
                update: updateSelectedCertificatePurposesDisplay
            };
        }

        function validateForm() {
            let isValid = true;
            
            // Check if at least one purpose is selected
            if (selectedApplicationPurposes.length === 0) {
                alert('Please select at least one purpose for your application.');
                isValid = false;
                return isValid;
            }
            
            // Validate personal information
            const personalFields = [
                { field: lastName, errorId: 'lastNameError', message: 'Please enter your last name' },
                { field: firstName, errorId: 'firstNameError', message: 'Please enter your first name' },
                { field: contactNumber, errorId: 'contactNumberError', message: 'Please enter a valid 11-digit phone number starting with 09' },
                { field: birthday, errorId: null, message: 'Please enter your birthday' },
                { field: birthPlace, errorId: null, message: 'Please enter your place of birth' },
                { field: nationality, errorId: null, message: 'Please select your nationality' },
                { field: sex, errorId: null, message: 'Please select your sex' }
            ];
            
            personalFields.forEach(({ field, errorId, message }) => {
                if (!field.value.trim()) {
                    showError(field, errorId, message);
                    isValid = false;
                } else {
                    clearError(field, errorId);
                }
            });
            
            // Validate phone number format
            const phoneRegex = /^09\d{2} \d{3} \d{4}$/;
            if (contactNumber.value && !phoneRegex.test(contactNumber.value)) {
                showError(contactNumber, 'contactNumberError', 'Please enter a valid 11-digit phone number in the format: 09xx xxx xxxx');
                isValid = false;
            }
            
            // Validate purpose-specific fields
            selectedApplicationPurposes.forEach(purpose => {
                if (purpose.id === 'barangay_clearance') {
                    const barangayFields = [
                        { id: 'subdivision', message: 'Please select subdivision' },
                        { id: 'street', message: 'Please select street' },
                        { id: 'block', message: 'Please enter block number' },
                        { id: 'lot', message: 'Please enter lot number' },
                        { id: 'lengthStay', message: 'Please enter length of stay' },
                        { id: 'stayUnit', message: 'Please select stay unit' }
                    ];
                    
                    barangayFields.forEach(({ id, message }) => {
                        const field = document.getElementById(id);
                        if (field && !field.value) {
                            showError(field, null, message);
                            isValid = false;
                        }
                    });
                    
                    // Check if at least one certificate purpose is selected
                    if (certificatePurposeSelects.barangay_clearance && 
                        certificatePurposeSelects.barangay_clearance.selected.length === 0) {
                        alert('Please select at least one certificate purpose for Barangay Clearance.');
                        isValid = false;
                    }
                } else if (purpose.id === 'sample_1') {
                    const sample1Fields = ['sample1Question1', 'sample1Question2'];
                    sample1Fields.forEach(fieldId => {
                        const field = document.getElementById(fieldId);
                        if (field && !field.value) {
                            showError(field, null, 'Please answer all questions for Sample 1');
                            isValid = false;
                        }
                    });
                } else if (purpose.id === 'sample_2') {
                    const sample2Fields = ['sample2Question1', 'sample2Question2', 'sample2Question3'];
                    sample2Fields.forEach(fieldId => {
                        const field = document.getElementById(fieldId);
                        if (field && !field.value) {
                            showError(field, null, 'Please answer all questions for Sample 2');
                            isValid = false;
                        }
                    });
                }
            });
            
            return isValid;
        }

        function showError(field, errorId, message) {
            field.classList.add('invalid-input');
            if (errorId) {
                const errorElement = document.getElementById(errorId);
                if (errorElement) {
                    errorElement.textContent = message;
                    errorElement.style.display = 'block';
                }
            } else {
                // If no error element ID, show alert for required fields
                // (Handled in validation loop)
            }
        }

        function clearError(field, errorId) {
            field.classList.remove('invalid-input');
            if (errorId) {
                const errorElement = document.getElementById(errorId);
                if (errorElement) {
                    errorElement.style.display = 'none';
                }
            }
        }

        function getFormData() {
            const formData = {
                lastName: lastName.value.trim().toUpperCase(),
                firstName: firstName.value.trim().toUpperCase(),
                middleName: middleName.value.trim().toUpperCase(),
                contactNumber: contactNumber.value.trim(),
                birthday: birthday.value,
                age: age.value,
                birthPlace: birthPlace.value.trim().toUpperCase(),
                nationality: nationality.value,
                sex: sex.value
            };
            
            // Get purpose-specific data
            selectedApplicationPurposes.forEach(purpose => {
                if (purpose.id === 'barangay_clearance') {
                    formData.subdivision = document.getElementById('subdivision')?.value || '';
                    formData.street = document.getElementById('street')?.value || '';
                    formData.block = document.getElementById('block')?.value || '';
                    formData.lot = document.getElementById('lot')?.value || '';
                    formData.lengthStay = document.getElementById('lengthStay')?.value || '';
                    formData.stayUnit = document.getElementById('stayUnit')?.value || '';
                    formData.certificatePurposes = certificatePurposeSelects.barangay_clearance?.selected || [];
                    formData.barangayClearanceData = {
                        purpose: formData.certificatePurposes.join(', ')
                    };
                } else if (purpose.id === 'sample_1') {
                    formData.sample1Data = {
                        question1: document.getElementById('sample1Question1')?.value || '',
                        question2: document.getElementById('sample1Question2')?.value || ''
                    };
                } else if (purpose.id === 'sample_2') {
                    formData.sample2Data = {
                        question1: document.getElementById('sample2Question1')?.value || '',
                        question2: document.getElementById('sample2Question2')?.value || '',
                        question3: document.getElementById('sample2Question3')?.value || ''
                    };
                }
            });
            
            return formData;
        }

        // Application Management Functions
        function populateApplicationsTable() {
            const tableBody = document.getElementById('applicationsTable');
            tableBody.innerHTML = '';
            
            if (applicantsDatabase.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `<td colspan="6" style="text-align: center; padding: 30px;">No applications found</td>`;
                tableBody.appendChild(row);
                return;
            }
            
            applicantsDatabase.forEach(app => {
                const row = document.createElement('tr');
                
                let statusClass = 'status-pending';
                if (app.status === 'Approved') statusClass = 'status-approved';
                if (app.status === 'Rejected') statusClass = 'status-rejected';
                
                // Display multi-purpose indicator if applicable
                let purposeDisplay = app.purpose;
                if (app.isMultiPurpose) {
                    purposeDisplay += ' (Multiple)';
                }
                
                row.innerHTML = `
                    <td>${app.id}</td>
                    <td>${app.lastName}, ${app.firstName} ${app.middleName || ''}</td>
                    <td>${purposeDisplay}</td>
                    <td>${app.dateSubmitted}</td>
                    <td><span class="status-badge ${statusClass}">${app.status.toUpperCase()}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn view-btn" onclick="viewApplicationDetails(${app.id})">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="action-btn approve-btn" onclick="approveApplication(${app.id})">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="action-btn reject-btn" onclick="rejectApplication(${app.id})">
                                <i class="fas fa-times"></i> Reject
                            </button>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // Update pagination info
            document.getElementById('paginationInfo').textContent = `Showing ${applicantsDatabase.length} applications`;
        }

        function viewApplicationDetails(appId) {
            const applicant = applicantsDatabase.find(app => app.id === appId);
            
            if (!applicant) {
                alert('Application not found!');
                return;
            }
            
            let purposeSpecificHTML = '';
            
            if (applicant.purpose === 'BARANGAY CLEARANCE') {
                purposeSpecificHTML = `
                    <h3>Barangay Clearance Details</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Subdivision</label>
                            <input type="text" value="${applicant.subdivision || ''}" readonly>
                        </div>
                        <div class="form-group">
                            <label>Street</label>
                            <input type="text" value="${applicant.street || ''}" readonly>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Block</label>
                            <input type="text" value="${applicant.block || ''}" readonly>
                        </div>
                        <div class="form-group">
                            <label>Lot</label>
                            <input type="text" value="${applicant.lot || ''}" readonly>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Length of Stay</label>
                            <input type="text" value="${applicant.lengthStay || ''} ${applicant.stayUnit || ''}" readonly>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Certificate Purposes</label>
                        <textarea rows="3" readonly>${applicant.certificatePurposes ? applicant.certificatePurposes.join(', ') : ''}</textarea>
                    </div>
                `;
            } else if (applicant.purpose === 'SAMPLE 1') {
                purposeSpecificHTML = `
                    <h3>Sample 1 Details</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>POGI BA SI SEAN?</label>
                            <input type="text" value="${applicant.sample1Data?.question1 || ''}" readonly>
                        </div>
                        <div class="form-group">
                            <label>POGI BA SI JARRED?</label>
                            <input type="text" value="${applicant.sample1Data?.question2 || ''}" readonly>
                        </div>
                    </div>
                `;
            } else if (applicant.purpose === 'SAMPLE 2') {
                purposeSpecificHTML = `
                    <h3>Sample 2 Details</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>POGI BA SI PRINCE?</label>
                            <input type="text" value="${applicant.sample2Data?.question1 || ''}" readonly>
                        </div>
                        <div class="form-group">
                            <label>POGI BA SI CLARISSE?</label>
                            <input type="text" value="${applicant.sample2Data?.question2 || ''}" readonly>
                        </div>
                        <div class="form-group">
                            <label>NANG-IWAN BA SI DWAYNE?</label>
                            <input type="text" value="${applicant.sample2Data?.question3 || ''}" readonly>
                        </div>
                    </div>
                `;
            }
            
            formViewContent.innerHTML = `
                <div class="form-row">
                    <div class="form-group">
                        <label>Last Name</label>
                        <input type="text" value="${applicant.lastName}" readonly>
                    </div>
                    <div class="form-group">
                        <label>First Name</label>
                        <input type="text" value="${applicant.firstName}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Middle Name</label>
                        <input type="text" value="${applicant.middleName || ''}" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Contact Number</label>
                        <input type="text" value="${applicant.contactNumber}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Birthday</label>
                        <input type="text" value="${applicant.birthday}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Age</label>
                        <input type="text" value="${applicant.age}" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Place of Birth</label>
                        <input type="text" value="${applicant.birthPlace}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Nationality</label>
                        <input type="text" value="${applicant.nationality}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Sex</label>
                        <input type="text" value="${applicant.sex}" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Application Purpose</label>
                        <input type="text" value="${applicant.purpose}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <input type="text" value="${applicant.status}" readonly style="font-weight: bold; color: ${applicant.status === 'Approved' ? 'green' : applicant.status === 'Rejected' ? 'red' : 'orange'}">
                    </div>
                    <div class="form-group">
                        <label>Date Submitted</label>
                        <input type="text" value="${applicant.dateSubmitted}" readonly>
                    </div>
                </div>
                ${purposeSpecificHTML}
                ${applicant.isMultiPurpose ? '<div class="form-group"><p style="color: var(--blue-medium); font-weight: bold;"><i class="fas fa-info-circle"></i> This is part of a multi-purpose application</p></div>' : ''}
            `;
            
            formViewModal.classList.remove('hidden');
        }

        function approveApplication(appId) {
            if (confirm('Approve this application?')) {
                const applicantIndex = applicantsDatabase.findIndex(app => app.id === appId);
                if (applicantIndex !== -1) {
                    applicantsDatabase[applicantIndex].status = 'Approved';
                    localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
                    populateApplicationsTable();
                    updateDashboardStats();
                    alert('Application approved successfully!');
                }
            }
        }

        function rejectApplication(appId) {
            if (confirm('Reject this application?')) {
                const applicantIndex = applicantsDatabase.findIndex(app => app.id === appId);
                if (applicantIndex !== -1) {
                    applicantsDatabase[applicantIndex].status = 'Rejected';
                    localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
                    populateApplicationsTable();
                    updateDashboardStats();
                    alert('Application rejected successfully!');
                }
            }
        }

        function applyFilters() {
            const typeFilter = document.getElementById('filterType').value;
            const statusFilter = document.getElementById('filterStatus').value;
            const dateFilter = document.getElementById('filterDate').value;
            
            // Filter applications based on criteria
            let filteredApplications = applicantsDatabase;
            
            if (typeFilter !== 'all') {
                filteredApplications = filteredApplications.filter(app => 
                    app.purpose.toLowerCase().includes(typeFilter.toLowerCase())
                );
            }
            
            if (statusFilter !== 'all') {
                filteredApplications = filteredApplications.filter(app => 
                    app.status.toLowerCase() === statusFilter.toLowerCase()
                );
            }
            
            if (dateFilter) {
                filteredApplications = filteredApplications.filter(app => 
                    app.dateSubmitted === dateFilter
                );
            }
            
            // Update table with filtered applications
            const tableBody = document.getElementById('applicationsTable');
            tableBody.innerHTML = '';
            
            filteredApplications.forEach(app => {
                const row = document.createElement('tr');
                
                let statusClass = 'status-pending';
                if (app.status === 'Approved') statusClass = 'status-approved';
                if (app.status === 'Rejected') statusClass = 'status-rejected';
                
                // Display multi-purpose indicator if applicable
                let purposeDisplay = app.purpose;
                if (app.isMultiPurpose) {
                    purposeDisplay += ' (Multiple)';
                }
                
                row.innerHTML = `
                    <td>${app.id}</td>
                    <td>${app.lastName}, ${app.firstName} ${app.middleName || ''}</td>
                    <td>${purposeDisplay}</td>
                    <td>${app.dateSubmitted}</td>
                    <td><span class="status-badge ${statusClass}">${app.status.toUpperCase()}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn view-btn" onclick="viewApplicationDetails(${app.id})">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="action-btn approve-btn" onclick="approveApplication(${app.id})">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="action-btn reject-btn" onclick="rejectApplication(${app.id})">
                                <i class="fas fa-times"></i> Reject
                            </button>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            if (filteredApplications.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `<td colspan="6" style="text-align: center; padding: 30px;">No applications match the selected filters</td>`;
                tableBody.appendChild(row);
            }
            
            document.getElementById('paginationInfo').textContent = `Showing ${filteredApplications.length} applications`;
        }

        function resetFilters() {
            document.getElementById('filterType').value = 'all';
            document.getElementById('filterStatus').value = 'all';
            document.getElementById('filterDate').value = '';
            populateApplicationsTable();
        }

        // Dashboard Functions
        function updateDashboardStats() {
            // Pending applications
            const pendingApps = applicantsDatabase.filter(app => app.status === 'Pending').length;
            document.getElementById('pendingApplications').textContent = pendingApps;
            
            // Processed today
            const today = new Date().toLocaleDateString();
            const processedToday = applicantsDatabase.filter(app => 
                app.dateSubmitted === today && app.status !== 'Pending'
            ).length;
            document.getElementById('processedToday').textContent = processedToday;
            
            // Total residents
            document.getElementById('totalResidents').textContent = residentsDatabase.length;
        }

        function populateRecentActivity() {
            const tableBody = document.getElementById('recentActivity');
            tableBody.innerHTML = '';
            
            sampleActivity.forEach(activity => {
                const row = document.createElement('tr');
                
                let statusBadge = '';
                if (activity.status === 'approved') {
                    statusBadge = '<span class="status-badge status-approved">APPROVED</span>';
                } else if (activity.status === 'rejected') {
                    statusBadge = '<span class="status-badge status-rejected">REJECTED</span>';
                } else {
                    statusBadge = '<span class="status-badge status-pending">INFO</span>';
                }
                
                row.innerHTML = `
                    <td>${activity.time}</td>
                    <td>${activity.activity}</td>
                    <td>${activity.user}</td>
                    <td>${statusBadge}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function populateReportTable() {
            const tableBody = document.getElementById('reportTable');
            tableBody.innerHTML = '';
            
            // Add sample report data
            for (let i = 1; i <= 10; i++) {
                const date = `2023-11-${i.toString().padStart(2, '0')}`;
                const types = ['BARANGAY CLEARANCE', 'SAMPLE 1', 'SAMPLE 2'];
                const type = types[Math.floor(Math.random() * types.length)];
                const resident = applicantsDatabase[Math.floor(Math.random() * Math.min(applicantsDatabase.length, 5))] || { lastName: 'Sample', firstName: 'Applicant' };
                const statuses = ['Pending', 'Approved', 'Rejected'];
                const status = statuses[Math.floor(Math.random() * statuses.length)];
                const officers = ['Juan Dela Cruz', 'Maria Santos', 'Pedro Garcia'];
                const officer = officers[Math.floor(Math.random() * officers.length)];
                const time = `${Math.floor(Math.random() * 3) + 1} days`;
                
                let statusClass = 'status-pending';
                if (status === 'Approved') statusClass = 'status-approved';
                if (status === 'Rejected') statusClass = 'status-rejected';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${date}</td>
                    <td>${type}</td>
                    <td>${resident ? resident.lastName + ', ' + resident.firstName : 'Sample Applicant'}</td>
                    <td><span class="status-badge ${statusClass}">${status.toUpperCase()}</span></td>
                    <td>${officer}</td>
                    <td>${time}</td>
                `;
                
                tableBody.appendChild(row);
            }
        }

        // Certificate Generation Functions
        function updateCertificatePreview() {
            const type = document.getElementById('certificateType').value;
            const recipient = document.getElementById('certificateRecipient').value || '[RECIPIENT NAME]';
            const purpose = document.getElementById('certificatePurpose').value || '[PURPOSE]';
            const date = document.getElementById('certificateDate').value || new Date().toISOString().split('T')[0];
            
            // Update preview
            document.getElementById('previewCertificateType').textContent = 
                type === 'residency' ? 'CERTIFICATE OF RESIDENCY' :
                type === 'indigency' ? 'CERTIFICATE OF INDIGENCY' :
                type === 'goodmoral' ? 'CERTIFICATE OF GOOD MORAL CHARACTER' :
                type === 'employment' ? 'CERTIFICATE OF EMPLOYMENT' :
                type === 'nocriminal' ? 'NO CRIMINAL RECORD' :
                type === 'soloparent' ? 'SOLO PARENT CERTIFICATION' :
                'CERTIFICATE';
            
            document.getElementById('previewRecipient').textContent = recipient;
            document.getElementById('previewPurpose').textContent = purpose;
            document.getElementById('previewDate').textContent = formatDate(date);
            
            // Set sample address and length of stay
            document.getElementById('previewAddress').textContent = 'Block 5, Lot 12, Pilar Village';
            document.getElementById('previewLengthStay').textContent = '5 years';
        }

        function showResidentSuggestions() {
            const input = document.getElementById('certificateRecipient').value.toLowerCase();
            const suggestionsDiv = document.getElementById('residentSuggestions');
            
            if (input.length < 2) {
                suggestionsDiv.style.display = 'none';
                return;
            }
            
            const filtered = residentsDatabase.filter(r => 
                (r.lastName + ' ' + r.firstName).toLowerCase().includes(input)
            );
            
            if (filtered.length > 0) {
                suggestionsDiv.innerHTML = filtered.map(r => 
                    `<div style="padding: 5px; border-bottom: 1px solid #eee; cursor: pointer;" 
                          onclick="selectResident('${r.lastName}, ${r.firstName}', '${r.blockLot}, ${r.street}, ${r.subdivision}')">
                        ${r.lastName}, ${r.firstName} - ${r.blockLot}, ${r.street}, ${r.subdivision}
                    </div>`
                ).join('');
                suggestionsDiv.style.display = 'block';
            } else {
                suggestionsDiv.style.display = 'none';
            }
        }

        function selectResident(name, address) {
            document.getElementById('certificateRecipient').value = name;
            document.getElementById('residentSuggestions').style.display = 'none';
        }

        function generateReport() {
            const type = document.getElementById('reportType').value;
            const month = document.getElementById('reportMonth').value;
            const year = document.getElementById('reportYear').value;
            
            alert(`Generating ${type} report for ${getMonthName(month)} ${year}...\n\nIn a real system, this would fetch data from the database and update the report table.`);
        }

        // Helper Functions
        function resetApplicationForm() {
            applicationForm.reset();
            selectedApplicationPurposes = [];
            purposeSections.innerHTML = '';
            selectedPurposes.innerHTML = '';
            purposeSearch.value = '';
            certificatePurposeSelects = {};
            
            // Reset dropdown selections
            purposeDropdown.querySelectorAll('.custom-select-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Set today as max for birthday
            const today = new Date().toISOString().split('T')[0];
            birthday.max = today;
            
            // Clear age field
            age.value = '';
        }

        function populateNationalityDropdown() {
            // List of all nationalities/countries
            const nationalities = [
                "FILIPINO", "AFGHAN", "ALBANIAN", "ALGERIAN", "AMERICAN", "ANDORRAN", "ANGOLAN", 
                "ANTIGUAN", "ARGENTINE", "ARMENIAN", "AUSTRALIAN", "AUSTRIAN", "AZERBAIJANI", 
                "BAHAMIAN", "BAHRAINI", "BANGLADESHI", "BARBADIAN", "BELARUSIAN", "BELGIAN", 
                "BELIZEAN", "BENINESE", "BHUTANESE", "BOLIVIAN", "BOSNIAN", "BOTSWANAN", 
                "BRAZILIAN", "BRITISH", "BRUNEIAN", "BULGARIAN", "BURKINABE", "BURMESE", 
                "BURUNDIAN", "CAMBODIAN", "CAMEROONIAN", "CANADIAN", "CAPE VERDEAN", 
                "CENTRAL AFRICAN", "CHADIAN", "CHILEAN", "CHINESE", "COLOMBIAN", "COMORAN", 
                "CONGOLESE", "COSTA RICAN", "CROATIAN", "CUBAN", "CYPRIOT", "CZECH", 
                "DANISH", "DJIBOUTIAN", "DOMINICAN", "DUTCH", "EAST TIMORESE", "ECUADOREAN", 
                "EGYPTIAN", "EMIRATI", "EQUATORIAL GUINEAN", "ERITREAN", "ESTONIAN", 
                "ETHIOPIAN", "FIJIAN", "FINNISH", "FRENCH", "GABONESE", "GAMBIAN", 
                "GEORGIAN", "GERMAN", "GHANAIAN", "GREEK", "GRENADIAN", "GUATEMALAN", 
                "GUINEAN", "GUYANESE", "HAITIAN", "HONDURAN", "HUNGARIAN", "ICELANDIC", 
                "INDIAN", "INDONESIAN", "IRANIAN", "IRAQI", "IRISH", "ISRAELI", "ITALIAN", 
                "IVORIAN", "JAMAICAN", "JAPANESE", "JORDANIAN", "KAZAKH", "KENYAN", 
                "KIRIBATI", "KOREAN", "KOSOVAR", "KUWAITI", "KYRGYZ", "LAOTIAN", "LATVIAN", 
                "LEBANESE", "LIBERIAN", "LIBYAN", "LIECHTENSTEINER", "LITHUANIAN", 
                "LUXEMBOURGER", "MACEDONIAN", "MALAGASY", "MALAWIAN", "MALAYSIAN", 
                "MALDIVIAN", "MALIAN", "MALTESE", "MARSHALLESE", "MAURITANIAN", "MAURITIAN", 
                "MEXICAN", "MICRONESIAN", "MOLDOVAN", "MONACAN", "MONGOLIAN", "MONTENEGRIN", 
                "MOROCCAN", "MOSOTHO", "MOZAMBICAN", "NAMIBIAN", "NAURUAN", "NEPALESE", 
                "NEW ZEALANDER", "NICARAGUAN", "NIGERIAN", "NIGERIEN", "NIUEAN", "NORWEGIAN", 
                "OMANI", "PAKISTANI", "PALAUAN", "PALESTINIAN", "PANAMANIAN", "PAPUA NEW GUINEAN", 
                "PARAGUAYAN", "PERUVIAN", "POLISH", "PORTUGUESE", "QATARI", "ROMANIAN", 
                "RUSSIAN", "RWANDAN", "SAINT LUCIAN", "SALVADORAN", "SAMOAN", "SAN MARINESE", 
                "SAO TOMEAN", "SAUDI", "SCOTTISH", "SENEGALESE", "SERBIAN", "SEYCHELLOIS", 
                "SIERRA LEONEAN", "SINGAPOREAN", "SLOVAK", "SLOVENIAN", "SOLOMON ISLANDER", 
                "SOMALI", "SOUTH AFRICAN", "SOUTH KOREAN", "SOUTH SUDANESE", "SPANISH", 
                "SRI LANKAN", "SUDANESE", "SURINAMER", "SWAZI", "SWEDISH", "SWISS", 
                "SYRIAN", "TAIWANESE", "TAJIK", "TANZANIAN", "THAI", "TOGOLESE", "TONGAN", 
                "TRINIDADIAN", "TUNISIAN", "TURKISH", "TURKMEN", "TUVALUAN", "UGANDAN", 
                "UKRAINIAN", "URUGUAYAN", "UZBEK", "VANUATUAN", "VENEZUELAN", "VIETNAMESE", 
                "WELSH", "YEMENI", "ZAMBIAN", "ZIMBABWEAN"
            ];

            // Sort nationalities alphabetically but keep FILIPINO first
            nationalities.sort((a, b) => {
                if (a === "FILIPINO") return -1;
                if (b === "FILIPINO") return 1;
                return a.localeCompare(b);
            });

            // Populate nationality dropdown
            nationalities.forEach(nationality => {
                const option = document.createElement('option');
                option.value = nationality;
                option.textContent = nationality;
                nationality.appendChild(option);
            });

            // Set FILIPINO as selected by default
            setTimeout(() => {
                const filipinoOption = nationality.querySelector('option[value="FILIPINO"]');
                if (filipinoOption) {
                    filipinoOption.selected = true;
                }
            }, 100);
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('en-US', options);
        }

        function getMonthName(monthNumber) {
            const months = [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ];
            return months[parseInt(monthNumber) - 1] || '';
        }

        // Initialize certificate preview
        updateCertificatePreview();
        
        // Set today's date as default for certificate date
        document.getElementById('certificateDate').value = new Date().toISOString().split('T')[0];
        document.getElementById('residentBirthdate').value = new Date(new Date().setFullYear(new Date().getFullYear() - 30)).toISOString().split('T')[0];
    </script>
</body>
</html>
Key Features Implemented:
Searchable Multi-Select Dropdowns for both main purposes and certificate purposes

Automatic Capitalization of all inputs (except login)

All Fields Required (except middle name)

Input Validation:

Letters only for name fields

Numbers only for block, lot, and age

Phone format: "09xx xxx xxxx" (11 digits)

Age Auto-Calculation from birthdate (non-editable)

Conditional Fields based on selected purposes

No Redundant Fields - Common information shared across purposes

Separate Database Entries for each selected purpose

Address Format:

Subdivision dropdown

Street dropdown (dependent on subdivision)

Separate Block and Lot fields (numbers only)

Image Upload Removed as requested

How It Works:
Applicant Form: Users can search and select multiple purposes

Conditional Display: Fields appear based on selected purposes

Smart Field Management: Common fields (name, contact, etc.) appear once

Database Storage: Each purpose creates a separate entry with all information

Viewing Applications: Barangay members can view complete applications with all filled information

The system maintains all existing functionality (dashboard, login, etc.) while implementing your new requirements.

This response is AI-generated, for reference only.
Why don't the "open as applicant" or "open as barangay member" buttons work? What went wrong? Can you fix the code, just type in the whole code again so that I can copy and paste it directly.
I apologize for the issue. The problem is likely with the JavaScript initialization. Let me provide you with the complete corrected code:

html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barangay Pilar Village Services Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --blue-dark: #003380;
            --blue-medium: #0047AB;
            --blue-light: #0756CE;
            --red: #CE1126;
            --yellow: #FCD116;
            --green: #28a745;
            --orange: #fd7e14;
            --purple: #6f42c1;
            --gray-light: #f5f5f5;
            --gray-medium: #e0e0e0;
            --gray-dark: #333333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--gray-light);
            color: var(--gray-dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }

        @media (max-width: 1400px) {
            .container {
                max-width: 1200px;
            }
        }
        
        @media (max-width: 1200px) {
            .container {
                max-width: 1000px;
            }
        }
        
        @media (max-width: 992px) {
            .container {
                max-width: 800px;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                max-width: 95%;
                padding: 15px;
            }
        }

        header {
            background: linear-gradient(to right, var(--blue-dark), var(--blue-medium));
            color: white;
            padding: 20px 0;
            text-align: center;
            border-bottom: 5px solid var(--yellow);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }

        .logo {
            font-size: 2.5rem;
            margin-right: 15px;
            color: var(--yellow);
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .tagline {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Common screen styles */
        .screen {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-top: 30px;
        }

        h2 {
            color: var(--blue-dark);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--yellow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h3 {
            color: var(--blue-medium);
            margin: 20px 0 15px 0;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-btn i {
            font-size: 1.2rem;
        }

        .primary-btn {
            background-color: var(--blue-medium);
            color: white;
        }

        .primary-btn:hover {
            background-color: var(--blue-dark);
            transform: translateY(-2px);
        }

        .secondary-btn {
            background-color: var(--gray-medium);
            color: var(--gray-dark);
        }

        .secondary-btn:hover {
            background-color: #d0d0d0;
        }

        .danger-btn {
            background-color: var(--red);
            color: white;
        }

        .danger-btn:hover {
            background-color: #b31022;
        }

        .success-btn {
            background-color: var(--green);
            color: white;
        }

        .success-btn:hover {
            background-color: #218838;
        }

        .hidden {
            display: none !important;
        }

        /* Applicant Form Specific Styles */
        .applicant-form {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-top: 30px;
        }

        .thank-you-screen {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-top: 30px;
            text-align: center;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .form-row .form-group {
            flex: 1;
            min-width: 250px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--blue-dark);
        }

        .required::after {
            content: " *";
            color: var(--red);
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--gray-medium);
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s;
            background-color: white;
        }

        /* Add uppercase styling to text inputs */
        input[type="text"], input[type="tel"], textarea, .custom-select-input {
            text-transform: uppercase;
        }

        input::placeholder, textarea::placeholder {
            color: #888;
            font-style: italic;
        }

        select {
            color: #333;
        }

        select option:first-child {
            color: #888;
            font-style: italic;
        }

        input:focus, select:focus, textarea:focus, .custom-select-input:focus {
            border-color: var(--blue-light);
            outline: none;
            box-shadow: 0 0 0 3px rgba(7, 86, 206, 0.2);
        }

        /* Style for invalid input */
        .invalid-input {
            border-color: var(--red) !important;
            background-color: #fff0f0;
        }

        .error-message {
            color: var(--red);
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
        }

        .length-stay-container {
            display: flex;
            gap: 10px;
        }

        .length-stay-container input {
            flex: 3;
        }

        .length-stay-container select {
            flex: 1;
            min-width: 120px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }

        .checkbox-group label {
            margin-bottom: 0;
        }

        .additional-form {
            background-color: #f0f8ff;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid var(--blue-medium);
        }

        .additional-form h3 {
            color: var(--blue-dark);
            margin-bottom: 15px;
            text-align: center;
        }

        .submit-btn {
            background-color: var(--blue-medium);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
            width: 100%;
            max-width: 300px;
            text-decoration: none;
            display: inline-block;
        }

        .submit-btn:hover {
            background-color: var(--blue-dark);
            transform: scale(1.05);
        }

        .back-btn {
            background-color: var(--gray-medium);
            color: var(--gray-dark);
            margin-right: 15px;
        }

        .back-btn:hover {
            background-color: #b0b0b0;
        }

        .thank-you-screen h2 {
            color: var(--blue-dark);
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .thank-you-screen h3 {
            color: var(--blue-medium);
            font-size: 1.4rem;
            margin-bottom: 30px;
            font-weight: normal;
        }

        .thank-you-icon {
            font-size: 4rem;
            color: var(--blue-light);
            margin: 30px 0;
        }

        /* FIXED: Button container alignment for thank you screen */
        .thank-you-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        /* Custom Select Styles */
        .custom-select-container {
            position: relative;
            margin-bottom: 20px;
        }

        .custom-select-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--gray-medium);
            border-radius: 6px;
            font-size: 1rem;
            background-color: white;
            cursor: pointer;
        }

        .custom-select-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            max-height: 300px;
            overflow-y: auto;
            background-color: white;
            border: 2px solid var(--gray-medium);
            border-top: none;
            border-radius: 0 0 6px 6px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            z-index: 100;
            display: none;
        }

        .custom-select-option {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--gray-light);
            transition: background-color 0.2s;
        }

        .custom-select-option:hover {
            background-color: var(--gray-light);
        }

        .custom-select-option.selected {
            background-color: rgba(7, 86, 206, 0.1);
            color: var(--blue-dark);
            font-weight: 600;
        }

        .custom-select-option.selected::after {
            content: " ‚úì";
            color: var(--green);
            float: right;
        }

        .custom-select-selected {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .selected-tag {
            background-color: var(--blue-light);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .selected-tag .remove-tag {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0;
            margin-left: 5px;
        }

        /* Purpose-specific sections */
        .purpose-section {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid var(--blue-medium);
        }

        .purpose-section h3 {
            color: var(--blue-dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .purpose-section h3 i {
            color: var(--blue-medium);
        }

        /* Block and Lot container */
        .block-lot-container {
            display: flex;
            gap: 20px;
        }

        .block-lot-container .form-group {
            flex: 1;
        }

        /* Table Styles */
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th {
            background-color: var(--blue-dark);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--gray-medium);
        }

        tr:hover {
            background-color: rgba(7, 86, 206, 0.05);
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
        }

        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-approved {
            background-color: #d4edda;
            color: #155724;
        }

        .status-rejected {
            background-color: #f8d7da;
            color: #721c24;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .view-btn {
            background-color: var(--blue-light);
            color: white;
        }

        .approve-btn {
            background-color: var(--green);
            color: white;
        }

        .reject-btn {
            background-color: var(--red);
            color: white;
        }

        /* Dashboard Stats */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-top: 4px solid var(--blue-medium);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2.5rem;
            color: var(--blue-medium);
            margin-bottom: 15px;
        }

        .stat-card h3 {
            font-size: 2.2rem;
            color: var(--blue-dark);
            margin: 10px 0;
        }

        .stat-card p {
            color: var(--gray-dark);
            font-size: 0.95rem;
        }

        /* Certificate Preview */
        .certificate-preview {
            background-color: white;
            border: 2px solid var(--gray-medium);
            border-radius: 8px;
            padding: 40px;
            margin-top: 20px;
            min-height: 400px;
            position: relative;
            background-image: url('data:image/svg+xml;utf8,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><path d="M0,0 L100,0 L100,100 L0,100 Z" fill="none" stroke="%23FCD116" stroke-width="2" stroke-dasharray="5,5"/></svg>');
            background-size: 100px 100px;
        }

        .certificate-header {
            text-align: center;
            border-bottom: 3px double var(--blue-dark);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .certificate-header h2 {
            color: var(--blue-dark);
            font-size: 2.2rem;
            border: none;
            margin: 0;
            padding: 0;
        }

        .certificate-body {
            padding: 30px;
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .certificate-footer {
            position: absolute;
            bottom: 40px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
            padding-top: 30px;
            border-top: 1px solid var(--gray-medium);
        }

        .signature-box {
            text-align: center;
        }

        .signature-line {
            width: 200px;
            border-top: 1px solid var(--gray-dark);
            margin: 40px auto 10px;
        }

        /* Filter Controls */
        .filter-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            background-color: var(--gray-light);
            padding: 20px;
            border-radius: 8px;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .filter-btn {
            align-self: flex-end;
            padding: 10px 20px;
        }

        /* Form View Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            margin: 0;
            border: none;
            padding: 0;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-dark);
        }

        /* Footer */
        footer {
            background-color: var(--blue-dark);
            color: white;
            padding: 30px 0;
            margin-top: 40px;
            text-align: center;
        }

        .footer-content {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .footer-section {
            flex: 1;
            min-width: 300px;
            margin: 15px 0;
        }

        .footer-section h3 {
            color: var(--yellow);
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .footer-section p {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .footer-section i {
            margin-right: 10px;
            color: var(--yellow);
            min-width: 20px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .screen, .applicant-form, .thank-you-screen {
                padding: 20px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .block-lot-container {
                flex-direction: column;
                gap: 0;
            }
            
            .nav-buttons {
                flex-direction: column;
            }
            
            .nav-btn {
                width: 100%;
                justify-content: center;
            }
            
            .footer-content {
                flex-direction: column;
                text-align: center;
            }
            
            .thank-you-buttons {
                flex-direction: column;
                align-items: center;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.7rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo-container">
                <i class="fas fa-landmark logo"></i>
                <div>
                    <h1>Barangay Pilar Village Services Portal</h1>
                    <p class="tagline">Serving The Community With Integrity And Excellence</p>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Access Selection Screen -->
        <div id="accessScreen" class="screen">
            <h2>Welcome to the Barangay Pilar Village Services Portal</h2>
            <p>Please select your access type:</p>
            
            <div class="nav-buttons">
                <button class="nav-btn primary-btn" id="applicantBtn">
                    <i class="fas fa-user-edit"></i>
                    Open as Applicant
                </button>
                
                <button class="nav-btn primary-btn" id="memberBtn">
                    <i class="fas fa-user-lock"></i>
                    Open as Barangay Member
                </button>
            </div>
        </div>

        <!-- Login Screen for Barangay Members -->
        <div id="loginScreen" class="screen hidden">
            <h2>Barangay Member Login</h2>
            <p>Enter your credentials to access the barangay management system</p>
            
            <div id="loginError" class="error-message" style="background-color: #f8d7da; color: #721c24; padding: 12px; border-radius: 6px; margin-bottom: 20px; display: none;">
                <i class="fas fa-exclamation-circle"></i> Invalid username or password. Please try again.
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="username" class="required">Username</label>
                    <input type="text" id="username" placeholder="Enter your username" required style="text-transform: none;">
                </div>
                
                <div class="form-group">
                    <label for="password" class="required">Password</label>
                    <input type="password" id="password" placeholder="Enter your password" required style="text-transform: none;">
                </div>
                
                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="rememberMe">
                        <label for="rememberMe">Remember me</label>
                    </div>
                </div>
                
                <div class="nav-buttons">
                    <button type="button" class="nav-btn secondary-btn" id="backToAccessFromLogin">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <button type="submit" class="nav-btn primary-btn">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </div>
                
                <div style="margin-top: 20px; text-align: center; font-size: 0.9rem; color: var(--gray-dark);">
                    <p>Demo Credentials:</p>
                    <p><strong>Username:</strong> admin | <strong>Password:</strong> barangay2023</p>
                    <p><strong>Username:</strong> staff | <strong>Password:</strong> pilarvillage</p>
                </div>
            </form>
        </div>

        <!-- Application Form Screen -->
        <div id="applicantForm" class="applicant-form hidden">
            <h2>
                Application Form
                <button class="nav-btn secondary-btn" id="backToAccessFromApplicant">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </button>
            </h2>

            <form id="applicationForm">
                <!-- Personal Information -->
                <h3>Personal Information</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="lastName" class="required">Last Name</label>
                        <input type="text" id="lastName" placeholder="ENTER LAST NAME" required>
                        <div class="error-message" id="lastNameError">Please enter letters only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="firstName" class="required">First Name</label>
                        <input type="text" id="firstName" placeholder="ENTER FIRST NAME" required>
                        <div class="error-message" id="firstNameError">Please enter letters only</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="middleName">Middle Name</label>
                        <input type="text" id="middleName" placeholder="ENTER MIDDLE NAME">
                        <div class="error-message" id="middleNameError">Please enter letters only</div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="contactNumber" class="required">Contact Number</label>
                        <input type="tel" id="contactNumber" placeholder="0912 345 6789" required>
                        <div class="error-message" id="contactNumberError">Please enter a valid 11-digit phone number starting with 09</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="birthday" class="required">Birthday</label>
                        <input type="date" id="birthday" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="age" class="required">Age</label>
                        <input type="text" id="age" placeholder="AGE" readonly style="background-color: #f5f5f5;">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="birthPlace" class="required">Place of Birth</label>
                        <input type="text" id="birthPlace" placeholder="CITY, PROVINCE" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="nationality" class="required">Nationality</label>
                        <select id="nationality" required>
                            <option value="" disabled selected>SELECT NATIONALITY</option>
                            <!-- Nationalities will be populated by JavaScript -->
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="sex" class="required">Sex</label>
                        <select id="sex" required>
                            <option value="" disabled selected>SELECT SEX</option>
                            <option value="MALE">MALE</option>
                            <option value="FEMALE">FEMALE</option>
                        </select>
                    </div>
                </div>

                <!-- Purpose of Application -->
                <div class="form-group">
                    <label class="required">Purpose of Application</label>
                    <div class="custom-select-container" id="purposeSelectContainer">
                        <input type="text" class="custom-select-input" id="purposeSearch" placeholder="TYPE TO SEARCH FOR PURPOSES...">
                        <div class="custom-select-dropdown" id="purposeDropdown">
                            <!-- Options will be populated by JavaScript -->
                        </div>
                        <div class="custom-select-selected" id="selectedPurposes">
                            <!-- Selected purposes will appear here -->
                        </div>
                    </div>
                </div>

                <!-- Purpose-specific sections will be dynamically added here -->
                <div id="purposeSections"></div>

                <!-- Submit Button -->
                <div style="margin-top: 30px; text-align: center;">
                    <button type="button" class="submit-btn back-btn" id="cancelApplicantForm">Cancel</button>
                    <button type="submit" class="submit-btn">Submit Application</button>
                </div>
            </form>
        </div>

        <!-- Thank You Screen -->
        <div id="thankYouScreen" class="thank-you-screen hidden">
            <i class="fas fa-check-circle thank-you-icon"></i>
            <h2>THANK YOU FOR FILLING YOUR APPLICATION!</h2>
            <h3>We will contact you once your application status is completed.</h3>
            <p>Your application has been submitted successfully. A barangay representative will contact you within 3-5 working days.</p>
            <p>For inquiries, please contact Barangay Pilar Village Office at (02) 1234-5678.</p>
            
            <div class="thank-you-buttons">
                <button class="submit-btn" id="newApplicationBtn">
                    Submit Another Application
                </button>
                <button class="submit-btn back-btn" id="backToHomeFromThankYou">
                    Back to Home
                </button>
            </div>
        </div>

        <!-- Member Dashboard -->
        <div id="memberDashboard" class="screen hidden">
            <h2>
                Barangay Management Dashboard
                <button class="nav-btn danger-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </h2>
            
            <p>Welcome back, <strong id="loggedInUser">Administrator</strong>! Here's an overview of barangay activities.</p>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <i class="fas fa-file-alt"></i>
                    <h3 id="pendingApplications">0</h3>
                    <p>Pending Applications</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-check-circle"></i>
                    <h3 id="processedToday">0</h3>
                    <p>Processed Today</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <h3 id="totalResidents">0</h3>
                    <p>Total Residents</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-calendar-check"></i>
                    <h3 id="upcomingEvents">3</h3>
                    <p>Upcoming Events</p>
                </div>
            </div>
            
            <h3>Quick Actions</h3>
            <div class="nav-buttons">
                <button class="nav-btn primary-btn" id="applicationsManagementBtn">
                    <i class="fas fa-list-check"></i> Applications Management
                </button>
                
                <button class="nav-btn primary-btn" id="residentRegistrationBtn">
                    <i class="fas fa-user-plus"></i> Register New Resident
                </button>
                
                <button class="nav-btn primary-btn" id="certificateGenerationBtn">
                    <i class="fas fa-print"></i> Generate Certificates
                </button>
                
                <button class="nav-btn primary-btn" id="reportsDashboardBtn">
                    <i class="fas fa-chart-bar"></i> View Reports
                </button>
            </div>
            
            <h3 style="margin-top: 30px;">Recent Activity</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Activity</th>
                            <th>User</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="recentActivity">
                        <!-- Activity rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Applications Management Interface -->
        <div id="applicationsManagementScreen" class="screen hidden">
            <h2>
                Applications Management
                <button class="nav-btn secondary-btn" id="backToDashboardFromApps">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="filter-controls">
                <div class="filter-group">
                    <label>Application Type</label>
                    <select id="filterType">
                        <option value="all">All Types</option>
                        <option value="barangay_clearance">Barangay Clearance</option>
                        <option value="sample_1">Sample 1</option>
                        <option value="sample_2">Sample 2</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Status</label>
                    <select id="filterStatus">
                        <option value="all">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="approved">Approved</option>
                        <option value="rejected">Rejected</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Date Range</label>
                    <input type="date" id="filterDate">
                </div>
                
                <button class="nav-btn primary-btn filter-btn" id="applyFilters">
                    <i class="fas fa-filter"></i> Apply Filters
                </button>
                
                <button class="nav-btn secondary-btn filter-btn" id="resetFilters">
                    <i class="fas fa-redo"></i> Reset
                </button>
            </div>
            
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Applicant Name</th>
                            <th>Application Type</th>
                            <th>Date Submitted</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="applicationsTable">
                        <!-- Applications will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <div style="margin-top: 20px; display: flex; justify-content: space-between;">
                <div>
                    <button class="nav-btn secondary-btn" id="exportApplications">
                        <i class="fas fa-file-export"></i> Export to Excel
                    </button>
                </div>
                <div>
                    <span id="paginationInfo">Showing 0 applications</span>
                    <button class="nav-btn secondary-btn" id="prevPage"><i class="fas fa-chevron-left"></i></button>
                    <button class="nav-btn secondary-btn" id="nextPage"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
        </div>

        <!-- Resident Registration Form -->
        <div id="residentRegistrationScreen" class="screen hidden">
            <h2>
                Register New Resident
                <button class="nav-btn secondary-btn" id="backToDashboardFromRegistration">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <form id="residentRegistrationForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentLastName" class="required">Last Name</label>
                        <input type="text" id="residentLastName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentFirstName" class="required">First Name</label>
                        <input type="text" id="residentFirstName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentMiddleName">Middle Name</label>
                        <input type="text" id="residentMiddleName">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentBirthdate" class="required">Birthdate</label>
                        <input type="date" id="residentBirthdate" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentAge" class="required">Age</label>
                        <input type="number" id="residentAge" min="0" max="120" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentCivilStatus" class="required">Civil Status</label>
                        <select id="residentCivilStatus" required>
                            <option value="">Select Status</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                            <option value="Widowed">Widowed</option>
                            <option value="Separated">Separated</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentContact" class="required">Contact Number</label>
                        <input type="tel" id="residentContact" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentEmail">Email Address</label>
                        <input type="email" id="residentEmail">
                    </div>
                    
                    <div class="form-group">
                        <label for="residentOccupation">Occupation</label>
                        <input type="text" id="residentOccupation">
                    </div>
                </div>
                
                <h3>Address Information</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentBlockLot" class="required">Block and Lot</label>
                        <input type="text" id="residentBlockLot" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentStreet" class="required">Street</label>
                        <input type="text" id="residentStreet" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="residentSubdivision" class="required">Subdivision</label>
                        <select id="residentSubdivision" required>
                            <option value="">Select Subdivision</option>
                            <option value="PILAR VILLAGE">PILAR VILLAGE</option>
                            <option value="CYPRESS MANGGAHAN">CYPRESS MANGGAHAN</option>
                            <option value="TERESA PARK">TERESA PARK</option>
                            <option value="BF PILAR SOUTHVILLE">BF PILAR SOUTHVILLE</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="residentLengthStay" class="required">Length of Stay</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="number" id="residentLengthStay" style="flex: 3;" required>
                            <select id="residentStayUnit" style="flex: 1;">
                                <option value="months">Months</option>
                                <option value="years">Years</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="residentNotes">Additional Notes</label>
                    <textarea id="residentNotes" rows="3"></textarea>
                </div>
                
                <div class="nav-buttons">
                    <button type="reset" class="nav-btn secondary-btn">
                        <i class="fas fa-redo"></i> Clear Form
                    </button>
                    <button type="submit" class="nav-btn success-btn">
                        <i class="fas fa-save"></i> Register Resident
                    </button>
                </div>
            </form>
        </div>

        <!-- Certificate Generation Module -->
        <div id="certificateGenerationScreen" class="screen hidden">
            <h2>
                Certificate Generation
                <button class="nav-btn secondary-btn" id="backToDashboardFromCertificates">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="certificateType" class="required">Certificate Type</label>
                    <select id="certificateType" required>
                        <option value="">Select Certificate Type</option>
                        <option value="residency">Certificate of Residency</option>
                        <option value="indigency">Certificate of Indigency</option>
                        <option value="goodmoral">Certificate of Good Moral Character</option>
                        <option value="employment">Certificate of Employment</option>
                        <option value="nocriminal">No Criminal Record</option>
                        <option value="soloparent">Solo Parent Certification</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="certificateRecipient" class="required">Recipient Name</label>
                    <input type="text" id="certificateRecipient" placeholder="Search resident name..." required>
                    <div id="residentSuggestions" style="margin-top: 5px; display: none;">
                        <!-- Suggestions will be populated here -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="certificatePurpose" class="required">Purpose</label>
                    <input type="text" id="certificatePurpose" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="certificateDate">Certificate Date</label>
                    <input type="date" id="certificateDate">
                </div>
                
                <div class="form-group">
                    <label for="certificateValidity">Validity (Days)</label>
                    <input type="number" id="certificateValidity" min="1" max="365" value="30">
                </div>
                
                <div class="form-group">
                    <label for="certificateNumber">Certificate Number</label>
                    <input type="text" id="certificateNumber" value="BPV-2023-" readonly>
                </div>
            </div>
            
            <div class="form-group">
                <label for="certificateRemarks">Additional Remarks</label>
                <textarea id="certificateRemarks" rows="3" placeholder="Any additional information for the certificate..."></textarea>
            </div>
            
            <div class="certificate-preview">
                <div class="certificate-header">
                    <h2 id="previewCertificateType">CERTIFICATE OF RESIDENCY</h2>
                    <p>Republic of the Philippines<br>Province of Cavite<br>Barangay Pilar Village</p>
                </div>
                
                <div class="certificate-body">
                    <p>TO WHOM IT MAY CONCERN:</p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        This is to certify that <strong id="previewRecipient">[RECIPIENT NAME]</strong>, 
                        of legal age, is a bona fide resident of <strong id="previewAddress">[ADDRESS]</strong>, 
                        Barangay Pilar Village, and has been residing therein for <strong id="previewLengthStay">[LENGTH]</strong>.
                    </p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        This certification is issued upon the request of the above-named person for <strong id="previewPurpose">[PURPOSE]</strong> 
                        and whatever legal purpose it may serve.
                    </p>
                    
                    <p style="text-indent: 40px; margin: 20px 0;">
                        Issued this <strong id="previewDate">[DATE]</strong> at Barangay Pilar Village.
                    </p>
                </div>
                
                <div class="certificate-footer">
                    <div class="signature-box">
                        <div class="signature-line"></div>
                        <p><strong>HON. JUAN DELA CRUZ</strong><br>Barangay Captain</p>
                    </div>
                    
                    <div class="signature-box">
                        <div class="signature-line"></div>
                        <p><strong>MARIA SANTOS</strong><br>Barangay Secretary</p>
                    </div>
                </div>
            </div>
            
            <div class="nav-buttons" style="margin-top: 30px;">
                <button class="nav-btn secondary-btn" id="previewCertificate">
                    <i class="fas fa-eye"></i> Update Preview
                </button>
                <button class="nav-btn primary-btn" id="printCertificate">
                    <i class="fas fa-print"></i> Print Certificate
                </button>
                <button class="nav-btn success-btn" id="saveCertificate">
                    <i class="fas fa-save"></i> Save & Generate
                </button>
            </div>
        </div>

        <!-- Reports Dashboard -->
        <div id="reportsDashboardScreen" class="screen hidden">
            <h2>
                Reports Dashboard
                <button class="nav-btn secondary-btn" id="backToDashboardFromReports">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </h2>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <i class="fas fa-file-alt"></i>
                    <h3>156</h3>
                    <p>Applications This Month</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <h3>42</h3>
                    <p>New Residents This Year</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-certificate"></i>
                    <h3>89</h3>
                    <p>Certificates Issued</p>
                </div>
                
                <div class="stat-card">
                    <i class="fas fa-money-bill-wave"></i>
                    <h3>‚Ç±24,580</h3>
                    <p>Revenue This Month</p>
                </div>
            </div>
            
            <h3>Application Statistics</h3>
            <div class="chart-row">
                <div class="chart-container">
                    <h4>Applications by Type</h4>
                    <div style="height: 300px; display: flex; align-items: flex-end; justify-content: space-around; margin-top: 20px;">
                        <div style="text-align: center;">
                            <div style="height: 200px; width: 40px; background-color: var(--blue-medium); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Residency</div>
                            <div style="font-weight: bold;">45%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 150px; width: 40px; background-color: var(--green); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Indigency</div>
                            <div style="font-weight: bold;">25%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 100px; width: 40px; background-color: var(--orange); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Job Seeker</div>
                            <div style="font-weight: bold;">15%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 80px; width: 40px; background-color: var(--purple); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Business</div>
                            <div style="font-weight: bold;">10%</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="height: 50px; width: 40px; background-color: var(--red); margin: 0 auto;"></div>
                            <div style="margin-top: 10px;">Others</div>
                            <div style="font-weight: bold;">5%</div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h4>Applications by Status</h4>
                    <div style="height: 300px; display: flex; align-items: center; justify-content: center; margin-top: 20px;">
                        <div style="width: 200px; height: 200px; border-radius: 50%; background: conic-gradient(var(--green) 0% 65%, var(--yellow) 65% 85%, var(--red) 85% 100%);"></div>
                    </div>
                    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--green); margin-right: 5px;"></span> Approved (65%)</div>
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--yellow); margin-right: 5px;"></span> Pending (20%)</div>
                        <div><span style="display: inline-block; width: 15px; height: 15px; background-color: var(--red); margin-right: 5px;"></span> Rejected (15%)</div>
                    </div>
                </div>
            </div>
            
            <h3>Monthly Report</h3>
            <div class="filter-controls">
                <div class="filter-group">
                    <label>Report Type</label>
                    <select id="reportType">
                        <option value="applications">Applications Report</option>
                        <option value="residents">Residents Report</option>
                        <option value="financial">Financial Report</option>
                        <option value="certificates">Certificates Report</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Month</label>
                    <select id="reportMonth">
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Year</label>
                    <select id="reportYear">
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                    </select>
                </div>
                
                <button class="nav-btn primary-btn filter-btn" id="generateReport">
                    <i class="fas fa-chart-bar"></i> Generate Report
                </button>
                
                <button class="nav-btn success-btn filter-btn" id="exportReport">
                    <i class="fas fa-download"></i> Export as PDF
                </button>
            </div>
            
            <div class="table-container" style="margin-top: 20px;">
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Application Type</th>
                            <th>Applicant</th>
                            <th>Status</th>
                            <th>Processed By</th>
                            <th>Processing Time</th>
                        </tr>
                    </thead>
                    <tbody id="reportTable">
                        <!-- Report data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Form View Modal -->
        <div id="formViewModal" class="modal-overlay hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Application Details</h2>
                    <button class="close-modal" id="closeModalBtn">&times;</button>
                </div>
                <div id="formViewContent">
                    <!-- Form content will be populated here -->
                </div>
                <div style="margin-top: 20px; text-align: center;">
                    <button class="nav-btn secondary-btn" id="closeModal">Close</button>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3><i class="fas fa-map-marker-alt"></i> Visit Us!</h3>
                <p>C2C5+FCQ, Aguirre Corner Sapphire, Pilar, Las Pi√±as, 1740 Metro Manila</p>
            </div>
            <div class="footer-section">
                <h3><i class="fas fa-phone-alt"></i> Contact Us!</h3>
                <p>0927 342 5375</p>
                <p>Office Hours: Mon-Fri 8:00 AM - 5:00 PM</p>
            </div>
            <div class="footer-section">
                <h3><i class="fas fa-info-circle"></i> About</h3>
                <p>Barangay Pilar Village Services Portal</p>
                <p>Official online service platform</p>
            </div>
        </div>
    </footer>

    <script>
        // Data Management
        let applicantsDatabase = JSON.parse(localStorage.getItem('applicantsDatabase')) || [];
        let residentsDatabase = JSON.parse(localStorage.getItem('residentsDatabase')) || [];
        
        // Initialize sample data if empty
        if (applicantsDatabase.length === 0) {
            const sampleApplicant = {
                id: Date.now(),
                lastName: 'SANTOS',
                firstName: 'JUAN',
                middleName: 'DELA CRUZ',
                contactNumber: '09171234567',
                birthday: '1999-01-15',
                age: '25',
                birthPlace: 'MANILA, METRO MANILA',
                nationality: 'FILIPINO',
                sex: 'MALE',
                purpose: 'BARANGAY CLEARANCE',
                subdivision: 'PILAR VILLAGE',
                street: 'SAPPHIRE STREET',
                block: '5',
                lot: '12',
                lengthStay: '2',
                stayUnit: 'YEARS',
                certificatePurposes: ['PROOF OF RESIDENCY'],
                barangayClearanceData: {
                    purpose: 'PROOF OF RESIDENCY'
                },
                status: 'Pending',
                dateSubmitted: new Date().toLocaleDateString(),
                isMultiPurpose: false
            };
            
            applicantsDatabase.push(sampleApplicant);
            localStorage.setItem('applicantsDatabase', JSON.stringify(applicantsDatabase));
        }
        
        if (residentsDatabase.length === 0) {
            const sampleResidents = [
                { id: 1, lastName: 'DELA CRUZ', firstName: 'JUAN', middleName: 'SANTOS', birthdate: '1990-05-15', age: 33, civilStatus: 'Single', contact: '09123456789', email: 'juan@example.com', occupation: 'Teacher', blockLot: 'BLOCK 5, LOT 12', street: 'SAPPHIRE STREET', subdivision: 'PILAR VILLAGE', lengthStay: '5 years', notes: '' },
                { id: 2, lastName: 'SANTOS', firstName: 'MARIA', middleName: 'REYES', birthdate: '1985-08-22', age: 38, civilStatus: 'Married', contact: '09234567890', email: 'maria@example.com', occupation: 'Nurse', blockLot: 'BLOCK 3, LOT 8', street: 'DIAMOND STREET', subdivision: 'TERESA PARK', lengthStay: '10 years', notes: '' }
            ];
            
            residentsDatabase = sampleResidents;
            localStorage.setItem('residentsDatabase', JSON.stringify(residentsDatabase));
        }

        // Application Purposes
        const applicationPurposes = [
            { id: 'barangay_clearance', name: 'BARANGAY CLEARANCE' },
            { id: 'sample_1', name: 'SAMPLE 1' },
            { id: 'sample_2', name: 'SAMPLE 2' }
        ];

        // Certificate Purposes (for barangay clearance)
        const certificatePurposes = [
            "PROOF OF RESIDENCY",
            "PROOF OF INDIGENCY",
            "POSTAL ID REQUIREMENT",
            "PWD ID REQUIREMENT",
            "SENIOR CITIZEN ID REQUIREMENT",
            "MEDICAL ASSISTANCE/FINANCIAL",
            "EDUCATIONAL ASSISTANCE",
            "GREENCARD APPLICATION/RENEWAL",
            "LOCAL EMPLOYMENT",
            "SCHOOL REQUIREMENT",
            "BANK REQUIREMENT",
            "LOAN APPLICATION",
            "SOLO PARENT ID REQUIREMENT",
            "PHILHEALTH APPLICATION",
            "TIN ID APPLICATION",
            "GSIS REQUIREMENT",
            "SSS REQUIREMENT",
            "MARRIAGE LICENSE APPLICATION",
            "LATE REGISTRATION OF BIRTH",
            "DRIVER LICENSE APPLICATION",
            "BUSINESS PERMIT APPLICATION",
            "FIRST TIME JOB SEEKER",
            "LIBRENG LIBING",
            "CUTTING TREES",
            "SOCIAL PENSION",
            "ONENESS",
            "UNEMPLOYMENT",
            "NO DEROGATORY",
            "CERTIFICATE OF RESIDENCY",
            "GOOD MORAL",
            "FIRE VICTIM",
            "CHANGE ADDRESS",
            "MAYNILAD/MERALCO",
            "COHABITATION"
        ];

        // Subdivisions and Streets
        const subdivisions = [
            "CYPRESS MANGGAHAN",
            "CAMELLA HOMES CLASSIC",
            "CLASSIC HOMES",
            "CUEVAS COMPOUND",
            "DAISY COMPOUND",
            "GARDEN COMPOUND",
            "GLORIA COMPOUND",
            "MALIGAYA COMPOUND",
            "PAG-ASA COMPOUND",
            "SAMPAGUITA COMPOUND",
            "BF PILAR SOUTHVILLE",
            "TERESA COMPOUND",
            "PILAR VILLAGE",
            "TERESA PARK"
        ];

        // Sample streets for each subdivision
        const streetsBySubdivision = {
            "PILAR VILLAGE": ["SAPPHIRE STREET", "DIAMOND STREET", "RUBY STREET", "EMERALD STREET"],
            "TERESA PARK": ["ROSE STREET", "LILY STREET", "DAISY STREET", "TULIP STREET"],
            "CYPRESS MANGGAHAN": ["CYPRESS STREET", "MANGGAHAN STREET", "NARRA STREET", "ACACIA STREET"],
            "BF PILAR SOUTHVILLE": ["SOUTHVILLE STREET", "BF HOMES STREET", "PILAR STREET", "MAIN STREET"],
            "CAMELLA HOMES CLASSIC": ["CAMELLA STREET", "CLASSIC STREET", "HOMES STREET", "GARDEN STREET"],
            "CLASSIC HOMES": ["CLASSIC AVENUE", "HOMES LANE", "TRADITION STREET", "LEGACY STREET"],
            "CUEVAS COMPOUND": ["CUEVAS STREET", "FAMILY STREET", "COMPOUND ROAD", "MAIN AVENUE"],
            "DAISY COMPOUND": ["DAISY LANE", "FLOWER STREET", "GARDEN ROAD", "NATURE STREET"],
            "GARDEN COMPOUND": ["GARDEN LANE", "FLORAL STREET", "NATURE ROAD", "BLOOM STREET"],
            "GLORIA COMPOUND": ["GLORIA STREET", "HOPE STREET", "FAITH STREET", "JOY STREET"],
            "MALIGAYA COMPOUND": ["MALIGAYA STREET", "HAPPINESS ROAD", "JOY LANE", "BLISS STREET"],
            "PAG-ASA COMPOUND": ["PAG-ASA STREET", "HOPE LANE", "FAITH ROAD", "CHARITY STREET"],
            "SAMPAGUITA COMPOUND": ["SAMPAGUITA STREET", "FLOWER LANE", "FRAGRANCE ROAD", "BLOOM STREET"],
            "TERESA COMPOUND": ["TERESA STREET", "SAINT LANE", "HOLY ROAD", "BLESSED STREET"]
        };

        // DOM Elements - defined globally
        let accessScreen, loginScreen, applicantForm, thankYouScreen, memberDashboard;
        let applicationsManagementScreen, residentRegistrationScreen, certificateGenerationScreen, reportsDashboardScreen;
        let formViewModal, formViewContent;
        let applicantBtn, memberBtn, backToAccessFromLogin, backToAccessFromApplicant;
        let cancelApplicantForm, backToHomeFromThankYou, logoutBtn;
        let applicationForm, purposeSearch, purposeDropdown, selectedPurposes, purposeSections;
        let newApplicationBtn, lastName, firstName, middleName, contactNumber, birthday, age, birthPlace;
        let nationality, sex, applicationsManagementBtn, residentRegistrationBtn, certificateGenerationBtn;
        let reportsDashboardBtn, backToDashboardFromApps, backToDashboardFromRegistration;
        let backToDashboardFromCertificates, backToDashboardFromReports, closeModalBtn, closeModal;

        // Variables
        let selectedApplicationPurposes = [];
        let certificatePurposeSelects = {};

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize DOM elements
            initializeDOMElements();
            
            // Setup all functionality
            populateNationalityDropdown();
            populatePurposeDropdown();
            setupEventListeners();
            updateDashboardStats();
            populateApplicationsTable();
            populateRecentActivity();
            populateReportTable();
            
            // Set today's date as max for birthday
            const today = new Date().toISOString().split('T')[0];
            if (birthday) {
                birthday.max = today;
            }
        });

        function initializeDOMElements() {
            // Main screens
            accessScreen = document.getElementById('accessScreen');
            loginScreen = document.getElementById('loginScreen');
            applicantForm = document.getElementById('applicantForm');
            thankYouScreen = document.getElementById('thankYouScreen');
            memberDashboard = document.getElementById('memberDashboard');
            applicationsManagementScreen = document.getElementById('applicationsManagementScreen');
            residentRegistrationScreen = document.getElementById('residentRegistrationScreen');
            certificateGenerationScreen = document.getElementById('certificateGenerationScreen');
            reportsDashboardScreen = document.getElementById('reportsDashboardScreen');
            formViewModal = document.getElementById('formViewModal');
            formViewContent = document.getElementById('formViewContent');
            
            // Buttons
            applicantBtn = document.getElementById('applicantBtn');
            memberBtn = document.getElementById('memberBtn');
            backToAccessFromLogin = document.getElementById('backToAccessFromLogin');
            backToAccessFromApplicant = document.getElementById('backToAccessFromApplicant');
            cancelApplicantForm = document.getElementById('cancelApplicantForm');
            backToHomeFromThankYou = document.getElementById('backToHomeFromThankYou');
            logoutBtn = document.getElementById('logoutBtn');
            
            // Application form elements
            applicationForm = document.getElementById('applicationForm');
            purposeSearch = document.getElementById('purposeSearch');
            purposeDropdown = document.getElementById('purposeDropdown');
            selectedPurposes = document.getElementById('selectedPurposes');
            purposeSections = document.getElementById('purposeSections');
            newApplicationBtn = document.getElementById('newApplicationBtn');
            
            // Personal information fields
            lastName = document.getElementById('lastName');
            firstName = document.getElementById('firstName');
            middleName = document.getElementById('middleName');
            contactNumber = document.getElementById('contactNumber');
            birthday = document.getElementById('birthday');
            age = document.getElementById('age');
            birthPlace = document.getElementById('birthPlace');
            nationality = document.getElementById('nationality');
            sex = document.getElementById('sex');
            
            // Dashboard navigation buttons
            applicationsManagementBtn = document.getElementById('applicationsManagementBtn');
            residentRegistrationBtn = document.getElementById('residentRegistrationBtn');
            certificateGenerationBtn = document.getElementById('certificateGenerationBtn');
            reportsDashboardBtn = document.getElementById('reportsDashboardBtn');
            
            // Back buttons from sub-screens
            backToDashboardFromApps = document.getElementById('backToDashboardFromApps');
            backToDashboardFromRegistration = document.getElementById('backToDashboardFromRegistration');
            backToDashboardFromCertificates = document.getElementById('backToDashboardFromCertificates');
            backToDashboardFromReports = document.getElementById('backToDashboardFromReports');
            
            // Modal buttons
            closeModalBtn = document.getElementById('closeModalBtn');
            closeModal = document.getElementById('closeModal');
        }

        function setupEventListeners() {
            // Main navigation - FIXED
            if (applicantBtn) {
                applicantBtn.addEventListener('click', function() {
                    accessScreen.classList.add('hidden');
                    applicantForm.classList.remove('hidden');
                    resetApplicationForm();
                });
            }
            
            if (memberBtn) {
                memberBtn.addEventListener('click', function() {
                    accessScreen.classList.add('hidden');
                    loginScreen.classList.remove('hidden');
                });
            }
            
            if (backToAccessFromLogin) {
                backToAccessFromLogin.addEventListener('click', function() {
                    loginScreen.classList.add('hidden');
                    accessScreen.classList.remove('hidden');
                });
            }
            
            if (backToAccessFromApplicant) {
                backToAccessFromApplicant.addEventListener('click', function() {
                    applicantForm.classList.add('hidden');
                    accessScreen.classList.remove('hidden');
                });
            }
            
            if (cancelApplicantForm) {
                cancelApplicantForm.addEventListener('click', function() {
                    if (confirm('Are you sure you want to cancel? All entered data will be lost.')) {
                        applicantForm.classList.add('hidden');
                        accessScreen.classList.remove('hidden');
                    }
                });
            }
            
            // Thank you screen navigation
            if (newApplicationBtn) {
                newApplicationBtn.addEventListener('click', function() {
                    thankYouScreen.classList.add('hidden');
                    applicantForm.classList.remove('hidden');
                    resetApplicationForm();
                });
            }
            
            if (backToHomeFromThankYou) {
                backToHomeFromThankYou.addEventListener('click', function() {
                    thankYouScreen.classList.add('hidden');
                    accessScreen.classList.remove('hidden');
                });
            }
            
            // Login form
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const username = document.getElementById('username').value.trim();
                    const password = document.getElementById('password').value;
                    
                    const validCredentials = [
                        { username: 'admin', password: 'barangay2023', name: 'Administrator' },
                        { username: 'staff', password: 'pilarvillage', name: 'Staff Member' }
                    ];
                    
                    const validUser = validCredentials.find(
                        cred => cred.username === username && cred.password === password
                    );
                    
                    if (validUser) {
                        document.getElementById('loginError').style.display = 'none';
                        document.getElementById('loggedInUser').textContent = validUser.name;
                        loginScreen.classList.add('hidden');
                        memberDashboard.classList.remove('hidden');
                        this.reset();
                        updateDashboardStats();
                        populateApplicationsTable();
                    } else {
                        document.getElementById('loginError').style.display = 'block';
                        document.getElementById('password').value = '';
                    }
                });
            }
            
            // Logout
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function() {
                    memberDashboard.classList.add('hidden');
                    accessScreen.classList.remove('hidden');
                });
            }
            
            // Dashboard navigation
            if (applicationsManagementBtn) {
                applicationsManagementBtn.addEventListener('click', function() {
                    memberDashboard.classList.add('hidden');
                    applicationsManagementScreen.classList.remove('hidden');
                    populateApplicationsTable();
                });
            }
            
            if (residentRegistrationBtn) {
                residentRegistrationBtn.addEventListener('click', function() {
                    memberDashboard.classList.add('hidden');
                    residentRegistrationScreen.classList.remove('hidden');
                });
            }
            
            if (certificateGenerationBtn) {
                certificateGenerationBtn.addEventListener('click', function() {
                    memberDashboard.classList.add('hidden');
                    certificateGenerationScreen.classList.remove('hidden');
                });
            }
            
            if (reportsDashboardBtn) {
                reportsDashboardBtn.addEventListener('click', function() {
                    memberDashboard.classList.add('hidden');
                    reportsDashboardScreen.classList.remove('hidden');
                });
            }
            
            // Back buttons
            if (backToDashboardFromApps) {
                backToDashboardFromApps.addEventListener('click', function() {
                    applicationsManagementScreen.classList.add('hidden');
                    memberDashboard.classList.remove('hidden');
                });
            }
            
            if (backToDashboardFromRegistration) {
                backToDashboardFromRegistration.addEventListener('click', function() {
                    residentRegistrationScreen.classList.add('hidden');
                    memberDashboard.classList.remove('hidden');
                });
            }
            
            if (backToDashboardFromCertificates) {
                backToDashboardFromCertificates.addEventListener('click', function() {
                    certificateGenerationScreen.classList.add('hidden');
                    memberDashboard.classList.remove('hidden');
                });
            }
            
            if (backToDashboardFromReports) {
                backToDashboardFromReports.addEventListener('click', function() {
                    reportsDashboardScreen.classList.add('hidden');
                    memberDashboard.classList.remove('hidden');
                });
            }
            
            // Application form event listeners
            if (applicationForm) {
                // Auto-capitalize all text inputs
                document.querySelectorAll('input[type="text"], textarea').forEach(input => {
                    if (input.id !== 'username' && input.id !== 'password') {
                        input.addEventListener('input', function() {
                            this.value = this.value.toUpperCase();
                        });
                    }
                });
                
                // Letters-only validation for name fields
                [lastName, firstName, middleName, birthPlace].forEach(field => {
                    if (field) {
                        field.addEventListener('input', function() {
                            this.value = this.value.replace(/[^A-Z\s]/gi, '');
                        });
                    }
                });
                
                // Phone number formatting
                if (contactNumber) {
                    contactNumber.addEventListener('input', function() {
                        let value = this.value.replace(/\D/g, '');
                        
                        // Format as 09xx xxx xxxx
                        if (value.length > 0) {
                            if (!value.startsWith('09')) {
                                value = '09' + value.substring(2);
                            }
                            
                            if (value.length > 2) {
                                value = value.substring(0, 4) + ' ' + value.substring(4);
                            }
                            if (value.length > 7) {
                                value = value.substring(0, 8) + ' ' + value.substring(8);
                            }
                            if (value.length > 12) {
                                value = value.substring(0, 12);
                            }
                        }
                        
                        this.value = value;
                    });
                }
                
                // Age calculation from birthday
                if (birthday && age) {
                    birthday.addEventListener('change', function() {
                        if (this.value) {
                            const birthDate = new Date(this.value);
                            const today = new Date();
                            let calculatedAge = today.getFullYear() - birthDate.getFullYear();
                            const monthDiff = today.getMonth() - birthDate.getMonth();
                            
                            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                                calculatedAge--;
                            }
                            
                            age.value = calculatedAge;
                        }
                    });
                }
                
                // Custom select functionality
                if (purposeSearch && purposeDropdown) {
                    purposeSearch.addEventListener('focus', function() {
                        purposeDropdown.style.display = 'block';
                        filterPurposeOptions('');
                    });
                    
                    purposeSearch.addEventListener('input', function() {
                        filterPurposeOptions(this.value);
                    });
                    
                    // Close dropdown when clicking outside
                    document.addEventListener('click', function(e) {
                        if (!purposeSearch.contains